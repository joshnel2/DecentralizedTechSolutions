import{r as m,a6 as e,h as v}from"./vendor-DrKzkH4x.js";import{u as w}from"./index-CCWWoMiH.js";import{a as k}from"./router-CNLU_KyZ.js";import{A as f,al as z,bh as b,as as q,ao as O,aE as N,F as P,x as E,aq as L,am as G,az as I,aX as R,v as H,X as M}from"./icons-BtUkkwGS.js";import"./doc-parsers-U1nJMjtM.js";import"./react-dom-DfB-QKj2.js";import"./pdf-worker-CVmCB3lP.js";import"./state-72d44OIA.js";const V="_customFieldsPage_1jqdo_1",U="_backButton_1jqdo_6",$="_header_1jqdo_36",Q="_headerIcon_1jqdo_43",X="_headerContent_1jqdo_54",W="_primaryBtn_1jqdo_70",Y="_toolbar_1jqdo_90",J="_searchBox_1jqdo_99",K="_entityTabs_1jqdo_127",Z="_entityTab_1jqdo_127",ee="_active_1jqdo_151",te="_fieldsList_1jqdo_157",se="_fieldsTable_1jqdo_164",ae="_dragHandle_1jqdo_196",ne="_fieldName_1jqdo_206",oe="_fieldDesc_1jqdo_217",le="_entityBadge_1jqdo_222",ie="_typeCell_1jqdo_232",ce="_required_1jqdo_236",re="_optional_1jqdo_240",de="_optionsPreview_1jqdo_244",me="_actions_1jqdo_253",he="_iconBtn_1jqdo_259",ue="_iconBtnDanger_1jqdo_279",pe="_emptyState_1jqdo_299",je="_noAccess_1jqdo_327",xe="_modalOverlay_1jqdo_354",_e="_modal_1jqdo_354",ye="_modalHeader_1jqdo_378",ge="_closeBtn_1jqdo_392",ve="_modalForm_1jqdo_411",be="_formGroup_1jqdo_415",qe="_formRow_1jqdo_494",Ne="_toggle_1jqdo_500",Ce="_toggleLabel_1jqdo_510",Be="_toggleDesc_1jqdo_518",Fe="_slider_1jqdo_537",Se="_modalActions_1jqdo_572",Ae="_cancelBtn_1jqdo_580",t={customFieldsPage:V,backButton:U,header:$,headerIcon:Q,headerContent:X,primaryBtn:W,toolbar:Y,searchBox:J,entityTabs:K,entityTab:Z,active:ee,fieldsList:te,fieldsTable:se,dragHandle:ae,fieldName:ne,fieldDesc:oe,entityBadge:le,typeCell:ie,required:ce,optional:re,optionsPreview:de,actions:me,iconBtn:he,iconBtnDanger:ue,emptyState:pe,noAccess:je,modalOverlay:xe,modal:_e,modalHeader:ye,closeBtn:ge,modalForm:ve,formGroup:be,formRow:qe,toggle:Ne,toggleLabel:Ce,toggleDesc:Be,switch:"_switch_1jqdo_523",slider:Fe,modalActions:Se,cancelBtn:Ae},De=[{id:"1",name:"SSN/Tax ID",entity:"client",type:"text",required:!0,description:"Social Security Number or Tax ID",createdAt:"2024-01-15"},{id:"2",name:"Date of Birth",entity:"client",type:"date",required:!1,createdAt:"2024-01-15"},{id:"3",name:"Referral Source",entity:"client",type:"select",required:!0,options:["Website","Referral","Advertisement","Bar Association","Other"],createdAt:"2024-01-20"},{id:"4",name:"Case Value",entity:"matter",type:"currency",required:!1,description:"Estimated value of the case",createdAt:"2024-02-01"},{id:"5",name:"Court Deadline",entity:"matter",type:"date",required:!1,createdAt:"2024-02-01"},{id:"6",name:"Document Category",entity:"document",type:"select",required:!0,options:["Pleading","Discovery","Correspondence","Contract","Evidence","Other"],createdAt:"2024-02-10"},{id:"7",name:"Opposing Counsel",entity:"matter",type:"text",required:!1,placeholder:"Name and firm",createdAt:"2024-02-15"},{id:"8",name:"Statute of Limitations",entity:"matter",type:"date",required:!0,description:"Critical date for filing",createdAt:"2024-03-01"}],C={client:{label:"Client",icon:N,color:"#10B981"},matter:{label:"Matter",icon:E,color:"#3B82F6"},document:{label:"Document",icon:P,color:"#8B5CF6"},contact:{label:"Contact",icon:N,color:"#F59E0B"}},B=[{value:"text",label:"Text"},{value:"textarea",label:"Long Text"},{value:"number",label:"Number"},{value:"currency",label:"Currency"},{value:"date",label:"Date"},{value:"select",label:"Dropdown"},{value:"checkbox",label:"Checkbox"},{value:"email",label:"Email"},{value:"phone",label:"Phone"},{value:"url",label:"URL"}];function Ge(){const n=k(),{user:c}=w(),[u,a]=m.useState(De),[r,p]=m.useState(""),[d,o]=m.useState("all"),[j,h]=m.useState(!1),[x,_]=m.useState(null),F=(c==null?void 0:c.role)==="owner"||(c==null?void 0:c.role)==="admin",y=u.filter(s=>{const l=s.name.toLowerCase().includes(r.toLowerCase()),i=d==="all"||s.entity===d;return l&&i}),S=s=>{if(x)a(l=>l.map(i=>i.id===x.id?{...i,...s}:i));else{const l={id:Date.now().toString(),name:s.name||"",entity:s.entity||"client",type:s.type||"text",required:s.required||!1,placeholder:s.placeholder,options:s.options,defaultValue:s.defaultValue,description:s.description,createdAt:new Date().toISOString().split("T")[0]};a(i=>[...i,l])}h(!1),_(null)},A=s=>{a(l=>l.filter(i=>i.id!==s))},D=s=>{const l={...s,id:Date.now().toString(),name:`${s.name} (Copy)`,createdAt:new Date().toISOString().split("T")[0]};a(i=>[...i,l])};return F?e.jsxs("div",{className:t.customFieldsPage,children:[e.jsxs("button",{className:t.backButton,onClick:()=>n("/app/settings"),children:[e.jsx(z,{size:16}),"Back to Settings"]}),e.jsxs("div",{className:t.header,children:[e.jsx("div",{className:t.headerIcon,children:e.jsx(b,{size:28})}),e.jsxs("div",{className:t.headerContent,children:[e.jsx("h1",{children:"Custom Fields"}),e.jsx("p",{children:"Create and manage custom fields for clients, matters, documents, and contacts."})]}),e.jsxs("button",{className:t.primaryBtn,onClick:()=>h(!0),children:[e.jsx(q,{size:18}),"Add Custom Field"]})]}),e.jsxs("div",{className:t.toolbar,children:[e.jsxs("div",{className:t.searchBox,children:[e.jsx(O,{size:18}),e.jsx("input",{type:"text",placeholder:"Search fields...",value:r,onChange:s=>p(s.target.value)})]}),e.jsxs("div",{className:t.entityTabs,children:[e.jsx("button",{className:v(t.entityTab,d==="all"&&t.active),onClick:()=>o("all"),children:"All"}),Object.entries(C).map(([s,l])=>e.jsxs("button",{className:v(t.entityTab,d===s&&t.active),onClick:()=>o(s),children:[e.jsx(l.icon,{size:16}),l.label]},s))]})]}),e.jsx("div",{className:t.fieldsList,children:y.length>0?e.jsxs("table",{className:t.fieldsTable,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{}),e.jsx("th",{children:"Field Name"}),e.jsx("th",{children:"Entity"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Required"}),e.jsx("th",{children:"Options"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:y.map(s=>{var g;const l=C[s.entity],i=l.icon;return e.jsxs("tr",{children:[e.jsx("td",{className:t.dragHandle,children:e.jsx(L,{size:16})}),e.jsx("td",{children:e.jsxs("div",{className:t.fieldName,children:[e.jsx("span",{children:s.name}),s.description&&e.jsx("span",{className:t.fieldDesc,children:s.description})]})}),e.jsx("td",{children:e.jsxs("span",{className:t.entityBadge,style:{background:`${l.color}20`,color:l.color},children:[e.jsx(i,{size:14}),l.label]})}),e.jsx("td",{className:t.typeCell,children:((g=B.find(T=>T.value===s.type))==null?void 0:g.label)||s.type}),e.jsx("td",{children:s.required?e.jsx(G,{size:18,className:t.required}):e.jsx("span",{className:t.optional,children:"—"})}),e.jsx("td",{children:s.options?e.jsxs("span",{className:t.optionsPreview,children:[s.options.slice(0,2).join(", "),s.options.length>2&&`, +${s.options.length-2}`]}):e.jsx("span",{className:t.optional,children:"—"})}),e.jsx("td",{children:e.jsxs("div",{className:t.actions,children:[e.jsx("button",{className:t.iconBtn,title:"Edit",onClick:()=>{_(s),h(!0)},children:e.jsx(I,{size:16})}),e.jsx("button",{className:t.iconBtn,title:"Duplicate",onClick:()=>D(s),children:e.jsx(R,{size:16})}),e.jsx("button",{className:t.iconBtnDanger,title:"Delete",onClick:()=>A(s.id),children:e.jsx(H,{size:16})})]})})]},s.id)})})]}):e.jsxs("div",{className:t.emptyState,children:[e.jsx(b,{size:48}),e.jsx("h3",{children:"No Custom Fields Found"}),e.jsx("p",{children:"Create custom fields to capture additional information for your clients, matters, and documents."}),e.jsxs("button",{className:t.primaryBtn,onClick:()=>h(!0),children:[e.jsx(q,{size:18}),"Create Your First Field"]})]})}),j&&e.jsx(Te,{field:x,onClose:()=>{h(!1),_(null)},onSave:S})]}):e.jsxs("div",{className:t.noAccess,children:[e.jsx(f,{size:48}),e.jsx("h2",{children:"Access Denied"}),e.jsx("p",{children:"Only administrators can manage custom fields."})]})}function Te({field:n,onClose:c,onSave:u}){var d;const[a,r]=m.useState({name:(n==null?void 0:n.name)||"",entity:(n==null?void 0:n.entity)||"client",type:(n==null?void 0:n.type)||"text",required:(n==null?void 0:n.required)||!1,placeholder:(n==null?void 0:n.placeholder)||"",description:(n==null?void 0:n.description)||"",options:((d=n==null?void 0:n.options)==null?void 0:d.join(`
`))||""}),p=o=>{o.preventDefault(),u({name:a.name,entity:a.entity,type:a.type,required:a.required,placeholder:a.placeholder||void 0,description:a.description||void 0,options:a.type==="select"?a.options.split(`
`).filter(j=>j.trim()):void 0})};return e.jsx("div",{className:t.modalOverlay,onClick:c,children:e.jsxs("div",{className:t.modal,onClick:o=>o.stopPropagation(),children:[e.jsxs("div",{className:t.modalHeader,children:[e.jsx("h2",{children:n?"Edit Custom Field":"Add Custom Field"}),e.jsx("button",{onClick:c,className:t.closeBtn,children:e.jsx(M,{size:20})})]}),e.jsxs("form",{onSubmit:p,className:t.modalForm,children:[e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Field Name *"}),e.jsx("input",{type:"text",value:a.name,onChange:o=>r({...a,name:o.target.value}),placeholder:"e.g., SSN/Tax ID",required:!0})]}),e.jsxs("div",{className:t.formRow,children:[e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Entity *"}),e.jsxs("select",{value:a.entity,onChange:o=>r({...a,entity:o.target.value}),children:[e.jsx("option",{value:"client",children:"Client"}),e.jsx("option",{value:"matter",children:"Matter"}),e.jsx("option",{value:"document",children:"Document"}),e.jsx("option",{value:"contact",children:"Contact"})]})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Field Type *"}),e.jsx("select",{value:a.type,onChange:o=>r({...a,type:o.target.value}),children:B.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Description"}),e.jsx("input",{type:"text",value:a.description,onChange:o=>r({...a,description:o.target.value}),placeholder:"Brief description of this field"})]}),e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Placeholder Text"}),e.jsx("input",{type:"text",value:a.placeholder,onChange:o=>r({...a,placeholder:o.target.value}),placeholder:"Hint text shown in empty field"})]}),a.type==="select"&&e.jsxs("div",{className:t.formGroup,children:[e.jsx("label",{children:"Options (one per line) *"}),e.jsx("textarea",{value:a.options,onChange:o=>r({...a,options:o.target.value}),placeholder:`Option 1
Option 2
Option 3`,rows:4})]}),e.jsxs("div",{className:t.toggle,children:[e.jsxs("div",{children:[e.jsx("span",{className:t.toggleLabel,children:"Required Field"}),e.jsx("span",{className:t.toggleDesc,children:"Users must fill in this field"})]}),e.jsxs("label",{className:t.switch,children:[e.jsx("input",{type:"checkbox",checked:a.required,onChange:o=>r({...a,required:o.target.checked})}),e.jsx("span",{className:t.slider})]})]}),e.jsxs("div",{className:t.modalActions,children:[e.jsx("button",{type:"button",onClick:c,className:t.cancelBtn,children:"Cancel"}),e.jsx("button",{type:"submit",className:t.primaryBtn,children:n?"Save Changes":"Create Field"})]})]})]})})}export{Ge as CustomFieldsPage};
