import{r as a,a6 as e}from"./vendor-DrKzkH4x.js";import{a as T}from"./router-CNLU_KyZ.js";import{al as A,v as h,a as I,ao as D,aA as w,Y as F,ar as j,x as b,F as z,z as E,am as R,aE as M,J as L}from"./icons-BtUkkwGS.js";import{a as P,p as u,f as H}from"./date-utils-BkNAU8cl.js";import"./doc-parsers-U1nJMjtM.js";import"./react-dom-DfB-QKj2.js";import"./pdf-worker-CVmCB3lP.js";const Q="_recoveryBinPage_fiylb_1",Y="_backButton_fiylb_6",$="_header_fiylb_36",J="_headerIcon_fiylb_43",O="_infoBanner_fiylb_66",U="_toolbar_fiylb_88",q="_searchBox_fiylb_96",G="_filters_fiylb_125",K="_filterSelect_fiylb_130",V="_recoverSelectedBtn_fiylb_184",W="_itemsList_fiylb_203",X="_listHeader_fiylb_210",Z="_selectAll_fiylb_219",ee="_itemCount_fiylb_237",te="_item_fiylb_203",se="_checkbox_fiylb_259",ne="_itemIcon_fiylb_270",le="_itemContent_fiylb_280",ce="_itemName_fiylb_285",ie="_typeBadge_fiylb_295",ae="_itemDescription_fiylb_302",oe="_itemMeta_fiylb_308",re="_relatedTo_fiylb_317",de="_itemActions_fiylb_321",me="_recoverBtn_fiylb_327",he="_deleteBtn_fiylb_352",xe="_emptyState_fiylb_372",s={recoveryBinPage:Q,backButton:Y,header:$,headerIcon:J,infoBanner:O,toolbar:U,searchBox:q,filters:G,filterSelect:K,recoverSelectedBtn:V,itemsList:W,listHeader:X,selectAll:Z,itemCount:ee,item:te,checkbox:se,itemIcon:ne,itemContent:le,itemName:ce,typeBadge:ie,itemDescription:ae,itemMeta:oe,relatedTo:re,itemActions:de,recoverBtn:me,deleteBtn:he,emptyState:xe},_e=[],pe={time_entry:{label:"Time Entry",icon:L,color:"#3B82F6"},person:{label:"Person",icon:M,color:"#10B981"},company:{label:"Company",icon:b,color:"#8B5CF6"},task:{label:"Task",icon:R,color:"#F59E0B"},calendar_entry:{label:"Calendar Entry",icon:E,color:"#EC4899"},document:{label:"Document",icon:z,color:"#06B6D4"},matter:{label:"Matter",icon:b,color:"#EF4444"}};function Be(){const v=T(),[x,_]=a.useState(_e),[r,g]=a.useState(""),[d,B]=a.useState("all"),[l,o]=a.useState([]),[p,y]=a.useState(null),c=a.useMemo(()=>x.filter(t=>{var m;const n=t.name.toLowerCase().includes(r.toLowerCase())||((m=t.description)==null?void 0:m.toLowerCase().includes(r.toLowerCase())),i=d==="all"||t.type===d;return n&&i}),[x,r,d]),f=async t=>{y(t),await new Promise(n=>setTimeout(n,1e3)),_(n=>n.filter(i=>i.id!==t)),y(null)},C=async()=>{for(const t of l)await f(t);o([])},N=t=>{_(n=>n.filter(i=>i.id!==t))},S=()=>{l.length===c.length?o([]):o(c.map(t=>t.id))};return e.jsxs("div",{className:s.recoveryBinPage,children:[e.jsxs("button",{className:s.backButton,onClick:()=>v("/app/settings"),children:[e.jsx(A,{size:16}),"Back to Settings"]}),e.jsxs("div",{className:s.header,children:[e.jsx("div",{className:s.headerIcon,children:e.jsx(h,{size:28})}),e.jsxs("div",{children:[e.jsx("h1",{children:"Recovery Bin"}),e.jsx("p",{children:"Recover recently deleted items. Items are automatically purged after 30 days."})]})]}),e.jsxs("div",{className:s.infoBanner,children:[e.jsx(I,{size:18}),e.jsx("p",{children:"Deleted items are kept for 30 days before permanent deletion. You can restore any item within this period."})]}),e.jsxs("div",{className:s.toolbar,children:[e.jsxs("div",{className:s.searchBox,children:[e.jsx(D,{size:18}),e.jsx("input",{type:"text",placeholder:"Search deleted items...",value:r,onChange:t=>g(t.target.value)})]}),e.jsx("div",{className:s.filters,children:e.jsxs("div",{className:s.filterSelect,children:[e.jsx(w,{size:16}),e.jsxs("select",{value:d,onChange:t=>B(t.target.value),children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"time_entry",children:"Time Entries"}),e.jsx("option",{value:"person",children:"Persons"}),e.jsx("option",{value:"company",children:"Companies"}),e.jsx("option",{value:"task",children:"Tasks"}),e.jsx("option",{value:"calendar_entry",children:"Calendar Entries"}),e.jsx("option",{value:"document",children:"Documents"})]}),e.jsx(F,{size:16})]})}),l.length>0&&e.jsxs("button",{className:s.recoverSelectedBtn,onClick:C,children:[e.jsx(j,{size:16}),"Recover Selected (",l.length,")"]})]}),e.jsx("div",{className:s.itemsList,children:c.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:s.listHeader,children:[e.jsxs("label",{className:s.selectAll,children:[e.jsx("input",{type:"checkbox",checked:l.length===c.length&&c.length>0,onChange:S}),e.jsx("span",{children:"Select All"})]}),e.jsxs("span",{className:s.itemCount,children:[c.length," items"]})]}),c.map(t=>{const n=pe[t.type],i=n.icon;return e.jsxs("div",{className:s.item,children:[e.jsx("label",{className:s.checkbox,children:e.jsx("input",{type:"checkbox",checked:l.includes(t.id),onChange:m=>{m.target.checked?o([...l,t.id]):o(l.filter(k=>k!==t.id))}})}),e.jsx("div",{className:s.itemIcon,style:{background:`${n.color}20`,color:n.color},children:e.jsx(i,{size:18})}),e.jsxs("div",{className:s.itemContent,children:[e.jsxs("div",{className:s.itemName,children:[t.name,e.jsx("span",{className:s.typeBadge,style:{background:`${n.color}20`,color:n.color},children:n.label})]}),t.description&&e.jsx("p",{className:s.itemDescription,children:t.description}),e.jsxs("div",{className:s.itemMeta,children:[e.jsxs("span",{children:["Deleted by ",t.deletedBy]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:P(u(t.deletedAt),{addSuffix:!0})}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:["Expires ",H(u(t.expiresAt),"MMM d, yyyy")]}),t.relatedTo&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{className:s.relatedTo,children:["Matter: ",t.relatedTo]})]})]})]}),e.jsxs("div",{className:s.itemActions,children:[e.jsx("button",{className:s.recoverBtn,onClick:()=>f(t.id),disabled:p===t.id,children:p===t.id?e.jsx(e.Fragment,{children:"Recovering..."}):e.jsxs(e.Fragment,{children:[e.jsx(j,{size:16}),"Recover"]})}),e.jsx("button",{className:s.deleteBtn,onClick:()=>N(t.id),children:e.jsx(h,{size:16})})]})]},t.id)})]}):e.jsxs("div",{className:s.emptyState,children:[e.jsx(h,{size:48}),e.jsx("h3",{children:"Recovery Bin is Empty"}),e.jsx("p",{children:"Deleted items will appear here for 30 days before being permanently removed."})]})})]})}export{Be as RecoveryBinPage};
