import{r as c,a6 as e}from"./vendor-DrKzkH4x.js";import{y as h}from"./index-CCWWoMiH.js";import{a as w}from"./router-CNLU_KyZ.js";import{L as R,G as N,s as D,Z as G,aK as H,D as E,J as f,Q as M,bc as V,a0 as U,a4 as u,ao as $,aB as O,E as Q,R as Z,a as J,am as K}from"./icons-BtUkkwGS.js";import"./doc-parsers-U1nJMjtM.js";import"./react-dom-DfB-QKj2.js";import"./pdf-worker-CVmCB3lP.js";import"./state-72d44OIA.js";const W="_page_1gcfk_3",q="_header_1gcfk_9",X="_headerContent_1gcfk_16",Y="_headerIcon_1gcfk_22",ee="_headerActions_1gcfk_47",se="_settingsBtn_1gcfk_52",te="_setupBanner_1gcfk_73",ae="_setupContent_1gcfk_84",ne="_setupIcon_1gcfk_90",ce="_setupText_1gcfk_101",le="_setupBtn_1gcfk_114",ie="_statsGrid_1gcfk_136",oe="_statCard_1gcfk_143",re="_statIcon_1gcfk_153",de="_statContent_1gcfk_165",ue="_statLabel_1gcfk_171",me="_statValue_1gcfk_176",he="_statNote_1gcfk_190",pe="_accountsSection_1gcfk_196",_e="_accountsGrid_1gcfk_207",xe="_accountCard_1gcfk_213",ge="_accountHeader_1gcfk_220",je="_accountBalance_1gcfk_229",Ne="_accountMeta_1gcfk_236",fe="_transactionsSection_1gcfk_242",Ce="_transactionsHeader_1gcfk_250",ve="_transactionsActions_1gcfk_265",ye="_searchBox_1gcfk_271",ke="_filterSelect_1gcfk_295",Se="_exportBtn_1gcfk_305",Be="_transactionsTable_1gcfk_325",be="_clientCell_1gcfk_357",Ae="_clientName_1gcfk_363",Ie="_matterName_1gcfk_368",Te="_invoiceNum_1gcfk_373",Le="_amountCell_1gcfk_379",Pe="_feeCell_1gcfk_384",ze="_netCell_1gcfk_389",Fe="_dateCell_1gcfk_394",we="_typeBadge_1gcfk_401",Re="_accountBadge_1gcfk_410",De="_trustAccount_1gcfk_419",Ge="_statusBadge_1gcfk_424",He="_statusCompleted_1gcfk_434",Ee="_statusPending_1gcfk_439",Me="_statusFailed_1gcfk_444",Ve="_statusRefunded_1gcfk_449",Ue="_emptyState_1gcfk_455",$e="_complianceFooter_1gcfk_480",Oe="_complianceBadges_1gcfk_488",s={page:W,header:q,headerContent:X,headerIcon:Y,headerActions:ee,settingsBtn:se,setupBanner:te,setupContent:ae,setupIcon:ne,setupText:ce,setupBtn:le,statsGrid:ie,statCard:oe,statIcon:re,statContent:de,statLabel:ue,statValue:me,statNote:he,accountsSection:pe,accountsGrid:_e,accountCard:xe,accountHeader:ge,accountBalance:je,accountMeta:Ne,transactionsSection:fe,transactionsHeader:Ce,transactionsActions:ve,searchBox:ye,filterSelect:ke,exportBtn:Se,transactionsTable:Be,clientCell:be,clientName:Ae,matterName:Ie,invoiceNum:Te,amountCell:Le,feeCell:Pe,netCell:ze,dateCell:Fe,typeBadge:we,accountBadge:Re,trustAccount:De,statusBadge:Ge,statusCompleted:He,statusPending:Ee,statusFailed:Me,statusRefunded:Ve,emptyState:Ue,complianceFooter:$e,complianceBadges:Oe};function es(){var g,j;const p=w(),[C,_]=c.useState(!0),[v,y]=c.useState([]),[a,k]=c.useState(null),[r,S]=c.useState(""),[m,B]=c.useState("all"),[b,A]=c.useState(!1),[l,I]=c.useState(null);c.useEffect(()=>{T()},[]);const T=async()=>{try{_(!0);const t=await h.getConnectionStatus();if(A(t.connected),I(t.connection),t.connected){const[i,o]=await Promise.all([h.getStats(),h.getTransactions({limit:50})]);k(i),y(o.transactions||[])}}catch(t){console.error("Error loading Apex Pay data:",t)}finally{_(!1)}},x=v.filter(t=>{var d;const i=t.clientName.toLowerCase().includes(r.toLowerCase())||t.matterName.toLowerCase().includes(r.toLowerCase())||((d=t.invoiceNumber)==null?void 0:d.toLowerCase().includes(r.toLowerCase())),o=m==="all"||t.status===m;return i&&o}),L=t=>{const i={completed:{icon:K,label:"Completed",className:s.statusCompleted},pending:{icon:f,label:"Pending",className:s.statusPending},failed:{icon:J,label:"Failed",className:s.statusFailed},refunded:{icon:Z,label:"Refunded",className:s.statusRefunded}},{icon:o,label:d,className:F}=i[t];return e.jsxs("span",{className:`${s.statusBadge} ${F}`,children:[e.jsx(o,{size:12}),d]})},P=t=>({card:"Card",ach_debit:"ACH",apple_pay:"Apple Pay",google_pay:"Google Pay"})[t]||t,z=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),n=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t);return C?e.jsxs("div",{className:s.page,children:[e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"50vh"},children:e.jsx(R,{size:32,style:{animation:"spin 1s linear infinite",color:"var(--gold-primary)"}})}),e.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]}):e.jsxs("div",{className:s.page,children:[e.jsxs("div",{className:s.header,children:[e.jsxs("div",{className:s.headerContent,children:[e.jsx("div",{className:s.headerIcon,children:e.jsx(N,{size:28})}),e.jsxs("div",{children:[e.jsx("h1",{children:"Apex Pay"}),e.jsx("p",{children:"Accept payments securely â€¢ Powered by industry-leading encryption"})]})]}),e.jsx("div",{className:s.headerActions,children:e.jsxs("button",{className:s.settingsBtn,onClick:()=>p("/app/settings/apex-pay"),children:[e.jsx(D,{size:18}),"Configure"]})})]}),b?null:e.jsxs("div",{className:s.setupBanner,children:[e.jsxs("div",{className:s.setupContent,children:[e.jsx("div",{className:s.setupIcon,children:e.jsx(G,{size:24})}),e.jsxs("div",{className:s.setupText,children:[e.jsx("h3",{children:"Set Up Apex Pay"}),e.jsx("p",{children:"Connect your payment processor to start accepting online payments from clients."})]})]}),e.jsxs("button",{className:s.setupBtn,onClick:()=>p("/app/settings/apex-pay"),children:["Get Started",e.jsx(H,{size:16})]})]}),e.jsxs("div",{className:s.statsGrid,children:[e.jsxs("div",{className:s.statCard,children:[e.jsx("div",{className:s.statIcon,children:e.jsx(E,{size:20})}),e.jsxs("div",{className:s.statContent,children:[e.jsx("span",{className:s.statLabel,children:"Total Received"}),e.jsx("span",{className:s.statValue,children:n((a==null?void 0:a.totalReceived)||0)}),a!=null&&a.transactionCount?e.jsxs("span",{className:s.statNote,children:[a.transactionCount," transactions"]}):null]})]}),e.jsxs("div",{className:s.statCard,children:[e.jsx("div",{className:s.statIcon,children:e.jsx(f,{size:20})}),e.jsxs("div",{className:s.statContent,children:[e.jsx("span",{className:s.statLabel,children:"Pending"}),e.jsx("span",{className:s.statValue,children:n((a==null?void 0:a.pendingAmount)||0)}),e.jsx("span",{className:s.statNote,children:"Processing"})]})]}),e.jsxs("div",{className:s.statCard,children:[e.jsx("div",{className:s.statIcon,children:e.jsx(M,{size:20})}),e.jsxs("div",{className:s.statContent,children:[e.jsx("span",{className:s.statLabel,children:"Success Rate"}),e.jsxs("span",{className:s.statValue,children:[((a==null?void 0:a.successRate)||0).toFixed(1),"%"]}),e.jsx("span",{className:s.statNote,children:"All time"})]})]}),e.jsxs("div",{className:s.statCard,children:[e.jsx("div",{className:s.statIcon,style:{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444"},children:e.jsx(V,{size:20})}),e.jsxs("div",{className:s.statContent,children:[e.jsx("span",{className:s.statLabel,children:"Processing Fees"}),e.jsx("span",{className:s.statValue,children:n((a==null?void 0:a.totalFees)||0)}),e.jsx("span",{className:s.statNote,children:"2.9% + $0.30 avg"})]})]})]}),e.jsxs("div",{className:s.accountsSection,children:[e.jsx("h2",{children:"Account Summary"}),e.jsxs("div",{className:s.accountsGrid,children:[e.jsxs("div",{className:s.accountCard,children:[e.jsxs("div",{className:s.accountHeader,children:[e.jsx(U,{size:18}),e.jsx("span",{children:((g=l==null?void 0:l.settings)==null?void 0:g.operatingAccountLabel)||"Operating Account"})]}),e.jsx("div",{className:s.accountBalance,children:n((a==null?void 0:a.operatingBalance)||0)}),e.jsx("div",{className:s.accountMeta,children:"Net received"})]}),e.jsxs("div",{className:s.accountCard,children:[e.jsxs("div",{className:s.accountHeader,children:[e.jsx(u,{size:18}),e.jsx("span",{children:((j=l==null?void 0:l.settings)==null?void 0:j.trustAccountLabel)||"Trust Account (IOLTA)"})]}),e.jsx("div",{className:s.accountBalance,children:n((a==null?void 0:a.trustBalance)||0)}),e.jsx("div",{className:s.accountMeta,children:"Net received"})]})]})]}),e.jsxs("div",{className:s.transactionsSection,children:[e.jsxs("div",{className:s.transactionsHeader,children:[e.jsx("h2",{children:"Recent Transactions"}),e.jsxs("div",{className:s.transactionsActions,children:[e.jsxs("div",{className:s.searchBox,children:[e.jsx($,{size:16}),e.jsx("input",{type:"text",placeholder:"Search transactions...",value:r,onChange:t=>S(t.target.value)})]}),e.jsxs("select",{className:s.filterSelect,value:m,onChange:t=>B(t.target.value),children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"})]}),e.jsxs("button",{className:s.exportBtn,children:[e.jsx(O,{size:16}),"Export"]})]})]}),e.jsxs("div",{className:s.transactionsTable,children:[e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Client / Matter"}),e.jsx("th",{children:"Amount"}),e.jsx("th",{children:"Fee"}),e.jsx("th",{children:"Net"}),e.jsx("th",{children:"Type"}),e.jsx("th",{children:"Account"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Date"})]})}),e.jsx("tbody",{children:x.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:s.clientCell,children:[e.jsx("span",{className:s.clientName,children:t.clientName}),e.jsx("span",{className:s.matterName,children:t.matterName}),t.invoiceNumber&&e.jsx("span",{className:s.invoiceNum,children:t.invoiceNumber})]})}),e.jsx("td",{className:s.amountCell,children:n(t.amount)}),e.jsxs("td",{className:s.feeCell,children:["-",n(t.fee)]}),e.jsx("td",{className:s.netCell,children:n(t.netAmount)}),e.jsx("td",{children:e.jsx("span",{className:s.typeBadge,children:P(t.paymentMethod)})}),e.jsx("td",{children:e.jsx("span",{className:`${s.accountBadge} ${t.accountType==="trust"?s.trustAccount:""}`,children:t.accountType==="trust"?"Trust":"Operating"})}),e.jsx("td",{children:L(t.status)}),e.jsx("td",{className:s.dateCell,children:z(t.createdAt)})]},t.id))})]}),x.length===0&&e.jsxs("div",{className:s.emptyState,children:[e.jsx(N,{size:48}),e.jsx("h3",{children:"No transactions found"}),e.jsx("p",{children:"Transactions will appear here once clients make payments."})]})]})]}),e.jsxs("div",{className:s.complianceFooter,children:[e.jsxs("div",{className:s.complianceBadges,children:[e.jsxs("span",{children:[e.jsx(u,{size:14})," PCI DSS Compliant"]}),e.jsxs("span",{children:[e.jsx(u,{size:14})," 256-bit Encryption"]}),e.jsxs("span",{children:[e.jsx(u,{size:14})," SOC 2 Type II"]})]}),e.jsxs("p",{children:["Payment processing services are provided by Stripe, Inc. and are subject to the",e.jsxs("a",{href:"https://stripe.com/legal/connect-account",target:"_blank",rel:"noopener noreferrer",children:["Stripe Connected Account Agreement ",e.jsx(Q,{size:12})]})]})]})]})}export{es as ApexPayPage};
