(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function s(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(e){if(e.ep)return;e.ep=!0;const i=s(e);fetch(e.href,i)}})();const n={WORLD_WIDTH:6e3,WORLD_HEIGHT:6e3,GRID_SIZE:50,STARTING_MASS:30,MAX_CELLS:16,SPLIT_MIN_MASS:40,EJECT_MASS:15,EJECT_SPEED:25,DECAY_RATE:2e-4,MERGE_TIME:15e3,FOOD_COUNT:1500,FOOD_MASS:1,FOOD_SIZE:10,VIRUS_COUNT:30,VIRUS_MASS:100,VIRUS_SIZE:60,AI_COUNT:25,AI_MIN_MASS:20,AI_MAX_MASS:500,AI_NAMES:["Destroyer","Phantom","NightOwl","BlueWolf","RedFury","Ninja","Titan","Storm","Shadow","Blaze","Viper","Dragon","Phoenix","Hunter","Ghost","Thunder","Frost","Spark","Mystic","Rogue","Cyber","Nova","Quantum","Pixel","Binary"],BASE_SPEED:2.5,FRICTION:.9,FOOD_COLORS:["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9","#F8B500","#FF6F61","#88D8B0","#FFCC5C","#96E6A1"],SKIN_GRADIENTS:{gradient1:["#FF6B6B","#FFE66D"],gradient2:["#4ECDC4","#556270"],gradient3:["#A770EF","#CF8BF3"],gradient4:["#11998E","#38EF7D"],gradient5:["#FC466B","#3F5EFB"],gradient6:["#F7971E","#FFD200"]}};class M{constructor(){this.player=null,this.food=[],this.viruses=[],this.aiPlayers=[],this.ejectedMass=[],this.camera={x:0,y:0,zoom:1},this.isRunning=!1,this.stats={score:0,maxMass:0,cellsEaten:0,timeAlive:0,startTime:0}}reset(){this.player=null,this.food=[],this.viruses=[],this.aiPlayers=[],this.ejectedMass=[],this.camera={x:0,y:0,zoom:1},this.stats={score:0,maxMass:0,cellsEaten:0,timeAlive:0,startTime:Date.now()}}}class f{constructor(t,s,a,e,i=""){this.x=t,this.y=s,this.mass=a,this.color=e,this.name=i,this.vx=0,this.vy=0,this.mergeTime=0}get radius(){return Math.sqrt(this.mass)*4}get speed(){return n.BASE_SPEED*Math.pow(this.mass,-.075)}update(){this.x+=this.vx,this.y+=this.vy,this.vx*=n.FRICTION,this.vy*=n.FRICTION,this.x=Math.max(this.radius,Math.min(n.WORLD_WIDTH-this.radius,this.x)),this.y=Math.max(this.radius,Math.min(n.WORLD_HEIGHT-this.radius,this.y)),this.mass>n.STARTING_MASS&&(this.mass-=this.mass*n.DECAY_RATE)}draw(t,s){const a=(this.x-s.x)*s.zoom+t.canvas.width/2,e=(this.y-s.y)*s.zoom+t.canvas.height/2,i=this.radius*s.zoom;if(a+i<0||a-i>t.canvas.width||e+i<0||e-i>t.canvas.height)return;if(t.save(),Array.isArray(this.color)){const l=t.createRadialGradient(a-i*.3,e-i*.3,0,a,e,i);l.addColorStop(0,this.color[0]),l.addColorStop(1,this.color[1]),t.fillStyle=l}else t.fillStyle=this.color;t.shadowColor="rgba(0, 0, 0, 0.3)",t.shadowBlur=10*s.zoom,t.shadowOffsetX=5*s.zoom,t.shadowOffsetY=5*s.zoom,t.beginPath(),t.arc(a,e,i,0,Math.PI*2),t.fill(),t.shadowColor="transparent";const o=t.createRadialGradient(a-i*.4,e-i*.4,0,a,e,i);if(o.addColorStop(0,"rgba(255, 255, 255, 0.3)"),o.addColorStop(.5,"rgba(255, 255, 255, 0.05)"),o.addColorStop(1,"transparent"),t.fillStyle=o,t.beginPath(),t.arc(a,e,i,0,Math.PI*2),t.fill(),t.strokeStyle="rgba(0, 0, 0, 0.2)",t.lineWidth=3*s.zoom,t.stroke(),this.name&&i>20){const l=Math.max(12,i*.4);t.font=`bold ${l}px Fredoka`,t.fillStyle="#fff",t.textAlign="center",t.textBaseline="middle",t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowBlur=3,t.fillText(this.name,a,e),i>40&&(t.font=`${l*.5}px Fredoka`,t.fillStyle="rgba(255, 255, 255, 0.8)",t.fillText(Math.floor(this.mass),a,e+l*.7))}t.restore()}}class v{constructor(t,s){this.name=t,this.skin=s,this.cells=[],this.targetX=n.WORLD_WIDTH/2,this.targetY=n.WORLD_HEIGHT/2;const a=n.SKIN_GRADIENTS[s]||n.SKIN_GRADIENTS.gradient1;this.cells.push(new f(n.WORLD_WIDTH/2,n.WORLD_HEIGHT/2,n.STARTING_MASS,a,t))}get totalMass(){return this.cells.reduce((t,s)=>t+s.mass,0)}get centerX(){return this.cells.length===0?n.WORLD_WIDTH/2:this.cells.reduce((t,s)=>t+s.x*s.mass,0)/this.totalMass}get centerY(){return this.cells.length===0?n.WORLD_HEIGHT/2:this.cells.reduce((t,s)=>t+s.y*s.mass,0)/this.totalMass}get isAlive(){return this.cells.length>0}update(){const t=Date.now();for(const s of this.cells){const a=this.targetX-s.x,e=this.targetY-s.y,i=Math.sqrt(a*a+e*e);i>5&&(s.vx+=a/i*s.speed,s.vy+=e/i*s.speed),s.update()}this.mergeCells(t),this.separateCells()}mergeCells(t){for(let s=0;s<this.cells.length;s++)for(let a=s+1;a<this.cells.length;a++){const e=this.cells[s],i=this.cells[a];if(t-e.mergeTime<n.MERGE_TIME||t-i.mergeTime<n.MERGE_TIME)continue;const o=i.x-e.x,l=i.y-e.y;Math.sqrt(o*o+l*l)<Math.max(e.radius,i.radius)*.3&&(e.mass+=i.mass,e.x=(e.x*e.mass+i.x*i.mass)/(e.mass+i.mass),e.y=(e.y*e.mass+i.y*i.mass)/(e.mass+i.mass),this.cells.splice(a,1),a--)}}separateCells(){for(let t=0;t<this.cells.length;t++)for(let s=t+1;s<this.cells.length;s++){const a=this.cells[t],e=this.cells[s],i=e.x-a.x,o=e.y-a.y,l=Math.sqrt(i*i+o*o),r=a.radius+e.radius;if(l<r&&l>0){const h=(r-l)/2,d=i/l*h*.5,c=o/l*h*.5;a.x-=d,a.y-=c,e.x+=d,e.y+=c}}}split(){const t=[...this.cells];for(const s of t){if(this.cells.length>=n.MAX_CELLS)break;if(s.mass<n.SPLIT_MIN_MASS)continue;const a=s.mass/2;s.mass=a;const e=this.targetX-s.x,i=this.targetY-s.y,o=Math.sqrt(e*e+i*i)||1,l=new f(s.x+e/o*s.radius*2,s.y+i/o*s.radius*2,a,s.color,s.name);l.vx=e/o*15,l.vy=i/o*15,l.mergeTime=Date.now(),s.mergeTime=Date.now(),this.cells.push(l)}}ejectMass(){const t=[];for(const s of this.cells){if(s.mass<n.SPLIT_MIN_MASS)continue;s.mass-=n.EJECT_MASS;const a=this.targetX-s.x,e=this.targetY-s.y,i=Math.sqrt(a*a+e*e)||1;t.push({x:s.x+a/i*s.radius,y:s.y+e/i*s.radius,vx:a/i*n.EJECT_SPEED,vy:e/i*n.EJECT_SPEED,mass:n.EJECT_MASS,color:s.color[0]||s.color,radius:10})}return t}draw(t,s){const a=[...this.cells].sort((e,i)=>i.mass-e.mass);for(const e of a)e.draw(t,s)}}class u{constructor(t,s,a){const e=Math.random()*(n.WORLD_WIDTH-200)+100,i=Math.random()*(n.WORLD_HEIGHT-200)+100;this.cell=new f(e,i,s,a,t),this.targetX=e,this.targetY=i,this.changeTargetTime=0,this.state="wander"}get isAlive(){return this.cell.mass>0}update(t){if(!this.isAlive)return;const s=Date.now();this.makeDecision(t);const a=this.targetX-this.cell.x,e=this.targetY-this.cell.y,i=Math.sqrt(a*a+e*e);i>10?(this.cell.vx+=a/i*this.cell.speed*.8,this.cell.vy+=e/i*this.cell.speed*.8):s>this.changeTargetTime&&this.pickNewTarget(),this.cell.update()}makeDecision(t){if(!t.player||!t.player.isAlive){this.state="wander";return}const s=t.player.cells;let a=null,e=1/0;for(const i of s){const o=i.x-this.cell.x,l=i.y-this.cell.y,r=Math.sqrt(o*o+l*l);r<e&&(e=r,a=i)}if(a&&e<500)if(this.cell.mass>a.mass*1.2)this.state="chase",this.targetX=a.x,this.targetY=a.y;else if(a.mass>this.cell.mass*1.2){this.state="flee";const i=this.cell.x-a.x,o=this.cell.y-a.y,l=Math.sqrt(i*i+o*o)||1;this.targetX=this.cell.x+i/l*300,this.targetY=this.cell.y+o/l*300}else this.state="wander";else if(this.state="wander",Date.now()>this.changeTargetTime){let i=null,o=300;for(const l of t.food){const r=l.x-this.cell.x,h=l.y-this.cell.y,d=Math.sqrt(r*r+h*h);d<o&&(o=d,i=l)}i?(this.targetX=i.x,this.targetY=i.y):this.pickNewTarget()}}pickNewTarget(){this.targetX=Math.random()*n.WORLD_WIDTH,this.targetY=Math.random()*n.WORLD_HEIGHT,this.changeTargetTime=Date.now()+3e3+Math.random()*5e3}draw(t,s){this.isAlive&&this.cell.draw(t,s)}}class I{constructor(){this.canvas=document.getElementById("game-canvas"),this.ctx=this.canvas.getContext("2d"),this.minimapCanvas=document.getElementById("minimap-canvas"),this.minimapCtx=this.minimapCanvas.getContext("2d"),this.state=new M,this.mouseX=0,this.mouseY=0,this.selectedSkin="gradient1",this.setupCanvas(),this.setupEventListeners()}setupCanvas(){const t=()=>{this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.minimapCanvas.width=150,this.minimapCanvas.height=150};t(),window.addEventListener("resize",t)}setupEventListeners(){this.canvas.addEventListener("mousemove",t=>{this.mouseX=t.clientX,this.mouseY=t.clientY,this.updatePlayerTarget()}),this.canvas.addEventListener("touchmove",t=>{t.preventDefault();const s=t.touches[0];this.mouseX=s.clientX,this.mouseY=s.clientY,this.updatePlayerTarget()}),document.addEventListener("keydown",t=>{if(this.state.isRunning&&(t.code==="Space"&&(t.preventDefault(),this.state.player&&this.state.player.split()),t.code==="KeyW"&&this.state.player)){const s=this.state.player.ejectMass();this.state.ejectedMass.push(...s)}}),document.querySelectorAll(".skin").forEach(t=>{t.addEventListener("click",()=>{document.querySelectorAll(".skin").forEach(s=>s.classList.remove("selected")),t.classList.add("selected"),this.selectedSkin=t.dataset.skin})}),document.getElementById("play-btn").addEventListener("click",()=>{this.startGame()}),document.getElementById("player-name").addEventListener("keypress",t=>{t.key==="Enter"&&this.startGame()}),document.getElementById("respawn-btn").addEventListener("click",()=>{this.startGame()}),document.getElementById("menu-btn").addEventListener("click",()=>{this.showScreen("start-screen")})}updatePlayerTarget(){if(!this.state.player||!this.state.isRunning)return;const t=this.state.camera;this.state.player.targetX=(this.mouseX-this.canvas.width/2)/t.zoom+t.x,this.state.player.targetY=(this.mouseY-this.canvas.height/2)/t.zoom+t.y}showScreen(t){document.querySelectorAll(".screen").forEach(s=>s.classList.add("hidden")),document.getElementById(t).classList.remove("hidden")}startGame(){const s=document.getElementById("player-name").value.trim()||"Player";this.state.reset(),this.state.player=new v(s,this.selectedSkin),this.generateFood(),this.generateViruses(),this.generateAI(),this.state.isRunning=!0,this.showScreen("game-screen"),this.gameLoop()}generateFood(){this.state.food=[];for(let t=0;t<n.FOOD_COUNT;t++)this.state.food.push({x:Math.random()*n.WORLD_WIDTH,y:Math.random()*n.WORLD_HEIGHT,mass:n.FOOD_MASS,color:n.FOOD_COLORS[Math.floor(Math.random()*n.FOOD_COLORS.length)],radius:n.FOOD_SIZE/2})}generateViruses(){this.state.viruses=[];for(let t=0;t<n.VIRUS_COUNT;t++)this.state.viruses.push({x:Math.random()*n.WORLD_WIDTH,y:Math.random()*n.WORLD_HEIGHT,mass:n.VIRUS_MASS,radius:n.VIRUS_SIZE})}generateAI(){this.state.aiPlayers=[];for(let t=0;t<n.AI_COUNT;t++){const s=n.AI_NAMES[t%n.AI_NAMES.length],a=n.AI_MIN_MASS+Math.random()*(n.AI_MAX_MASS-n.AI_MIN_MASS),e=Object.keys(n.SKIN_GRADIENTS),i=n.SKIN_GRADIENTS[e[Math.floor(Math.random()*e.length)]];this.state.aiPlayers.push(new u(s,a,i))}}gameLoop(){this.state.isRunning&&(this.update(),this.render(),requestAnimationFrame(()=>this.gameLoop()))}update(){this.state.player&&this.state.player.isAlive&&(this.state.player.update(),this.updateCamera(),this.state.stats.score=Math.floor(this.state.player.totalMass),this.state.stats.maxMass=Math.max(this.state.stats.maxMass,this.state.stats.score),this.state.stats.timeAlive=Date.now()-this.state.stats.startTime,this.checkFoodCollisions(),this.checkVirusCollisions(),this.checkAIPlayerCollisions()),this.updateEjectedMass();for(const t of this.state.aiPlayers)t.update(this.state);this.checkAIvsAICollisions(),this.checkAIFoodCollisions(),this.respawnFood(),this.respawnAI(),this.updateUI()}updateCamera(){const t=this.state.player;if(!t)return;const s=t.centerX,a=t.centerY;this.state.camera.x+=(s-this.state.camera.x)*.1,this.state.camera.y+=(a-this.state.camera.y)*.1;const e=Math.max(.15,Math.min(1,50/Math.sqrt(t.totalMass)));this.state.camera.zoom+=(e-this.state.camera.zoom)*.05}checkFoodCollisions(){const t=this.state.player;for(const s of t.cells)for(let a=this.state.food.length-1;a>=0;a--){const e=this.state.food[a],i=e.x-s.x,o=e.y-s.y;Math.sqrt(i*i+o*o)<s.radius&&(s.mass+=e.mass,this.state.food.splice(a,1),this.state.stats.cellsEaten++)}for(let s=this.state.ejectedMass.length-1;s>=0;s--){const a=this.state.ejectedMass[s];for(const e of t.cells){const i=a.x-e.x,o=a.y-e.y;if(Math.sqrt(i*i+o*o)<e.radius&&e.mass>a.mass*1.2){e.mass+=a.mass,this.state.ejectedMass.splice(s,1);break}}}}checkVirusCollisions(){const t=this.state.player;for(const s of t.cells)for(const a of this.state.viruses){const e=a.x-s.x,i=a.y-s.y;if(Math.sqrt(e*e+i*i)<s.radius&&s.mass>a.mass){this.popCell(s,t);break}}}popCell(t,s){const a=Math.min(n.MAX_CELLS-s.cells.length+1,8);if(a<=1)return;const e=t.mass/a;t.mass=e;for(let i=1;i<a;i++){const o=Math.PI*2*i/a,l=new f(t.x,t.y,e,t.color,t.name);l.vx=Math.cos(o)*15,l.vy=Math.sin(o)*15,l.mergeTime=Date.now(),s.cells.push(l)}t.mergeTime=Date.now()}checkAIPlayerCollisions(){const t=this.state.player;if(!(!t||!t.isAlive)){for(const s of this.state.aiPlayers)if(s.isAlive)for(let a=t.cells.length-1;a>=0;a--){const e=t.cells[a],i=s.cell.x-e.x,o=s.cell.y-e.y,l=Math.sqrt(i*i+o*o);if(l<e.radius*.5&&e.mass>s.cell.mass*1.2){e.mass+=s.cell.mass,s.cell.mass=0,this.state.stats.cellsEaten++;break}if(l<s.cell.radius*.5&&s.cell.mass>e.mass*1.2){s.cell.mass+=e.mass,t.cells.splice(a,1),t.isAlive||this.gameOver(s.cell.name);break}}}}checkAIvsAICollisions(){for(let t=0;t<this.state.aiPlayers.length;t++){const s=this.state.aiPlayers[t];if(s.isAlive)for(let a=t+1;a<this.state.aiPlayers.length;a++){const e=this.state.aiPlayers[a];if(!e.isAlive)continue;const i=e.cell.x-s.cell.x,o=e.cell.y-s.cell.y,l=Math.sqrt(i*i+o*o),r=s.cell.mass>e.cell.mass?s:e,h=s.cell.mass>e.cell.mass?e:s;l<r.cell.radius*.5&&r.cell.mass>h.cell.mass*1.2&&(r.cell.mass+=h.cell.mass,h.cell.mass=0)}}}checkAIFoodCollisions(){for(const t of this.state.aiPlayers)if(t.isAlive)for(let s=this.state.food.length-1;s>=0;s--){const a=this.state.food[s],e=a.x-t.cell.x,i=a.y-t.cell.y;Math.sqrt(e*e+i*i)<t.cell.radius&&(t.cell.mass+=a.mass,this.state.food.splice(s,1))}}updateEjectedMass(){for(let t=this.state.ejectedMass.length-1;t>=0;t--){const s=this.state.ejectedMass[t];s.x+=s.vx,s.y+=s.vy,s.vx*=.9,s.vy*=.9,s.x=Math.max(0,Math.min(n.WORLD_WIDTH,s.x)),s.y=Math.max(0,Math.min(n.WORLD_HEIGHT,s.y))}}respawnFood(){for(;this.state.food.length<n.FOOD_COUNT;)this.state.food.push({x:Math.random()*n.WORLD_WIDTH,y:Math.random()*n.WORLD_HEIGHT,mass:n.FOOD_MASS,color:n.FOOD_COLORS[Math.floor(Math.random()*n.FOOD_COLORS.length)],radius:n.FOOD_SIZE/2})}respawnAI(){const t=this.state.aiPlayers.filter(s=>s.isAlive);for(;t.length<n.AI_COUNT;){const s=n.AI_NAMES[Math.floor(Math.random()*n.AI_NAMES.length)],a=n.AI_MIN_MASS+Math.random()*100,e=Object.keys(n.SKIN_GRADIENTS),i=n.SKIN_GRADIENTS[e[Math.floor(Math.random()*e.length)]],o=new u(s,a,i),l=this.state.aiPlayers.findIndex(r=>!r.isAlive);l!==-1?this.state.aiPlayers[l]=o:this.state.aiPlayers.push(o),t.push(o)}}updateUI(){document.getElementById("score").textContent=this.state.stats.score,this.updateLeaderboard()}updateLeaderboard(){const t=[];this.state.player&&this.state.player.isAlive&&t.push({name:this.state.player.name,mass:this.state.player.totalMass,isPlayer:!0});for(const e of this.state.aiPlayers)e.isAlive&&t.push({name:e.cell.name,mass:e.cell.mass,isPlayer:!1});t.sort((e,i)=>i.mass-e.mass);const s=t.slice(0,10),a=document.getElementById("leaderboard-list");a.innerHTML=s.map(e=>`
      <li class="${e.isPlayer?"player-entry":""}">
        <span class="player-name">${e.name}</span>
        <span class="player-score">${Math.floor(e.mass)}</span>
      </li>
    `).join("")}gameOver(t){this.state.isRunning=!1,document.getElementById("killer-name").textContent=t,document.getElementById("final-score").textContent=this.state.stats.score,document.getElementById("max-mass").textContent=this.state.stats.maxMass,document.getElementById("cells-eaten").textContent=this.state.stats.cellsEaten;const s=Math.floor(this.state.stats.timeAlive/1e3),a=Math.floor(s/60),e=s%60;document.getElementById("time-alive").textContent=`${a}:${e.toString().padStart(2,"0")}`,this.showScreen("death-screen")}render(){const t=this.ctx,s=this.state.camera;t.fillStyle="#111119",t.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawGrid(),this.drawWorldBounds(),this.drawFood(),this.drawEjectedMass(),this.drawViruses();for(const a of this.state.aiPlayers)a.draw(t,s);this.state.player&&this.state.player.isAlive&&this.state.player.draw(t,s),this.drawCursor(),this.drawMinimap()}drawGrid(){const t=this.ctx,s=this.state.camera;t.strokeStyle="rgba(255, 255, 255, 0.03)",t.lineWidth=1;const a=n.GRID_SIZE*s.zoom,e=(-s.x*s.zoom+this.canvas.width/2)%a,i=(-s.y*s.zoom+this.canvas.height/2)%a;for(let o=e;o<this.canvas.width;o+=a)t.beginPath(),t.moveTo(o,0),t.lineTo(o,this.canvas.height),t.stroke();for(let o=i;o<this.canvas.height;o+=a)t.beginPath(),t.moveTo(0,o),t.lineTo(this.canvas.width,o),t.stroke()}drawWorldBounds(){const t=this.ctx,s=this.state.camera,a=(0-s.x)*s.zoom+this.canvas.width/2,e=(0-s.y)*s.zoom+this.canvas.height/2,i=(n.WORLD_WIDTH-s.x)*s.zoom+this.canvas.width/2,o=(n.WORLD_HEIGHT-s.y)*s.zoom+this.canvas.height/2;t.fillStyle="rgba(0, 0, 0, 0.5)",a>0&&t.fillRect(0,0,a,this.canvas.height),i<this.canvas.width&&t.fillRect(i,0,this.canvas.width-i,this.canvas.height),e>0&&t.fillRect(a,0,i-a,e),o<this.canvas.height&&t.fillRect(a,o,i-a,this.canvas.height-o),t.strokeStyle="#FF6B6B",t.lineWidth=5*s.zoom,t.strokeRect(a,e,i-a,o-e)}drawFood(){const t=this.ctx,s=this.state.camera;for(const a of this.state.food){const e=(a.x-s.x)*s.zoom+this.canvas.width/2,i=(a.y-s.y)*s.zoom+this.canvas.height/2,o=a.radius*s.zoom;e<-o||e>this.canvas.width+o||i<-o||i>this.canvas.height+o||(t.fillStyle=a.color,t.beginPath(),t.arc(e,i,Math.max(2,o),0,Math.PI*2),t.fill())}}drawEjectedMass(){const t=this.ctx,s=this.state.camera;for(const a of this.state.ejectedMass){const e=(a.x-s.x)*s.zoom+this.canvas.width/2,i=(a.y-s.y)*s.zoom+this.canvas.height/2,o=a.radius*s.zoom;t.fillStyle=a.color,t.beginPath(),t.arc(e,i,o,0,Math.PI*2),t.fill()}}drawViruses(){const t=this.ctx,s=this.state.camera;for(const a of this.state.viruses){const e=(a.x-s.x)*s.zoom+this.canvas.width/2,i=(a.y-s.y)*s.zoom+this.canvas.height/2,o=a.radius*s.zoom;if(e<-o||e>this.canvas.width+o||i<-o||i>this.canvas.height+o)continue;t.save(),t.fillStyle="rgba(51, 204, 51, 0.7)",t.strokeStyle="#33cc33",t.lineWidth=3*s.zoom,t.beginPath();const l=16;for(let r=0;r<l*2;r++){const h=Math.PI*2*r/(l*2),d=r%2===0?o:o*.8,c=e+Math.cos(h)*d,m=i+Math.sin(h)*d;r===0?t.moveTo(c,m):t.lineTo(c,m)}t.closePath(),t.fill(),t.stroke(),t.restore()}}drawCursor(){const t=this.ctx;t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth=2;const s=15;t.beginPath(),t.moveTo(this.mouseX-s,this.mouseY),t.lineTo(this.mouseX+s,this.mouseY),t.moveTo(this.mouseX,this.mouseY-s),t.lineTo(this.mouseX,this.mouseY+s),t.stroke(),t.beginPath(),t.arc(this.mouseX,this.mouseY,s,0,Math.PI*2),t.stroke()}drawMinimap(){const t=this.minimapCtx,s=this.minimapCanvas.width,a=this.minimapCanvas.height;t.fillStyle="rgba(17, 17, 25, 0.9)",t.fillRect(0,0,s,a);const e=s/n.WORLD_WIDTH,i=a/n.WORLD_HEIGHT;t.fillStyle="rgba(255, 255, 255, 0.3)";for(const c of this.state.aiPlayers){if(!c.isAlive)continue;const m=c.cell.x*e,g=c.cell.y*i,p=Math.max(2,Math.sqrt(c.cell.mass)*.3);t.beginPath(),t.arc(m,g,p,0,Math.PI*2),t.fill()}if(this.state.player&&this.state.player.isAlive){t.fillStyle="#FF6B6B";const c=this.state.player.centerX*e,m=this.state.player.centerY*i;t.beginPath(),t.arc(c,m,4,0,Math.PI*2),t.fill()}const o=this.state.camera,l=this.canvas.width/o.zoom*e,r=this.canvas.height/o.zoom*i,h=(o.x-this.canvas.width/(2*o.zoom))*e,d=(o.y-this.canvas.height/(2*o.zoom))*i;t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth=1,t.strokeRect(h,d,l,r)}}document.addEventListener("DOMContentLoaded",()=>{new I});
