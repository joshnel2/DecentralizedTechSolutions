import{r as p,a6 as e,h}from"./vendor-DrKzkH4x.js";import{u as ce,d as oe}from"./index-CCWWoMiH.js";import{c as le,p as de}from"./state-72d44OIA.js";import{a as ue}from"./router-CNLU_KyZ.js";import{al as me,a4 as w,L as ge,ap as pe,x,F as f,y,a3 as ve,a0 as _e,D as $,ak as he,$ as H,ao as ye,R as xe,Y as je,f as fe,X as U,t as G,as as K,az as b,v as C,ay as we,a as Ne,s as q,S as ke,O as be,z as Ce}from"./icons-BtUkkwGS.js";import"./doc-parsers-U1nJMjtM.js";import"./react-dom-DfB-QKj2.js";import"./pdf-worker-CVmCB3lP.js";const A={owner:["firm:manage","firm:billing","firm:delete","users:invite","users:manage","users:delete","users:view_rates","users:edit_rates","groups:manage","groups:assign","matters:create","matters:view","matters:view_restricted","matters:edit","matters:delete","matters:assign","matters:manage_permissions","matters:close","matters:transfer","clients:create","clients:view","clients:view_restricted","clients:edit","clients:delete","clients:merge","clients:view_confidential","billing:create","billing:view","billing:view_all","billing:edit","billing:edit_others","billing:delete","billing:approve","billing:create_invoices","billing:void_invoices","billing:apply_discounts","billing:view_trust","billing:manage_trust","documents:upload","documents:view","documents:view_confidential","documents:edit","documents:delete","documents:share_external","documents:manage_folders","documents:manage_permissions","calendar:create","calendar:view","calendar:view_all","calendar:edit","calendar:delete","calendar:manage_deadlines","reports:view","reports:view_financial","reports:view_productivity","reports:create","reports:export","reports:schedule","integrations:view","integrations:manage","integrations:sync","ai:use_assistant","ai:use_drafting","ai:use_analysis","ai:view_suggestions","ai:train_model","audit:view","audit:export","security:manage_sessions","security:manage_2fa","security:manage_api_keys"],admin:["users:invite","users:manage","users:view_rates","users:edit_rates","groups:manage","groups:assign","matters:create","matters:view","matters:view_restricted","matters:edit","matters:delete","matters:assign","matters:manage_permissions","matters:close","clients:create","clients:view","clients:view_restricted","clients:edit","clients:delete","billing:create","billing:view","billing:view_all","billing:edit","billing:edit_others","billing:approve","billing:create_invoices","billing:apply_discounts","billing:view_trust","documents:upload","documents:view","documents:view_confidential","documents:edit","documents:delete","documents:manage_folders","documents:manage_permissions","calendar:create","calendar:view","calendar:view_all","calendar:edit","calendar:delete","calendar:manage_deadlines","reports:view","reports:view_financial","reports:view_productivity","reports:create","reports:export","integrations:view","integrations:manage","integrations:sync","ai:use_assistant","ai:use_drafting","ai:use_analysis","ai:view_suggestions","audit:view","security:manage_sessions"],attorney:["matters:create","matters:view","matters:edit","matters:assign","matters:close","clients:create","clients:view","clients:edit","billing:create","billing:view","billing:edit","billing:create_invoices","documents:upload","documents:view","documents:edit","documents:manage_folders","calendar:create","calendar:view","calendar:edit","calendar:delete","calendar:manage_deadlines","reports:view","reports:view_productivity","ai:use_assistant","ai:use_drafting","ai:use_analysis","ai:view_suggestions"],paralegal:["matters:view","matters:edit","clients:view","billing:create","billing:view","billing:edit","documents:upload","documents:view","documents:edit","calendar:create","calendar:view","calendar:edit","ai:use_assistant","ai:view_suggestions"],staff:["matters:view","clients:view","billing:view","documents:view","calendar:create","calendar:view","calendar:edit","ai:use_assistant"],billing:["matters:view","clients:view","billing:create","billing:view","billing:view_all","billing:edit","billing:approve","billing:create_invoices","billing:apply_discounts","billing:view_trust","billing:manage_trust","reports:view","reports:view_financial","reports:create","reports:export","ai:use_assistant"],readonly:["matters:view","clients:view","billing:view","documents:view","calendar:view","reports:view"]},B=[{id:"matters",name:"Matters",description:"Case and matter management",permissions:[{key:"matters:create",name:"Create Matters",description:"Create new matters"},{key:"matters:view",name:"View Matters",description:"View matter details"},{key:"matters:view_restricted",name:"View Restricted",description:"View restricted matters"},{key:"matters:edit",name:"Edit Matters",description:"Modify matter information"},{key:"matters:delete",name:"Delete Matters",description:"Delete/archive matters",sensitive:!0},{key:"matters:assign",name:"Assign Team",description:"Assign team members"},{key:"matters:manage_permissions",name:"Manage Permissions",description:"Control matter access"},{key:"matters:close",name:"Close Matters",description:"Close/reopen matters"},{key:"matters:transfer",name:"Transfer Matters",description:"Transfer between clients",sensitive:!0}]},{id:"clients",name:"Clients",description:"Client relationship management",permissions:[{key:"clients:create",name:"Create Clients",description:"Create new clients"},{key:"clients:view",name:"View Clients",description:"View client information"},{key:"clients:view_restricted",name:"View Restricted",description:"View restricted clients"},{key:"clients:edit",name:"Edit Clients",description:"Modify client information"},{key:"clients:delete",name:"Delete Clients",description:"Delete client records",sensitive:!0},{key:"clients:merge",name:"Merge Clients",description:"Merge duplicates",sensitive:!0},{key:"clients:view_confidential",name:"View Confidential",description:"SSN, financial info",sensitive:!0}]},{id:"billing",name:"Billing",description:"Time tracking and invoicing",permissions:[{key:"billing:create",name:"Create Entries",description:"Record time/expenses"},{key:"billing:view",name:"View Billing",description:"View own billing"},{key:"billing:view_all",name:"View All",description:"View all users billing"},{key:"billing:edit",name:"Edit Billing",description:"Modify own entries"},{key:"billing:edit_others",name:"Edit Others",description:"Modify others entries",sensitive:!0},{key:"billing:delete",name:"Delete Billing",description:"Delete entries",sensitive:!0},{key:"billing:approve",name:"Approve Time",description:"Approve for billing"},{key:"billing:create_invoices",name:"Create Invoices",description:"Generate invoices"},{key:"billing:void_invoices",name:"Void Invoices",description:"Void sent invoices",sensitive:!0},{key:"billing:apply_discounts",name:"Apply Discounts",description:"Add discounts"},{key:"billing:view_trust",name:"View Trust",description:"View trust accounts"},{key:"billing:manage_trust",name:"Manage Trust",description:"Manage trust",sensitive:!0}]},{id:"documents",name:"Documents",description:"Document management",permissions:[{key:"documents:upload",name:"Upload",description:"Upload documents"},{key:"documents:view",name:"View",description:"View/download documents"},{key:"documents:view_confidential",name:"View Confidential",description:"Access confidential"},{key:"documents:edit",name:"Edit",description:"Edit documents"},{key:"documents:delete",name:"Delete",description:"Delete documents",sensitive:!0},{key:"documents:share_external",name:"Share External",description:"Share outside firm"},{key:"documents:manage_folders",name:"Manage Folders",description:"Create/delete folders"},{key:"documents:manage_permissions",name:"Manage Permissions",description:"Set access rights"}]},{id:"calendar",name:"Calendar",description:"Calendar and scheduling",permissions:[{key:"calendar:create",name:"Create Events",description:"Create events"},{key:"calendar:view",name:"View Calendar",description:"View own calendar"},{key:"calendar:view_all",name:"View All",description:"View all calendars"},{key:"calendar:edit",name:"Edit Events",description:"Modify events"},{key:"calendar:delete",name:"Delete Events",description:"Remove events"},{key:"calendar:manage_deadlines",name:"Manage Deadlines",description:"Legal deadlines"}]},{id:"reports",name:"Reports",description:"Analytics and reporting",permissions:[{key:"reports:view",name:"View Reports",description:"Access reports"},{key:"reports:view_financial",name:"Financial Reports",description:"Revenue reports"},{key:"reports:view_productivity",name:"Productivity",description:"Productivity metrics"},{key:"reports:create",name:"Create Reports",description:"Custom reports"},{key:"reports:export",name:"Export",description:"Export data"},{key:"reports:schedule",name:"Schedule",description:"Automated reports"}]},{id:"admin",name:"Administration",description:"Firm administration",permissions:[{key:"firm:manage",name:"Firm Settings",description:"Manage firm",sensitive:!0},{key:"firm:billing",name:"Firm Billing",description:"Subscription",sensitive:!0},{key:"firm:delete",name:"Delete Firm",description:"Delete account",sensitive:!0},{key:"users:invite",name:"Invite Users",description:"Send invitations"},{key:"users:manage",name:"Manage Users",description:"Edit users",sensitive:!0},{key:"users:delete",name:"Delete Users",description:"Remove users",sensitive:!0},{key:"users:view_rates",name:"View Rates",description:"See billing rates"},{key:"users:edit_rates",name:"Edit Rates",description:"Modify rates",sensitive:!0},{key:"groups:manage",name:"Manage Groups",description:"Team groups"},{key:"groups:assign",name:"Assign Groups",description:"Group membership"},{key:"integrations:view",name:"View Integrations",description:"See integrations"},{key:"integrations:manage",name:"Manage Integrations",description:"Connect apps",sensitive:!0},{key:"integrations:sync",name:"Trigger Sync",description:"Manual sync"}]},{id:"ai",name:"AI Features",description:"AI-powered capabilities",permissions:[{key:"ai:use_assistant",name:"AI Assistant",description:"Chat with AI"},{key:"ai:use_drafting",name:"AI Drafting",description:"Generate documents"},{key:"ai:use_analysis",name:"AI Analysis",description:"Analysis tasks"},{key:"ai:view_suggestions",name:"AI Suggestions",description:"See suggestions"},{key:"ai:train_model",name:"Train AI",description:"Provide feedback"}]},{id:"security",name:"Security",description:"Security and audit",permissions:[{key:"audit:view",name:"View Audit Logs",description:"Activity logs",sensitive:!0},{key:"audit:export",name:"Export Logs",description:"Export audit data",sensitive:!0},{key:"security:manage_sessions",name:"Manage Sessions",description:"Force logout",sensitive:!0},{key:"security:manage_2fa",name:"Manage 2FA",description:"2FA settings",sensitive:!0},{key:"security:manage_api_keys",name:"API Keys",description:"Manage keys",sensitive:!0}]}],Se=le()(de((d,l)=>({effectivePermissions:{},rolePermissionOverrides:{},userOverrides:[],lastFetched:null,hasPermission:(n,t)=>{const{effectivePermissions:r,userOverrides:u,rolePermissionOverrides:_}=l(),m=u.find(v=>v.permissionKey===n);if(m&&!(m.expiresAt&&new Date(m.expiresAt)<new Date))return m.value==="granted";if(r[n])return r[n]==="granted";if(t){const v=_[t];return v&&v[n]?v[n]==="granted":(A[t]||[]).includes(n)}return!1},hasAnyPermission:(n,t)=>n.some(r=>l().hasPermission(r,t)),hasAllPermissions:(n,t)=>n.every(r=>l().hasPermission(r,t)),canAccessMatter:(n,t)=>t&&["owner","admin","billing"].includes(t)?!0:l().hasPermission("matters:view",t),canAccessClient:(n,t)=>t&&["owner","admin","billing"].includes(t)?!0:l().hasPermission("clients:view",t),canAccessDocument:(n,t)=>t&&["owner","admin"].includes(t)?!0:l().hasPermission("documents:view",t),loadEffectivePermissions:n=>{const{rolePermissionOverrides:t}=l(),r={};B.forEach(u=>{u.permissions.forEach(_=>{const v=(A[n]||[]).includes(_.key),a=t[n];a&&a[_.key]?r[_.key]=a[_.key]:r[_.key]=v?"granted":"denied"})}),d({effectivePermissions:r,lastFetched:Date.now()})},loadRoleOverrides:async n=>{try{d({rolePermissionOverrides:{}})}catch(t){console.error("Failed to load role overrides:",t)}},addUserOverride:n=>{d(t=>({userOverrides:[...t.userOverrides.filter(r=>r.permissionKey!==n.permissionKey),n]}))},removeUserOverride:n=>{d(t=>({userOverrides:t.userOverrides.filter(r=>r.permissionKey!==n)}))},setRolePermission:(n,t,r)=>{d(u=>({rolePermissionOverrides:{...u.rolePermissionOverrides,[n]:{...u.rolePermissionOverrides[n],[t]:r}}}))},resetRoleToDefaults:n=>{d(t=>{const r={...t.rolePermissionOverrides};return delete r[n],{rolePermissionOverrides:r}})},clearPermissions:()=>{d({effectivePermissions:{},rolePermissionOverrides:{},userOverrides:[],lastFetched:null})}}),{name:"apex-permissions",partialize:d=>({rolePermissionOverrides:d.rolePermissionOverrides,userOverrides:d.userOverrides})}));function Ae(d,l){const n={},t=A[d]||[];return B.forEach(r=>{r.permissions.forEach(u=>{const _=t.includes(u.key);l&&l[u.key]?n[u.key]=l[u.key]:n[u.key]=_?"granted":"denied"})}),n}const Be="_page_uuy2t_1",Ie="_header_uuy2t_8",Re="_backBtn_uuy2t_15",De="_title_uuy2t_34",Pe="_saveBtn_uuy2t_58",ze="_spin_uuy2t_84",Oe="_tabs_uuy2t_94",Me="_tab_uuy2t_94",Ee="_active_uuy2t_124",Le="_content_uuy2t_130",Ve="_roleSelector_uuy2t_137",Te="_roleGrid_uuy2t_151",Fe="_roleCard_uuy2t_157",He="_selected_uuy2t_176",Ue="_roleIcon_uuy2t_182",Ge="_roleInfo_uuy2t_193",Ke="_roleName_uuy2t_198",qe="_roleDesc_uuy2t_205",$e="_customizedBadge_uuy2t_214",Qe="_lockIcon_uuy2t_225",We="_permissionEditor_uuy2t_233",Xe="_editorHeader_uuy2t_240",Ye="_editorActions_uuy2t_258",Je="_searchBox_uuy2t_265",Ze="_filterToggle_uuy2t_292",es="_resetBtn_uuy2t_305",ss="_ownerNotice_uuy2t_323",is="_categoriesList_uuy2t_335",ts="_category_uuy2t_339",ns="_categoryHeader_uuy2t_346",as="_categoryName_uuy2t_367",rs="_categoryDesc_uuy2t_373",cs="_permissionCount_uuy2t_379",os="_permissionsList_uuy2t_388",ls="_permissionRow_uuy2t_393",ds="_customized_uuy2t_214",us="_sensitive_uuy2t_418",ms="_permissionInfo_uuy2t_422",gs="_permissionName_uuy2t_429",ps="_sensitiveBadge_uuy2t_438",vs="_permissionDesc_uuy2t_448",_s="_permissionKey_uuy2t_453",hs="_permissionToggle_uuy2t_459",ys="_toggleBtn_uuy2t_464",xs="_deny_uuy2t_488",js="_grant_uuy2t_494",fs="_accessSection_uuy2t_501",ws="_sectionHeader_uuy2t_508",Ns="_addRuleBtn_uuy2t_525",ks="_defaultSettings_uuy2t_546",bs="_settingGroup_uuy2t_557",Cs="_settingRow_uuy2t_563",Ss="_settingInfo_uuy2t_579",As="_settingName_uuy2t_585",Bs="_settingDesc_uuy2t_591",Is="_toggleSwitch_uuy2t_597",Rs="_slider_uuy2t_610",Ds="_rulesSection_uuy2t_643",Ps="_emptyRules_uuy2t_660",zs="_rulesList_uuy2t_688",Os="_ruleCard_uuy2t_694",Ms="_ruleHeader_uuy2t_706",Es="_ruleName_uuy2t_716",Ls="_ruleDesc_uuy2t_723",Vs="_ruleMeta_uuy2t_729",Ts="_accessBadge_uuy2t_743",Fs="_view_uuy2t_751",Hs="_edit_uuy2t_240",Us="_full_uuy2t_761",Gs="_ruleActions_uuy2t_766",Ks="_iconBtn_uuy2t_771",qs="_overrideNotice_uuy2t_791",$s="_userOverrideCard_uuy2t_805",Qs="_userAvatar_uuy2t_812",Ws="_userInfo_uuy2t_825",Xs="_userName_uuy2t_832",Ys="_userRole_uuy2t_838",Js="_overrideCount_uuy2t_843",Zs="_overridesList_uuy2t_851",ei="_overrideItem_uuy2t_860",si="_overridePermission_uuy2t_869",ii="_overrideValue_uuy2t_876",ti="_granted_uuy2t_886",ni="_denied_uuy2t_891",ai="_overrideReason_uuy2t_896",s={page:Be,header:Ie,backBtn:Re,title:De,saveBtn:Pe,spin:ze,tabs:Oe,tab:Me,active:Ee,content:Le,roleSelector:Ve,roleGrid:Te,roleCard:Fe,selected:He,roleIcon:Ue,roleInfo:Ge,roleName:Ke,roleDesc:qe,customizedBadge:$e,lockIcon:Qe,permissionEditor:We,editorHeader:Xe,editorActions:Ye,searchBox:Je,filterToggle:Ze,resetBtn:es,ownerNotice:ss,categoriesList:is,category:ts,categoryHeader:ns,categoryName:as,categoryDesc:rs,permissionCount:cs,permissionsList:os,permissionRow:ls,customized:ds,sensitive:us,permissionInfo:ms,permissionName:gs,sensitiveBadge:ps,permissionDesc:vs,permissionKey:_s,permissionToggle:hs,toggleBtn:ys,deny:xs,grant:js,accessSection:fs,sectionHeader:ws,addRuleBtn:Ns,defaultSettings:ks,settingGroup:bs,settingRow:Cs,settingInfo:Ss,settingName:As,settingDesc:Bs,toggleSwitch:Is,slider:Rs,rulesSection:Ds,emptyRules:Ps,rulesList:zs,ruleCard:Os,ruleHeader:Ms,ruleName:Es,ruleDesc:Ls,ruleMeta:Vs,accessBadge:Ts,view:Fs,edit:Hs,full:Us,ruleActions:Gs,iconBtn:Ks,overrideNotice:qs,userOverrideCard:$s,userAvatar:Qs,userInfo:Ws,userName:Xs,userRole:Ys,overrideCount:Js,overridesList:Zs,overrideItem:ei,overridePermission:si,overrideValue:ii,granted:ti,denied:ni,overrideReason:ai},S=[{id:"owner",name:"Owner",color:"#F59E0B",icon:ve,description:"Full administrative control. Cannot be restricted."},{id:"admin",name:"Admin",color:"#EF4444",icon:w,description:"Manage users, settings, and most operations."},{id:"attorney",name:"Attorney",color:"#8B5CF6",icon:x,description:"Full access to matters, clients, and billing."},{id:"paralegal",name:"Paralegal",color:"#06B6D4",icon:y,description:"Support role with limited billing access."},{id:"staff",name:"Staff",color:"#10B981",icon:_e,description:"Basic access for administrative staff."},{id:"billing",name:"Billing",color:"#F97316",icon:$,description:"Financial operations and reporting."},{id:"readonly",name:"Read Only",color:"#64748B",icon:he,description:"View-only access across the firm."}];function hi(){var E,L;const d=ue(),{user:l}=ce(),n=oe(),{rolePermissionOverrides:t,setRolePermission:r,resetRoleToDefaults:u,loadEffectivePermissions:_}=Se(),[m,v]=p.useState("roles"),[a,Q]=p.useState("attorney"),[W,X]=p.useState(new Set(["matters","documents"])),[j,Y]=p.useState(""),[N,J]=p.useState(!1),[Z,k]=p.useState(!1),[I,R]=p.useState(!1),[D,ri]=p.useState([{id:"rule-1",name:"Personal Injury Team",description:"Access to all PI cases",userIds:["user-1","user-2"],groupIds:["group-pi"],accessLevel:"full",includeDocuments:!0,includeBilling:!0}]),[P,ci]=p.useState([{id:"doc-rule-1",name:"Firm Templates",folderId:"templates",userIds:[],groupIds:["all-attorneys"],accessLevel:"view",inheritFromMatter:!1}]),[z,oi]=p.useState([]),O=p.useMemo(()=>Ae(a,t[a]),[a,t]),ee=p.useMemo(()=>B.map(i=>({...i,permissions:i.permissions.filter(c=>{if(j){const o=j.toLowerCase();return c.key.toLowerCase().includes(o)||c.name.toLowerCase().includes(o)||c.description.toLowerCase().includes(o)}if(N){const o=t[a];return o&&o[c.key]!==void 0}return!0})})).filter(i=>i.permissions.length>0),[j,N,a,t]),se=i=>{X(c=>{const o=new Set(c);return o.has(i)?o.delete(i):o.add(i),o})},M=(i,c)=>{if(a==="owner"){n.warning("Owner permissions cannot be modified");return}r(a,i,c),k(!0)},ie=()=>{window.confirm(`Reset ${a} permissions to defaults? This will remove all customizations.`)&&(u(a),k(!0),n.success(`${a} permissions reset to defaults`))},te=async()=>{R(!0);try{await new Promise(i=>setTimeout(i,500)),_((l==null?void 0:l.role)||"staff"),k(!1),n.success("Permission changes saved")}catch{n.error("Failed to save permissions")}finally{R(!1)}},ne=p.useMemo(()=>{const i=t[a];return i?Object.keys(i).length:0},[a,t]),ae=i=>{switch(i){case"matters":return x;case"clients":return y;case"billing":return $;case"documents":return f;case"calendar":return Ce;case"reports":return be;case"admin":return q;case"ai":return ke;case"security":return w;default:return q}};return e.jsxs("div",{className:s.page,children:[e.jsxs("div",{className:s.header,children:[e.jsx("button",{className:s.backBtn,onClick:()=>d(-1),children:e.jsx(me,{size:18})}),e.jsxs("div",{className:s.title,children:[e.jsx(w,{size:22}),e.jsxs("div",{children:[e.jsx("h1",{children:"Permissions & Access Control"}),e.jsx("p",{children:"Configure role permissions, matter access, and document sharing"})]})]}),Z&&e.jsxs("button",{className:s.saveBtn,onClick:te,disabled:I,children:[I?e.jsx(ge,{size:16,className:s.spin}):e.jsx(pe,{size:16}),"Save Changes"]})]}),e.jsxs("div",{className:s.tabs,children:[e.jsxs("button",{className:h(s.tab,m==="roles"&&s.active),onClick:()=>v("roles"),children:[e.jsx(w,{size:16}),"Role Permissions"]}),e.jsxs("button",{className:h(s.tab,m==="matters"&&s.active),onClick:()=>v("matters"),children:[e.jsx(x,{size:16}),"Matter Access"]}),e.jsxs("button",{className:h(s.tab,m==="documents"&&s.active),onClick:()=>v("documents"),children:[e.jsx(f,{size:16}),"Document Sharing"]}),e.jsxs("button",{className:h(s.tab,m==="users"&&s.active),onClick:()=>v("users"),children:[e.jsx(y,{size:16}),"User Overrides"]})]}),m==="roles"&&e.jsxs("div",{className:s.content,children:[e.jsxs("div",{className:s.roleSelector,children:[e.jsx("h3",{children:"Select Role to Configure"}),e.jsx("div",{className:s.roleGrid,children:S.map(i=>{const c=i.icon,o=a===i.id,g=t[i.id]&&Object.keys(t[i.id]).length>0;return e.jsxs("button",{className:h(s.roleCard,o&&s.selected),onClick:()=>Q(i.id),style:{"--role-color":i.color},children:[e.jsx("div",{className:s.roleIcon,style:{backgroundColor:i.color},children:e.jsx(c,{size:18})}),e.jsxs("div",{className:s.roleInfo,children:[e.jsx("span",{className:s.roleName,children:i.name}),e.jsx("span",{className:s.roleDesc,children:i.description})]}),g&&e.jsx("span",{className:s.customizedBadge,children:"Customized"}),i.id==="owner"&&e.jsx(H,{size:14,className:s.lockIcon})]},i.id)})})]}),e.jsxs("div",{className:s.permissionEditor,children:[e.jsxs("div",{className:s.editorHeader,children:[e.jsxs("h3",{children:["Permissions for ",e.jsx("span",{style:{color:(E=S.find(i=>i.id===a))==null?void 0:E.color},children:(L=S.find(i=>i.id===a))==null?void 0:L.name})]}),e.jsxs("div",{className:s.editorActions,children:[e.jsxs("div",{className:s.searchBox,children:[e.jsx(ye,{size:14}),e.jsx("input",{type:"text",placeholder:"Search permissions...",value:j,onChange:i=>Y(i.target.value)})]}),e.jsxs("label",{className:s.filterToggle,children:[e.jsx("input",{type:"checkbox",checked:N,onChange:i=>J(i.target.checked)}),e.jsx("span",{children:"Show customized only"})]}),ne>0&&e.jsxs("button",{className:s.resetBtn,onClick:ie,children:[e.jsx(xe,{size:14}),"Reset to Defaults"]})]})]}),a==="owner"&&e.jsxs("div",{className:s.ownerNotice,children:[e.jsx(H,{size:16}),e.jsx("span",{children:"Owner permissions cannot be modified. Owners have full access to all features."})]}),e.jsx("div",{className:s.categoriesList,children:ee.map(i=>{const c=ae(i.id),o=W.has(i.id);return e.jsxs("div",{className:s.category,children:[e.jsxs("button",{className:s.categoryHeader,onClick:()=>se(i.id),children:[e.jsx(c,{size:18}),e.jsx("span",{className:s.categoryName,children:i.name}),e.jsx("span",{className:s.categoryDesc,children:i.description}),e.jsxs("span",{className:s.permissionCount,children:[i.permissions.filter(g=>O[g.key]==="granted").length," / ",i.permissions.length]}),o?e.jsx(je,{size:16}):e.jsx(fe,{size:16})]}),o&&e.jsx("div",{className:s.permissionsList,children:i.permissions.map(g=>{var F;const V=O[g.key]==="granted",re=((F=t[a])==null?void 0:F[g.key])!==void 0,T=g.sensitive;return e.jsxs("div",{className:h(s.permissionRow,re&&s.customized,T&&s.sensitive),children:[e.jsxs("div",{className:s.permissionInfo,children:[e.jsxs("span",{className:s.permissionName,children:[g.name,T&&e.jsx("span",{className:s.sensitiveBadge,children:"Sensitive"})]}),e.jsx("span",{className:s.permissionDesc,children:g.description}),e.jsx("span",{className:s.permissionKey,children:g.key})]}),e.jsxs("div",{className:s.permissionToggle,children:[e.jsxs("button",{className:h(s.toggleBtn,s.deny,!V&&s.active),onClick:()=>M(g.key,"denied"),disabled:a==="owner",children:[e.jsx(U,{size:14}),"Deny"]}),e.jsxs("button",{className:h(s.toggleBtn,s.grant,V&&s.active),onClick:()=>M(g.key,"granted"),disabled:a==="owner",children:[e.jsx(G,{size:14}),"Grant"]})]})]},g.key)})})]},i.id)})})]})]}),m==="matters"&&e.jsx("div",{className:s.content,children:e.jsxs("div",{className:s.accessSection,children:[e.jsxs("div",{className:s.sectionHeader,children:[e.jsx("h3",{children:"Matter Access Configuration"}),e.jsx("p",{children:"Control who can see and work on specific matters. By default, users only see matters they're assigned to."}),e.jsxs("button",{className:s.addRuleBtn,children:[e.jsx(K,{size:16}),"Create Access Rule"]})]}),e.jsxs("div",{className:s.defaultSettings,children:[e.jsx("h4",{children:"Default Access Behavior"}),e.jsxs("div",{className:s.settingGroup,children:[e.jsxs("label",{className:s.settingRow,children:[e.jsxs("div",{className:s.settingInfo,children:[e.jsx("span",{className:s.settingName,children:"Users see only assigned matters"}),e.jsx("span",{className:s.settingDesc,children:"Staff, paralegals, and attorneys only see matters where they are explicitly assigned"})]}),e.jsxs("div",{className:s.toggleSwitch,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:s.slider})]})]}),e.jsxs("label",{className:s.settingRow,children:[e.jsxs("div",{className:s.settingInfo,children:[e.jsx("span",{className:s.settingName,children:"Admins see all matters"}),e.jsx("span",{className:s.settingDesc,children:"Admin role has visibility into all firm matters"})]}),e.jsxs("div",{className:s.toggleSwitch,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:s.slider})]})]}),e.jsxs("label",{className:s.settingRow,children:[e.jsxs("div",{className:s.settingInfo,children:[e.jsx("span",{className:s.settingName,children:"Billing sees matters with unbilled time"}),e.jsx("span",{className:s.settingDesc,children:"Billing role can view matters that have billable entries"})]}),e.jsxs("div",{className:s.toggleSwitch,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:s.slider})]})]}),e.jsxs("label",{className:s.settingRow,children:[e.jsxs("div",{className:s.settingInfo,children:[e.jsx("span",{className:s.settingName,children:"Matter assignment grants document access"}),e.jsx("span",{className:s.settingDesc,children:"When assigned to a matter, users automatically get access to its documents"})]}),e.jsxs("div",{className:s.toggleSwitch,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:s.slider})]})]})]})]}),e.jsxs("div",{className:s.rulesSection,children:[e.jsx("h4",{children:"Access Rules"}),e.jsx("p",{children:"Create rules to grant access to groups of matters based on type, client, or other criteria."}),D.length===0?e.jsxs("div",{className:s.emptyRules,children:[e.jsx(x,{size:32}),e.jsx("span",{children:"No custom access rules defined"}),e.jsx("p",{children:"By default, users see only matters where they're assigned as team members."})]}):e.jsx("div",{className:s.rulesList,children:D.map(i=>e.jsxs("div",{className:s.ruleCard,children:[e.jsxs("div",{className:s.ruleHeader,children:[e.jsx(x,{size:18}),e.jsx("span",{className:s.ruleName,children:i.name}),e.jsx("span",{className:h(s.accessBadge,s[i.accessLevel]),children:i.accessLevel}),e.jsxs("div",{className:s.ruleActions,children:[e.jsx("button",{className:s.iconBtn,children:e.jsx(b,{size:14})}),e.jsx("button",{className:s.iconBtn,children:e.jsx(C,{size:14})})]})]}),e.jsx("p",{className:s.ruleDesc,children:i.description}),e.jsxs("div",{className:s.ruleMeta,children:[e.jsxs("span",{children:[e.jsx(y,{size:12})," ",i.userIds.length," users"]}),e.jsx("span",{children:i.includeDocuments&&"ðŸ“„ Documents"}),e.jsx("span",{children:i.includeBilling&&"ðŸ’° Billing"})]})]},i.id))})]})]})}),m==="documents"&&e.jsx("div",{className:s.content,children:e.jsxs("div",{className:s.accessSection,children:[e.jsxs("div",{className:s.sectionHeader,children:[e.jsx("h3",{children:"Document Access Configuration"}),e.jsx("p",{children:"Configure how documents are shared and who can access them."}),e.jsxs("button",{className:s.addRuleBtn,children:[e.jsx(K,{size:16}),"Create Sharing Rule"]})]}),e.jsxs("div",{className:s.defaultSettings,children:[e.jsx("h4",{children:"Default Document Access"}),e.jsxs("div",{className:s.settingGroup,children:[e.jsxs("label",{className:s.settingRow,children:[e.jsxs("div",{className:s.settingInfo,children:[e.jsx("span",{className:s.settingName,children:"Inherit access from matter"}),e.jsx("span",{className:s.settingDesc,children:"Documents in a matter folder are accessible to anyone assigned to that matter"})]}),e.jsxs("div",{className:s.toggleSwitch,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:s.slider})]})]}),e.jsxs("label",{className:s.settingRow,children:[e.jsxs("div",{className:s.settingInfo,children:[e.jsx("span",{className:s.settingName,children:"Restrict confidential documents"}),e.jsx("span",{className:s.settingDesc,children:'Documents marked "Confidential" require additional permission'})]}),e.jsxs("div",{className:s.toggleSwitch,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:s.slider})]})]}),e.jsxs("label",{className:s.settingRow,children:[e.jsxs("div",{className:s.settingInfo,children:[e.jsx("span",{className:s.settingName,children:"Allow external sharing"}),e.jsx("span",{className:s.settingDesc,children:"Users with permission can create links to share documents externally"})]}),e.jsxs("div",{className:s.toggleSwitch,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:s.slider})]})]}),e.jsxs("label",{className:s.settingRow,children:[e.jsxs("div",{className:s.settingInfo,children:[e.jsx("span",{className:s.settingName,children:"Require access request for restricted"}),e.jsx("span",{className:s.settingDesc,children:"Users can request access to documents they can't view"})]}),e.jsxs("div",{className:s.toggleSwitch,children:[e.jsx("input",{type:"checkbox",defaultChecked:!0}),e.jsx("span",{className:s.slider})]})]})]})]}),e.jsxs("div",{className:s.rulesSection,children:[e.jsx("h4",{children:"Folder Sharing Rules"}),e.jsx("p",{children:"Set up sharing rules for specific folders that apply regardless of matter assignment."}),P.length===0?e.jsxs("div",{className:s.emptyRules,children:[e.jsx(f,{size:32}),e.jsx("span",{children:"No folder sharing rules defined"})]}):e.jsx("div",{className:s.rulesList,children:P.map(i=>e.jsxs("div",{className:s.ruleCard,children:[e.jsxs("div",{className:s.ruleHeader,children:[e.jsx(f,{size:18}),e.jsx("span",{className:s.ruleName,children:i.name}),e.jsx("span",{className:h(s.accessBadge,s[i.accessLevel]),children:i.accessLevel}),e.jsxs("div",{className:s.ruleActions,children:[e.jsx("button",{className:s.iconBtn,children:e.jsx(b,{size:14})}),e.jsx("button",{className:s.iconBtn,children:e.jsx(C,{size:14})})]})]}),e.jsxs("div",{className:s.ruleMeta,children:[e.jsxs("span",{children:[e.jsx(y,{size:12})," ",i.groupIds.length," groups"]}),e.jsx("span",{children:i.inheritFromMatter?"ðŸ”— Inherits from matter":"ðŸ”’ Independent"})]})]},i.id))})]})]})}),m==="users"&&e.jsx("div",{className:s.content,children:e.jsxs("div",{className:s.accessSection,children:[e.jsxs("div",{className:s.sectionHeader,children:[e.jsx("h3",{children:"Individual User Overrides"}),e.jsx("p",{children:"Grant or deny specific permissions for individual users, overriding their role defaults."}),e.jsxs("button",{className:s.addRuleBtn,children:[e.jsx(we,{size:16}),"Add User Override"]})]}),e.jsxs("div",{className:s.overrideNotice,children:[e.jsx(Ne,{size:16}),e.jsx("span",{children:"User overrides take precedence over role permissions. Use sparingly."})]}),z.length===0?e.jsxs("div",{className:s.emptyRules,children:[e.jsx(y,{size:32}),e.jsx("span",{children:"No individual user overrides"}),e.jsx("p",{children:"All users are using their role's default permissions."})]}):e.jsx("div",{className:s.rulesList,children:z.map(i=>e.jsxs("div",{className:s.userOverrideCard,children:[e.jsxs("div",{className:s.ruleHeader,children:[e.jsx("div",{className:s.userAvatar,children:i.userName.charAt(0)}),e.jsxs("div",{className:s.userInfo,children:[e.jsx("span",{className:s.userName,children:i.userName}),e.jsx("span",{className:s.userRole,children:i.userRole})]}),e.jsxs("span",{className:s.overrideCount,children:[i.overrides.length," overrides"]}),e.jsxs("div",{className:s.ruleActions,children:[e.jsx("button",{className:s.iconBtn,children:e.jsx(b,{size:14})}),e.jsx("button",{className:s.iconBtn,children:e.jsx(C,{size:14})})]})]}),e.jsx("div",{className:s.overridesList,children:i.overrides.map(c=>e.jsxs("div",{className:s.overrideItem,children:[e.jsx("span",{className:s.overridePermission,children:c.permission}),e.jsxs("span",{className:h(s.overrideValue,s[c.value]),children:[c.value==="granted"?e.jsx(G,{size:12}):e.jsx(U,{size:12}),c.value]}),c.reason&&e.jsx("span",{className:s.overrideReason,children:c.reason})]},c.permission))})]},i.userId))})]})})]})}export{hi as default};
