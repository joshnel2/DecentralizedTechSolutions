import{r as c,a6 as e}from"./vendor-DrKzkH4x.js";import{u as O,d as V,v as g}from"./index-CCWWoMiH.js";import{L as M,K as $,as as S,ao as Q,F as k,S as G,bh as E,y as X,bB as L,ak as J,aX as K,bk as W,v as Y,X as I,J as Z,t as F}from"./icons-BtUkkwGS.js";import{f as ee,p as ae}from"./date-utils-BkNAU8cl.js";import"./doc-parsers-U1nJMjtM.js";import"./react-dom-DfB-QKj2.js";import"./pdf-worker-CVmCB3lP.js";import"./router-CNLU_KyZ.js";import"./state-72d44OIA.js";const se="_page_1mz8q_1",re="_loading_1mz8q_11",te="_error_1mz8q_11",le="_spinner_1mz8q_21",ie="_header_1mz8q_30",ne="_headerLeft_1mz8q_37",ce="_headerIcon_1mz8q_43",oe="_createBtn_1mz8q_61",de="_filters_1mz8q_82",me="_searchBox_1mz8q_90",he="_filterSelect_1mz8q_121",ve="_resultCount_1mz8q_137",ue="_emptyState_1mz8q_144",_e="_emptyCreateBtn_1mz8q_163",pe="_templatesGrid_1mz8q_177",xe="_templateCard_1mz8q_183",je="_cardHeader_1mz8q_197",be="_cardIcon_1mz8q_204",ge="_cardBadges_1mz8q_215",fe="_aiBadge_1mz8q_220",ye="_categoryBadge_1mz8q_233",ze="_cardTitle_1mz8q_243",Ne="_cardDescription_1mz8q_250",Ce="_cardMeta_1mz8q_260",Be="_metaItem_1mz8q_266",we="_variablesList_1mz8q_274",qe="_variablesLabel_1mz8q_284",Te="_variableTag_1mz8q_289",Ae="_moreVariables_1mz8q_298",Se="_cardActions_1mz8q_303",ke="_useBtn_1mz8q_311",Ee="_secondaryActions_1mz8q_330",Le="_iconBtn_1mz8q_335",Fe="_deleteBtn_1mz8q_355",Me="_modalOverlay_1mz8q_361",Ge="_previewModal_1mz8q_374",Ie="_previewHeader_1mz8q_386",De="_editorHeader_1mz8q_386",Pe="_closeBtn_1mz8q_400",He="_previewBody_1mz8q_419",Re="_previewMeta_1mz8q_425",Ue="_previewDescription_1mz8q_439",Oe="_previewContent_1mz8q_446",Ve="_previewFooter_1mz8q_463",$e="_previewUseBtn_1mz8q_471",Qe="_editorModal_1mz8q_485",Xe="_editorBody_1mz8q_497",Je="_formError_1mz8q_503",Ke="_formRow_1mz8q_513",We="_formGrid_1mz8q_517",Ye="_formGroup_1mz8q_524",Ze="_contentEditor_1mz8q_560",ea="_formHint_1mz8q_565",aa="_formCheckboxes_1mz8q_570",sa="_checkboxLabel_1mz8q_577",ra="_editorFooter_1mz8q_592",ta="_cancelBtn_1mz8q_601",la="_saveBtn_1mz8q_601",a={page:se,loading:re,error:te,spinner:le,header:ie,headerLeft:ne,headerIcon:ce,createBtn:oe,filters:de,searchBox:me,filterSelect:he,resultCount:ve,emptyState:ue,emptyCreateBtn:_e,templatesGrid:pe,templateCard:xe,cardHeader:je,cardIcon:be,cardBadges:ge,aiBadge:fe,categoryBadge:ye,cardTitle:ze,cardDescription:Ne,cardMeta:Ce,metaItem:Be,variablesList:we,variablesLabel:qe,variableTag:Te,moreVariables:Ae,cardActions:Se,useBtn:ke,secondaryActions:Ee,iconBtn:Le,deleteBtn:Fe,modalOverlay:Me,previewModal:Ge,previewHeader:Ie,editorHeader:De,closeBtn:Pe,previewBody:He,previewMeta:Re,previewDescription:Ue,previewContent:Oe,previewFooter:Ve,previewUseBtn:$e,editorModal:Qe,editorBody:Xe,formError:Je,formRow:Ke,formGrid:We,formGroup:Ye,contentEditor:Ze,formHint:ea,formCheckboxes:aa,checkboxLabel:sa,editorFooter:ra,cancelBtn:ta,saveBtn:la},D=[{value:"all",label:"All Categories"},{value:"contracts",label:"Contracts"},{value:"pleadings",label:"Pleadings"},{value:"discovery",label:"Discovery"},{value:"letters",label:"Letters"},{value:"motions",label:"Motions"},{value:"agreements",label:"Agreements"},{value:"forms",label:"Forms"},{value:"other",label:"Other"}],P=[{value:"all",label:"All Practice Areas"},{value:"litigation",label:"Litigation"},{value:"corporate",label:"Corporate"},{value:"real-estate",label:"Real Estate"},{value:"family",label:"Family Law"},{value:"criminal",label:"Criminal"},{value:"estate",label:"Estate Planning"},{value:"immigration",label:"Immigration"},{value:"ip",label:"Intellectual Property"},{value:"employment",label:"Employment"},{value:"general",label:"General Practice"}];function pa(){const{user:r}=O();V();const v=(r==null?void 0:r.role)==="owner"||(r==null?void 0:r.role)==="admin",[p,l]=c.useState([]),[o,u]=c.useState(!0),[x,j]=c.useState(null),[m,N]=c.useState(""),[_,t]=c.useState("all"),[i,b]=c.useState("all"),[C,f]=c.useState(!1),[B,w]=c.useState(null),[h,y]=c.useState(null);c.useEffect(()=>{q()},[]);const q=async()=>{u(!0),j(null);try{const s=await g.getTemplates();l(s.templates||[])}catch(s){j(s.message||"Failed to load templates")}finally{u(!1)}},z=p.filter(s=>{var A;const n=!m||s.name.toLowerCase().includes(m.toLowerCase())||((A=s.description)==null?void 0:A.toLowerCase().includes(m.toLowerCase())),d=_==="all"||s.category===_,U=i==="all"||s.practiceArea===i;return n&&d&&U}),H=async s=>{if(confirm("Are you sure you want to delete this template?"))try{await g.deleteTemplate(s),l(n=>n.filter(d=>d.id!==s))}catch(n){alert("Failed to delete template: "+n.message)}},R=async s=>{try{const n=await g.createTemplate({name:`${s.name} (Copy)`,description:s.description,category:s.category,practiceArea:s.practiceArea,content:s.content,variables:s.variables,aiEnabled:s.aiEnabled,aiPrompts:s.aiPrompts,isActive:s.isActive});l(d=>[n,...d])}catch(n){alert("Failed to duplicate template: "+n.message)}},T=s=>{alert(`Create document from: ${s.name}

This feature will open a document editor with the template content pre-filled.`)};return o?e.jsx("div",{className:a.page,children:e.jsxs("div",{className:a.loading,children:[e.jsx(M,{size:32,className:a.spinner}),e.jsx("p",{children:"Loading templates..."})]})}):x?e.jsx("div",{className:a.page,children:e.jsxs("div",{className:a.error,children:[e.jsx("p",{children:x}),e.jsx("button",{onClick:q,children:"Try Again"})]})}):e.jsxs("div",{className:a.page,children:[e.jsxs("div",{className:a.header,children:[e.jsxs("div",{className:a.headerLeft,children:[e.jsx($,{size:28,className:a.headerIcon}),e.jsxs("div",{children:[e.jsx("h1",{children:"Document Templates"}),e.jsx("p",{children:"Create documents from reusable templates"})]})]}),v&&e.jsxs("button",{className:a.createBtn,onClick:()=>f(!0),children:[e.jsx(S,{size:18}),"Create Template"]})]}),e.jsxs("div",{className:a.filters,children:[e.jsxs("div",{className:a.searchBox,children:[e.jsx(Q,{size:18}),e.jsx("input",{type:"text",placeholder:"Search templates...",value:m,onChange:s=>N(s.target.value)})]}),e.jsx("select",{value:_,onChange:s=>t(s.target.value),className:a.filterSelect,children:D.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("select",{value:i,onChange:s=>b(s.target.value),className:a.filterSelect,children:P.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsxs("span",{className:a.resultCount,children:[z.length," template",z.length!==1?"s":""]})]}),z.length===0?e.jsxs("div",{className:a.emptyState,children:[e.jsx(k,{size:48}),e.jsx("h3",{children:"No templates found"}),e.jsx("p",{children:p.length===0?"Get started by creating your first document template.":"Try adjusting your search or filters."}),v&&p.length===0&&e.jsxs("button",{className:a.emptyCreateBtn,onClick:()=>f(!0),children:[e.jsx(S,{size:18}),"Create Template"]})]}):e.jsx("div",{className:a.templatesGrid,children:z.map(s=>e.jsxs("div",{className:a.templateCard,children:[e.jsxs("div",{className:a.cardHeader,children:[e.jsx("div",{className:a.cardIcon,children:e.jsx(k,{size:24})}),e.jsxs("div",{className:a.cardBadges,children:[s.aiEnabled&&e.jsxs("span",{className:a.aiBadge,children:[e.jsx(G,{size:12}),"AI"]}),e.jsx("span",{className:a.categoryBadge,children:s.category})]})]}),e.jsx("h3",{className:a.cardTitle,children:s.name}),s.description&&e.jsx("p",{className:a.cardDescription,children:s.description}),e.jsxs("div",{className:a.cardMeta,children:[e.jsxs("span",{className:a.metaItem,children:[e.jsx(E,{size:14}),s.practiceArea||"General"]}),e.jsxs("span",{className:a.metaItem,children:[e.jsx(X,{size:14}),s.usageCount," uses"]})]}),s.variables&&s.variables.length>0&&e.jsxs("div",{className:a.variablesList,children:[e.jsx("span",{className:a.variablesLabel,children:"Variables:"}),s.variables.slice(0,3).map((n,d)=>e.jsx("span",{className:a.variableTag,children:`{{${n}}}`},d)),s.variables.length>3&&e.jsxs("span",{className:a.moreVariables,children:["+",s.variables.length-3]})]}),e.jsxs("div",{className:a.cardActions,children:[e.jsxs("button",{className:a.useBtn,onClick:()=>T(s),children:[e.jsx(L,{size:16}),"Use Template"]}),e.jsxs("div",{className:a.secondaryActions,children:[e.jsx("button",{className:a.iconBtn,onClick:()=>y(s),title:"Preview",children:e.jsx(J,{size:16})}),e.jsx("button",{className:a.iconBtn,onClick:()=>R(s),title:"Duplicate",children:e.jsx(K,{size:16})}),v&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:a.iconBtn,onClick:()=>w(s),title:"Edit",children:e.jsx(W,{size:16})}),e.jsx("button",{className:`${a.iconBtn} ${a.deleteBtn}`,onClick:()=>H(s.id),title:"Delete",children:e.jsx(Y,{size:16})})]})]})]})]},s.id))}),h&&e.jsx("div",{className:a.modalOverlay,onClick:()=>y(null),children:e.jsxs("div",{className:a.previewModal,onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:a.previewHeader,children:[e.jsx("h3",{children:h.name}),e.jsx("button",{className:a.closeBtn,onClick:()=>y(null),children:e.jsx(I,{size:20})})]}),e.jsxs("div",{className:a.previewBody,children:[e.jsxs("div",{className:a.previewMeta,children:[e.jsxs("span",{children:[e.jsx(E,{size:14})," ",h.category]}),e.jsxs("span",{children:[e.jsx(Z,{size:14})," Updated ",ee(ae(h.updatedAt),"MMM d, yyyy")]})]}),h.description&&e.jsx("p",{className:a.previewDescription,children:h.description}),e.jsx("div",{className:a.previewContent,children:e.jsx("pre",{children:h.content})})]}),e.jsx("div",{className:a.previewFooter,children:e.jsxs("button",{className:a.previewUseBtn,onClick:()=>{T(h),y(null)},children:[e.jsx(L,{size:16}),"Use This Template"]})})]})}),(C||B)&&e.jsx(ia,{template:B,onClose:()=>{f(!1),w(null)},onSave:s=>{l(B?n=>n.map(d=>d.id===s.id?s:d):n=>[s,...n]),f(!1),w(null)}})]})}function ia({template:r,onClose:v,onSave:p}){var _;const[l,o]=c.useState({name:(r==null?void 0:r.name)||"",description:(r==null?void 0:r.description)||"",category:(r==null?void 0:r.category)||"other",practiceArea:(r==null?void 0:r.practiceArea)||"general",content:(r==null?void 0:r.content)||"",variables:((_=r==null?void 0:r.variables)==null?void 0:_.join(", "))||"",aiEnabled:(r==null?void 0:r.aiEnabled)||!1,isActive:(r==null?void 0:r.isActive)??!0}),[u,x]=c.useState(!1),[j,m]=c.useState(null),N=async t=>{if(t.preventDefault(),!l.name.trim()||!l.content.trim()){m("Name and content are required");return}x(!0),m(null);try{const i={name:l.name.trim(),description:l.description.trim(),category:l.category,practiceArea:l.practiceArea,content:l.content,variables:l.variables.split(",").map(C=>C.trim()).filter(Boolean),aiEnabled:l.aiEnabled,isActive:l.isActive};let b;r?b=await g.updateTemplate(r.id,i):b=await g.createTemplate(i),p(b)}catch(i){m(i.message||"Failed to save template")}finally{x(!1)}};return e.jsx("div",{className:a.modalOverlay,onClick:v,children:e.jsxs("div",{className:a.editorModal,onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:a.editorHeader,children:[e.jsx("h3",{children:r?"Edit Template":"Create Template"}),e.jsx("button",{className:a.closeBtn,onClick:v,children:e.jsx(I,{size:20})})]}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:a.editorBody,children:[j&&e.jsx("div",{className:a.formError,children:j}),e.jsx("div",{className:a.formRow,children:e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"Template Name *"}),e.jsx("input",{type:"text",value:l.name,onChange:t=>o(i=>({...i,name:t.target.value})),placeholder:"e.g., Standard Retainer Agreement",required:!0})]})}),e.jsx("div",{className:a.formRow,children:e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:l.description,onChange:t=>o(i=>({...i,description:t.target.value})),placeholder:"Brief description of what this template is for...",rows:2})]})}),e.jsxs("div",{className:a.formGrid,children:[e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"Category"}),e.jsx("select",{value:l.category,onChange:t=>o(i=>({...i,category:t.target.value})),children:D.filter(t=>t.value!=="all").map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"Practice Area"}),e.jsx("select",{value:l.practiceArea,onChange:t=>o(i=>({...i,practiceArea:t.target.value})),children:P.filter(t=>t.value!=="all").map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),e.jsx("div",{className:a.formRow,children:e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"Template Content *"}),e.jsx("textarea",{value:l.content,onChange:t=>o(i=>({...i,content:t.target.value})),placeholder:"Enter your template content here. Use {{variable_name}} for dynamic fields...",rows:12,className:a.contentEditor,required:!0})]})}),e.jsx("div",{className:a.formRow,children:e.jsxs("div",{className:a.formGroup,children:[e.jsx("label",{children:"Variables (comma-separated)"}),e.jsx("input",{type:"text",value:l.variables,onChange:t=>o(i=>({...i,variables:t.target.value})),placeholder:"e.g., client_name, matter_number, date"}),e.jsx("span",{className:a.formHint,children:"These will become fillable fields when using the template"})]})}),e.jsxs("div",{className:a.formCheckboxes,children:[e.jsxs("label",{className:a.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:l.aiEnabled,onChange:t=>o(i=>({...i,aiEnabled:t.target.checked}))}),e.jsx(G,{size:14}),"Enable AI assistance for this template"]}),e.jsxs("label",{className:a.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:l.isActive,onChange:t=>o(i=>({...i,isActive:t.target.checked}))}),e.jsx(F,{size:14}),"Template is active and visible to users"]})]})]}),e.jsxs("div",{className:a.editorFooter,children:[e.jsx("button",{type:"button",className:a.cancelBtn,onClick:v,disabled:u,children:"Cancel"}),e.jsx("button",{type:"submit",className:a.saveBtn,disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(M,{size:16,className:a.spinner}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{size:16}),r?"Update Template":"Create Template"]})})]})]})]})})}export{pa as DocumentTemplatesPage,pa as default};
