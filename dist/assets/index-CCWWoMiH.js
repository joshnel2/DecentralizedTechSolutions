const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-DQPvzCzu.js","assets/vendor-DrKzkH4x.js","assets/doc-parsers-U1nJMjtM.js","assets/react-dom-DfB-QKj2.js","assets/pdf-worker-CVmCB3lP.js","assets/router-CNLU_KyZ.js","assets/icons-BtUkkwGS.js","assets/LandingPage-DMzQXbkH.css","assets/LoginPage-ymiLg17a.js","assets/AuthPages.module-DbukPY8p.js","assets/AuthPages-zH9rB4sX.css","assets/state-72d44OIA.js","assets/RegisterPage-C9F3621Z.js","assets/ForgotPasswordPage-C_Ypl4PW.js","assets/ResetPasswordPage-BQMlCDoe.js","assets/FirmSetupPage-D7lNmqH7.js","assets/DashboardPage-DoWhxNkN.js","assets/dateUtils-Bq7Z0P5c.js","assets/date-utils-BkNAU8cl.js","assets/charts-CBxIs53B.js","assets/DashboardPage-I0hENPZr.css","assets/MattersPage-DurNq9Yr.js","assets/MatterTypesManager-P8eWpN0d.js","assets/MatterTypesManager-wx8qqPLH.css","assets/ListPages.module-B2P1D6uk.js","assets/ListPages-pMXXSyFc.css","assets/ConfirmationModal-X7YGPBKC.js","assets/ConfirmationModal-Dg2o-0Zm.css","assets/MattersPage-BJj6J2h8.css","assets/MatterDetailPage-CUrmrnTC.js","assets/DetailPage.module-Bt939KNz.js","assets/DetailPage-Bb6VKgO9.css","assets/ShareDocumentModal-Uqa4Lxgn.js","assets/ShareDocumentModal-99WYeaAM.css","assets/MatterDetailPage-BF-D4WTp.css","assets/ClientsPage-i_vjMgff.js","assets/ClientDetailPage-DD-eNvwD.js","assets/CalendarPage-D7zGad2g.js","assets/CalendarPage-DvCs2B3Z.css","assets/BillingPage-DXasF3mH.js","assets/BillingPage-BAKuICZM.css","assets/TimeTrackingPage-C4H72W6d.js","assets/TimeTrackingPage-vn3NKquG.css","assets/ReportsPage-9QvCVadm.js","assets/ReportsPage-NHQdqtmn.css","assets/DocumentsPage-2w6Odrs7.js","assets/aiStore-CKroQOhS.js","assets/DocumentsPage-Bm_KT3yC.css","assets/AIAssistantPage-CyoSX3rw.js","assets/documentParser-BCJJeAJ6.js","assets/AIAssistantPage-CqMJjgL8.css","assets/BackgroundAgentPage-BESLY2rh.js","assets/BackgroundAgentPage-DFEUjJWh.css","assets/AgentConsolePage-BtN0Fr1w.js","assets/AgentConsolePage-_IBwoGd8.css","assets/SettingsPage-CU0kD_NX.js","assets/SettingsPage.module-DZhI6nyr.js","assets/SettingsPage-DbyZyjyF.css","assets/SettingsHubPage-C7w2-3HA.js","assets/SettingsHubPage-_klyuSPS.css","assets/FirmSettingsPage-Ba2YeNtn.js","assets/FirmSettingsPage-ByRx7c4z.css","assets/FirmAdminPage-B7yb_8hJ.js","assets/FirmAdminPage-CbZcpDGE.css","assets/PermissionsSettingsPage-Bz3Wf1ik.js","assets/PermissionsSettingsPage-DkAaNoMJ.css","assets/PermissionsAdminPage-CpOY8GDT.js","assets/PermissionsAdminPage-DZldwOW0.css","assets/TeamPage-CQaYXtKv.js","assets/TeamPage-DQP3DrRi.css","assets/APIKeysPage-OZAeX2jy.js","assets/APIKeysPage-qLvLI1YI.css","assets/IntegrationsPage-DtIJlv_A.js","assets/IntegrationsPage-Dv9CX1Jh.css","assets/OutlookIntegrationPage-Dn8mtruY.js","assets/OutlookIntegrationPage-Cixm1EPp.css","assets/FileStorageIntegrationPage-CxWIiZYs.js","assets/FileStorageIntegrationPage-bCqH58Wp.css","assets/QuickBooksIntegrationPage-FT5KYOpe.js","assets/IntegrationDataPage.module-DQ8gf-9T.js","assets/IntegrationDataPage-BR45SqGI.css","assets/CloudStorageIntegrationPage-D5U19y9E.js","assets/SlackIntegrationPage-BKWbiAAO.js","assets/SecuritySettingsPage-CncUkFto.js","assets/SecuritySettingsPage-DaWBd4ul.css","assets/FirmAnalyticsPage-D-QnF2CT.js","assets/FirmAnalyticsPage-BXqPB4Mj.css","assets/TrustAccountingPage-oijz4_Gs.js","assets/TrustAccountingPage-BBkQpAly.css","assets/RecoveryBinPage-B9E6qfsV.js","assets/RecoveryBinPage-DM1PKnkJ.css","assets/CustomFieldsPage-8388i_Xc.js","assets/CustomFieldsPage-LTu1gAc9.css","assets/CourtRulesPage-DdBKVTGC.js","assets/CourtRulesPage-DSPGAiph.css","assets/TextSnippetsPage-X_kmlhjp.js","assets/TextSnippetsPage-CzXckZ-t.css","assets/DocumentAutomationPage-D1dqRQv8.js","assets/DocumentAutomationPage-DwCUh_BD.css","assets/DocumentTemplatesPage-BWMpRRd5.js","assets/DocumentTemplatesPage-BfbCSI1v.css","assets/WorkflowsPage-DzjZYx6f.js","assets/WorkflowsPage-Cedlb9FI.css","assets/BulkPermissionsPage-CjvEIhV3.js","assets/BulkPermissionsPage-McyINxSi.css","assets/AdminPortalPage-B7v-jtEP.js","assets/AdminPortalPage-mVLJBOYV.css","assets/SecureAdminLogin-2mLWu_xM.js","assets/SecureAdminLogin-BrninzDq.css","assets/SecureAdminDashboard-DPHkhiVj.js","assets/SecureAdminDashboard-DFj0vj1d.css","assets/AccountSettingsPage-DuP2THFy.js","assets/AppearanceSettingsPage-DghYZjQo.js","assets/MobileSettingsPage-Cf5fC1CQ.js","assets/AppsSettingsPage-1mhJsQsh.js","assets/NotificationsSettingsPage-BQKrUAA6.js","assets/ReferralsPage-DhHtzA-7.js","assets/BillingSettingsPage-DThecf_Y.js","assets/PaymentsSettingsPage-w9ne389B.js","assets/DataEscrowPage-BYjFd2SI.js","assets/SharingSettingsPage-2gqo7TFu.js","assets/TextMessagingPage-CIVwlAnT.js","assets/AIConfigPage-B7M8AJZU.js","assets/ReportingSettingsPage-DP-2_l_S.js","assets/RedlineAIPage-DkNahM0h.js","assets/RedlineAIPage-DP59t5yL.css","assets/ApexPayPage-CIwp_VFB.js","assets/ApexPayPage-Czi2XcbZ.css","assets/ApexPaySettingsPage-36ch22vf.js","assets/ApexDrivePage-BRJ8tk0q.js","assets/ApexDrivePage-CRDmr-ix.css","assets/DriveBrowsePage-BG1_X0dP.js","assets/DriveBrowsePage-BeCfMxpy.css","assets/DriveSetupPage-DO3nMWHA.js","assets/DriveSetupPage-BC1b6rgt.css","assets/DocumentVersionsPage-Ci9C96k6.js","assets/DocumentVersionsPage-CMQatAVt.css","assets/DocumentComparePage-BvLUeCoH.js","assets/DocumentComparePage-W0Agv1_w.css","assets/FolderPermissionsPage-D7Fqe5UH.js","assets/FolderPermissionsPage-RFO_HMLW.css","assets/AboutPage-Ch2smnjg.js","assets/PublicPages.module-Dn018Egl.js","assets/PublicPages-CJ-PEGum.css","assets/SecurityPage-CEX0_gph.js","assets/IntegrationsPublicPage-YcuW6d-n.js","assets/BlogPage-URvHW31v.js","assets/ContactPage-CEyynEAv.js","assets/DocsPage-DSs24uwP.js","assets/APIReferencePage-B9BUxyz-.js","assets/SupportPage-C2UjRRAq.js","assets/StatusPage-ClfYhl7r.js","assets/PrivacyPage-BkDPImHE.js","assets/TermsPage-DAXXhVaF.js","assets/EULAPage-D2lCK-m9.js","assets/CompliancePage-CtPyZiPm.js"])))=>i.map(i=>d[i]);
var As=Object.defineProperty;var Is=(e,n,s)=>n in e?As(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s;var tt=(e,n,s)=>Is(e,typeof n!="symbol"?n+"":n,s);import{r as o,a6 as t,h as ie,R as Es}from"./vendor-DrKzkH4x.js";import{c as Ns}from"./react-dom-DfB-QKj2.js";import{u as Pt,a as He,N as Ze,O as Ds,B as Cs,R as Os,b as m,c as it}from"./router-CNLU_KyZ.js";import{c as rt,p as zs}from"./state-72d44OIA.js";import{A as qt,B as Ls,R as Tt,H as $s,X as Se,I as Bs,a as jt,C as wt,b as vt,T as mt,c as Rs,d as Fs,M as ot,e as Ms,f as Jt,S as Ge,F as Xe,Z as Us,E as Vs,L as $e,g as gt,V as qs,P as Gt,h as Js,i as Ht,j as Gs,k as Kt,l as Hs,m as Wt,n as Ks,o as At,p as Qt,q as Ws,r as Qs,s as Zt,t as It,u as Zs,U as Ys,v as Xs,W as en,w as tn,x as Yt,y as sn,z as Xt,D as kt,G as nn,J as St,K as es,N as an,O as rn,Q as on,Y as Et,_ as ts,$ as ss,a0 as cn,a1 as ln,a2 as dn,a3 as un,a4 as ns,a5 as mn,a6 as gn,a7 as pn,a8 as hn,a9 as fn,aa as yn,ab as _n,ac as xn,ad as Nt,ae as wn,af as vn}from"./icons-BtUkkwGS.js";import"./doc-parsers-U1nJMjtM.js";import"./pdf-worker-CVmCB3lP.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(i){if(i.ep)return;i.ep=!0;const c=s(i);fetch(i.href,c)}})();const Sn="modulepreload",bn=function(e){return"/"+e},Dt={},p=function(n,s,a){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));i=Promise.allSettled(s.map(u=>{if(u=bn(u),u in Dt)return;Dt[u]=!0;const v=u.endsWith(".css"),P=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${P}`))return;const b=document.createElement("link");if(b.rel=v?"stylesheet":Sn,v||(b.as="script"),b.crossOrigin="",b.href=u,d&&b.setAttribute("nonce",d),document.head.appendChild(b),v)return new Promise((D,F)=>{b.addEventListener("load",D),b.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${u}`)))})}))}function c(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&c(d.reason);return n().catch(c)})},le="https://apexai-api.azurewebsites.net/api",bt="apex-access-token";let J=(()=>{try{return localStorage.getItem(bt)}catch{return null}})();function Oe(e){J=e;try{e?localStorage.setItem(bt,e):localStorage.removeItem(bt)}catch(n){console.warn("Failed to persist access token:",n)}}function Pn(){return J}class me extends Error{constructor(n,s,a){super(s),this.status=n,this.data=a,this.name="ApiError"}}async function r(e,n={}){const s={"Content-Type":"application/json",...n.headers};J&&(s.Authorization=`Bearer ${J}`);const a=await fetch(`${le}${e}`,{...n,headers:s,credentials:"include"});if(a.status===401&&J&&await Tn()){s.Authorization=`Bearer ${J}`;const l=await fetch(`${le}${e}`,{...n,headers:s,credentials:"include"});if(!l.ok){const d=await l.json().catch(()=>({error:"Request failed"}));throw new me(l.status,d.error||"Request failed",d)}return l.json()}if(!a.ok){const c=await a.json().catch(()=>({error:"Request failed"}));throw new me(a.status,c.error||"Request failed",c)}const i=await a.text();return i?JSON.parse(i):null}async function Tn(){try{const e=await fetch(`${le}/auth/refresh`,{method:"POST",credentials:"include"});if(e.ok){const n=await e.json();return Oe(n.accessToken),!0}}catch(e){console.error("Token refresh failed:",e)}return Oe(null),!1}const De={async register(e){const n=await r("/auth/register",{method:"POST",body:JSON.stringify(e)});return Oe(n.accessToken),n},async login(e,n){const s=await r("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:n})});return s.accessToken&&Oe(s.accessToken),s},async logout(){try{await r("/auth/logout",{method:"POST"})}finally{Oe(null)}},async getMe(){return r("/auth/me")},async updatePassword(e,n){return r("/auth/password",{method:"PUT",body:JSON.stringify({currentPassword:e,newPassword:n})})},async getSessions(){return r("/auth/sessions")},async revokeSession(e){return r(`/auth/sessions/${e}`,{method:"DELETE"})},async revokeAllSessions(){return r("/auth/sessions",{method:"DELETE"})}},Me={async getAll(e){const n=new URLSearchParams;return e!=null&&e.search&&n.set("search",e.search),e!=null&&e.type&&n.set("type",e.type),(e==null?void 0:e.isActive)!==void 0&&n.set("isActive",String(e.isActive)),e!=null&&e.view&&n.set("view",e.view),r(`/clients?${n}`)},async getById(e){return r(`/clients/${e}`)},async create(e){return r("/clients",{method:"POST",body:JSON.stringify(e)})},async update(e,n){return r(`/clients/${e}`,{method:"PUT",body:JSON.stringify(n)})},async delete(e){return r(`/clients/${e}`,{method:"DELETE"})}},Ue={async getAll(e){const n=new URLSearchParams;return e!=null&&e.search&&n.set("search",e.search),e!=null&&e.status&&n.set("status",e.status),e!=null&&e.type&&n.set("type",e.type),e!=null&&e.clientId&&n.set("clientId",e.clientId),e!=null&&e.priority&&n.set("priority",e.priority),e!=null&&e.view&&n.set("view",e.view),r(`/matters?${n}`)},async getById(e){return r(`/matters/${e}`)},async create(e){return r("/matters",{method:"POST",body:JSON.stringify(e)})},async update(e,n){return r(`/matters/${e}`,{method:"PUT",body:JSON.stringify(n)})},async delete(e){return r(`/matters/${e}`,{method:"DELETE"})},async getTasks(e){return r(`/matters/${e}/tasks`)},async createTask(e,n){return r(`/matters/${e}/tasks`,{method:"POST",body:JSON.stringify(n)})},async updateTask(e,n,s){return r(`/matters/${e}/tasks/${n}`,{method:"PUT",body:JSON.stringify(s)})},async deleteTask(e,n){return r(`/matters/${e}/tasks/${n}`,{method:"DELETE"})},async getUpdates(e){return r(`/matters/${e}/updates`)},async createUpdate(e,n){return r(`/matters/${e}/updates`,{method:"POST",body:JSON.stringify(n)})},async updateUpdate(e,n,s){return r(`/matters/${e}/updates/${n}`,{method:"PUT",body:JSON.stringify(s)})},async deleteUpdate(e,n){return r(`/matters/${e}/updates/${n}`,{method:"DELETE"})},async getContacts(e){return r(`/matters/${e}/contacts`)},async createContact(e,n){return r(`/matters/${e}/contacts`,{method:"POST",body:JSON.stringify(n)})},async updateContact(e,n,s){return r(`/matters/${e}/contacts/${n}`,{method:"PUT",body:JSON.stringify(s)})},async deleteContact(e,n){return r(`/matters/${e}/contacts/${n}`,{method:"DELETE"})},async getNotes(e){return r(`/matters/${e}/notes`)},async addNote(e,n){return r(`/matters/${e}/notes`,{method:"POST",body:JSON.stringify(n)})},async deleteNote(e,n){return r(`/matters/${e}/notes/${n}`,{method:"DELETE"})},async getPermissions(e){return r(`/matters/${e}/permissions`)},async updateVisibility(e,n){return r(`/matters/${e}/visibility`,{method:"PUT",body:JSON.stringify({visibility:n})})},async addPermission(e,n){return r(`/matters/${e}/permissions`,{method:"POST",body:JSON.stringify(n)})},async removePermission(e,n){return r(`/matters/${e}/permissions/${n}`,{method:"DELETE"})},async bulkUpdatePermissions(e){return r("/matters/bulk-permissions",{method:"POST",body:JSON.stringify(e)})},async getAvailableUsers(e,n){const s=new URLSearchParams;return e&&s.set("excludeMatterId",e),n&&s.set("search",n),r(`/matters/permissions/users?${s}`)},async getAvailableGroups(e){const n=new URLSearchParams;return e&&n.set("excludeMatterId",e),r(`/matters/permissions/groups?${n}`)},async checkConflicts(e){return r("/matters/conflict-check",{method:"POST",body:JSON.stringify(e)})},async markConflictCleared(e,n){return r(`/matters/${e}/conflict-cleared`,{method:"PUT",body:JSON.stringify(n)})}},Ve={async getAll(e){const n=new URLSearchParams;return e!=null&&e.matterId&&n.set("matterId",e.matterId),e!=null&&e.userId&&n.set("userId",e.userId),e!=null&&e.startDate&&n.set("startDate",e.startDate),e!=null&&e.endDate&&n.set("endDate",e.endDate),(e==null?void 0:e.billable)!==void 0&&n.set("billable",String(e.billable)),(e==null?void 0:e.billed)!==void 0&&n.set("billed",String(e.billed)),(e==null?void 0:e.limit)!==void 0&&n.set("limit",String(e.limit)),(e==null?void 0:e.offset)!==void 0&&n.set("offset",String(e.offset)),r(`/time-entries?${n}`)},async create(e){return r("/time-entries",{method:"POST",body:JSON.stringify(e)})},async update(e,n){return r(`/time-entries/${e}`,{method:"PUT",body:JSON.stringify(n)})},async delete(e){return r(`/time-entries/${e}`,{method:"DELETE"})}},qe={async getAll(e){const n=new URLSearchParams;return e!=null&&e.clientId&&n.set("clientId",e.clientId),e!=null&&e.matterId&&n.set("matterId",e.matterId),e!=null&&e.status&&n.set("status",e.status),e!=null&&e.view&&n.set("view",e.view),r(`/invoices?${n}`)},async getById(e){return r(`/invoices/${e}`)},async create(e){return r("/invoices",{method:"POST",body:JSON.stringify(e)})},async update(e,n){return r(`/invoices/${e}`,{method:"PUT",body:JSON.stringify(n)})},async recordPayment(e,n){return r(`/invoices/${e}/payments`,{method:"POST",body:JSON.stringify(n)})},async getPayments(e){return r(`/invoices/${e}/payments`)},async getTimeEntries(e){return r(`/invoices/${e}/time-entries`)},async merge(e,n){return r(`/invoices/${e}/merge`,{method:"POST",body:JSON.stringify({mergeInvoiceIds:n})})},async syncToQuickBooks(e){return r(`/invoices/${e}/sync-quickbooks`,{method:"POST"})},async syncPaymentToQuickBooks(e,n){return r(`/invoices/${e}/payments/${n}/sync-quickbooks`,{method:"POST"})},async delete(e){return r(`/invoices/${e}`,{method:"DELETE"})}},Je={async getEvents(e){const n=new URLSearchParams;return e!=null&&e.startDate&&n.set("startDate",e.startDate),e!=null&&e.endDate&&n.set("endDate",e.endDate),e!=null&&e.matterId&&n.set("matterId",e.matterId),e!=null&&e.type&&n.set("type",e.type),r(`/calendar?${n}`)},async create(e){return r("/calendar",{method:"POST",body:JSON.stringify(e)})},async update(e,n){return r(`/calendar/${e}`,{method:"PUT",body:JSON.stringify(n)})},async delete(e){return r(`/calendar/${e}`,{method:"DELETE"})}},Be={async getAll(e){const n=new URLSearchParams;return e!=null&&e.matterId&&n.set("matterId",e.matterId),e!=null&&e.clientId&&n.set("clientId",e.clientId),e!=null&&e.search&&n.set("search",e.search),r(`/documents?${n}`)},async upload(e,n){const s=new FormData;s.append("file",e),n.matterId&&s.append("matterId",n.matterId),n.clientId&&s.append("clientId",n.clientId),n.tags&&s.append("tags",JSON.stringify(n.tags));const a={};J&&(a.Authorization=`Bearer ${J}`);const i=await fetch(`${le}/documents`,{method:"POST",headers:a,body:s,credentials:"include"});if(!i.ok){const c=await i.json().catch(()=>({error:"Upload failed"}));throw new me(i.status,c.error||"Upload failed",c)}return i.json()},async update(e,n){return r(`/documents/${e}`,{method:"PUT",body:JSON.stringify(n)})},async delete(e){return r(`/documents/${e}`,{method:"DELETE"})},getDownloadUrl(e){return`${le}/documents/${e}/download`},async download(e){const n={};J&&(n.Authorization=`Bearer ${J}`);const s=await fetch(`${le}/documents/${e}/download`,{headers:n,credentials:"include"});if(!s.ok)throw new me(s.status,"Failed to download document");return s.blob()},async getContent(e){return r(`/documents/${e}/content`)},async downloadAll(){const e={};J&&(e.Authorization=`Bearer ${J}`);const n=await fetch(`${le}/documents/download-all/zip`,{headers:e,credentials:"include"});if(!n.ok)throw new me(n.status,"Failed to download documents");return n.blob()},async extractText(e){const n=new FormData;n.append("file",e);const s={};J&&(s.Authorization=`Bearer ${J}`);const a=await fetch(`${le}/documents/extract-text`,{method:"POST",headers:s,body:n,credentials:"include"});if(!a.ok){const i=await a.json().catch(()=>({error:"Extraction failed"}));throw new me(a.status,i.error||"Extraction failed",i)}return a.json()}},ve={async getMembers(){return r("/team")},async getAttorneys(){return r("/team/attorneys")},async updateMember(e,n){return r(`/team/${e}`,{method:"PUT",body:JSON.stringify(n)})},async removeMember(e){return r(`/team/${e}`,{method:"DELETE"})},async getInvitations(){return r("/team/invitations")},async invite(e){return r("/team/invitations",{method:"POST",body:JSON.stringify(e)})},async revokeInvitation(e){return r(`/team/invitations/${e}`,{method:"DELETE"})},async getGroups(){return r("/team/groups")},async createGroup(e){return r("/team/groups",{method:"POST",body:JSON.stringify(e)})},async updateGroup(e,n){return r(`/team/groups/${e}`,{method:"PUT",body:JSON.stringify(n)})},async deleteGroup(e){return r(`/team/groups/${e}`,{method:"DELETE"})}},at={async getAll(){return r("/api-keys")},async create(e){return r("/api-keys",{method:"POST",body:JSON.stringify(e)})},async revoke(e){return r(`/api-keys/${e}`,{method:"DELETE"})}},as={async get(){return r("/firm")},async update(e){return r("/firm",{method:"PUT",body:JSON.stringify(e)})},async getDashboard(){return r("/firm/dashboard")},async getAuditLogs(e){const n=new URLSearchParams;return e!=null&&e.userId&&n.set("userId",e.userId),e!=null&&e.resourceType&&n.set("resourceType",e.resourceType),e!=null&&e.startDate&&n.set("startDate",e.startDate),e!=null&&e.endDate&&n.set("endDate",e.endDate),r(`/firm/audit-logs?${n}`)},async getNotifications(){return r("/firm/notifications")},async markNotificationRead(e){return r(`/firm/notifications/${e}/read`,{method:"PUT"})},async markAllNotificationsRead(){return r("/firm/notifications/read-all",{method:"PUT"})}},is={async get(){return r("/user-settings")},async update(e){return r("/user-settings",{method:"PUT",body:JSON.stringify(e)})},async getAISettings(){return r("/user-settings/ai")},async updateAISettings(e){return r("/user-settings/ai",{method:"PUT",body:JSON.stringify(e)})}},ue={async chat(e,n,s,a){return r("/ai/chat",{method:"POST",body:JSON.stringify({message:e,page:n,context:s,conversationHistory:a})})},async agentChat(e,n,s){return r("/v1/agent/chat",{method:"POST",body:JSON.stringify({message:e,conversationHistory:n,fileContext:s})})},async getBackgroundAgentStatus(){return r("/v1/background-agent/status")},async startBackgroundTask(e,n){return r("/v1/background-agent/tasks",{method:"POST",body:JSON.stringify({goal:e,extended:(n==null?void 0:n.extended)||!1,options:n})})},async getBackgroundTasks(e){const n=e?`?limit=${e}`:"";return r(`/v1/background-agent/tasks${n}`)},async getActiveBackgroundTask(){return r("/v1/background-agent/tasks/active")},async getBackgroundTask(e){return r(`/v1/background-agent/tasks/${e}`)},async cancelBackgroundTask(e){return r(`/v1/background-agent/tasks/${e}/cancel`,{method:"POST"})},async sendBackgroundTaskFollowUp(e,n){return r(`/v1/background-agent/tasks/${e}/followup`,{method:"POST",body:JSON.stringify({message:n})})},async getBackgroundTaskHistory(e){const n=e?`?limit=${e}`:"";return r(`/v1/background-agent/history${n}`)},async getLearnedPatterns(e){const n=e?`?limit=${e}`:"";return r(`/v1/background-agent/learnings${n}`)},async submitBackgroundTaskFeedback(e,n){return r(`/v1/background-agent/tasks/${e}/feedback`,{method:"POST",body:JSON.stringify(n)})},async getBackgroundAgentTools(){return r("/v1/background-agent/tools")},async getActiveTask(){return r("/v1/agent/tasks/active/current")},async getTask(e){return r(`/v1/agent/tasks/${e}`)},async getTasks(){return r("/v1/agent/tasks")},async cancelTask(e){return r(`/v1/agent/tasks/${e}/cancel`,{method:"POST"})},async getSuggestions(e){return r(`/ai/suggestions?page=${e}`)},async blobToBase64(e){return new Promise((n,s)=>{const a=new FileReader;a.onloadend=()=>{const i=a.result.split(",")[1];n(i)},a.onerror=s,a.readAsDataURL(e)})},async transcribeAudio(e){const n=await this.blobToBase64(e);return r("/v1/agent/voice/transcribe",{method:"POST",body:JSON.stringify({audio:n,format:"webm"})})},async synthesizeSpeech(e,n){const s={"Content-Type":"application/json"};J&&(s.Authorization=`Bearer ${J}`);const a=await fetch(`${le}/v1/agent/voice/synthesize`,{method:"POST",headers:s,body:JSON.stringify({text:e,voice:n}),credentials:"include"});if(!a.ok){const d=await a.json().catch(()=>({error:"Synthesis failed"}));throw new me(a.status,d.error||"Synthesis failed",d)}const i=await a.json();if(!i.success||!i.audio)throw new me(400,i.error||"No audio returned",i);const c=atob(i.audio),l=new Uint8Array(c.length);for(let d=0;d<c.length;d++)l[d]=c.charCodeAt(d);return new Blob([l],{type:"audio/mp3"})},async voiceChat(e,n,s){const a=await this.blobToBase64(e);return r("/v1/agent/voice/chat",{method:"POST",body:JSON.stringify({audio:a,format:"webm",voice:s||"en-US-JennyNeural",conversationHistory:n||[]})})},async getVoices(){return r("/v1/agent/voice/voices")}},Ce={async getAll(){return r("/matter-types")},async create(e){return r("/matter-types",{method:"POST",body:JSON.stringify(e)})},async update(e,n){return r(`/matter-types/${e}`,{method:"PUT",body:JSON.stringify(n)})},async delete(e){return r(`/matter-types/${e}`,{method:"DELETE"})},async seedDefaults(){return r("/matter-types/seed-defaults",{method:"POST"})}},Z={async getAll(){return r("/billing-data/all")},async getSettings(){return r("/billing-data/settings")},async updateSettings(e){return r("/billing-data/settings",{method:"PUT",body:JSON.stringify(e)})},async getInvoiceTemplates(){return r("/billing-data/invoice-templates")},async createInvoiceTemplate(e){return r("/billing-data/invoice-templates",{method:"POST",body:JSON.stringify(e)})},async updateInvoiceTemplate(e,n){return r(`/billing-data/invoice-templates/${e}`,{method:"PUT",body:JSON.stringify(n)})},async deleteInvoiceTemplate(e){return r(`/billing-data/invoice-templates/${e}`,{method:"DELETE"})},async getPaymentProcessors(){return r("/billing-data/payment-processors")},async createPaymentProcessor(e){return r("/billing-data/payment-processors",{method:"POST",body:JSON.stringify(e)})},async updatePaymentProcessor(e,n){return r(`/billing-data/payment-processors/${e}`,{method:"PUT",body:JSON.stringify(n)})},async deletePaymentProcessor(e){return r(`/billing-data/payment-processors/${e}`,{method:"DELETE"})},async getPaymentLinks(){return r("/billing-data/payment-links")},async createPaymentLink(e){return r("/billing-data/payment-links",{method:"POST",body:JSON.stringify(e)})},async updatePaymentLink(e,n){return r(`/billing-data/payment-links/${e}`,{method:"PUT",body:JSON.stringify(n)})},async getRecurringPayments(){return r("/billing-data/recurring-payments")},async createRecurringPayment(e){return r("/billing-data/recurring-payments",{method:"POST",body:JSON.stringify(e)})},async updateRecurringPayment(e,n){return r(`/billing-data/recurring-payments/${e}`,{method:"PUT",body:JSON.stringify(n)})},async deleteRecurringPayment(e){return r(`/billing-data/recurring-payments/${e}`,{method:"DELETE"})},async getTrustAccounts(){return r("/billing-data/trust-accounts")},async createTrustAccount(e){return r("/billing-data/trust-accounts",{method:"POST",body:JSON.stringify(e)})},async updateTrustAccount(e,n){return r(`/billing-data/trust-accounts/${e}`,{method:"PUT",body:JSON.stringify(n)})},async deleteTrustAccount(e){return r(`/billing-data/trust-accounts/${e}`,{method:"DELETE"})},async getTrustTransactions(e){const n=new URLSearchParams;return e!=null&&e.trustAccountId&&n.set("trustAccountId",e.trustAccountId),e!=null&&e.clientId&&n.set("clientId",e.clientId),r(`/billing-data/trust-transactions?${n}`)},async createTrustTransaction(e){return r("/billing-data/trust-transactions",{method:"POST",body:JSON.stringify(e)})},async updateTrustTransaction(e,n){return r(`/billing-data/trust-transactions/${e}`,{method:"PUT",body:JSON.stringify(n)})}},ce={async getAll(){return r("/document-templates/all/data")},async getTemplates(e){const n=new URLSearchParams;return e!=null&&e.category&&n.set("category",e.category),e!=null&&e.search&&n.set("search",e.search),r(`/document-templates?${n}`)},async getTemplate(e){return r(`/document-templates/${e}`)},async createTemplate(e){return r("/document-templates",{method:"POST",body:JSON.stringify(e)})},async updateTemplate(e,n){return r(`/document-templates/${e}`,{method:"PUT",body:JSON.stringify(n)})},async duplicateTemplate(e){return r(`/document-templates/${e}/duplicate`,{method:"POST"})},async deleteTemplate(e){return r(`/document-templates/${e}`,{method:"DELETE"})},async incrementUsage(e){return r(`/document-templates/${e}/use`,{method:"POST"})},async getGeneratedDocuments(e){const n=new URLSearchParams;return e!=null&&e.templateId&&n.set("templateId",e.templateId),e!=null&&e.matterId&&n.set("matterId",e.matterId),e!=null&&e.clientId&&n.set("clientId",e.clientId),e!=null&&e.status&&n.set("status",e.status),r(`/document-templates/generated/all?${n}`)},async createGeneratedDocument(e){return r("/document-templates/generated",{method:"POST",body:JSON.stringify(e)})},async updateGeneratedDocument(e,n){return r(`/document-templates/generated/${e}`,{method:"PUT",body:JSON.stringify(n)})},async deleteGeneratedDocument(e){return r(`/document-templates/generated/${e}`,{method:"DELETE"})}},Ie={async get(){return r("/timer")},async update(e){return r("/timer",{method:"PUT",body:JSON.stringify(e)})},async clear(){return r("/timer",{method:"DELETE"})}},Re={async getAll(){return r("/integrations")},async connectGoogle(){return r("/integrations/google/connect")},async disconnectGoogle(){return r("/integrations/google/disconnect",{method:"POST"})},async syncGoogle(){return r("/integrations/google/sync",{method:"POST"})},async connectQuickBooks(){return r("/integrations/quickbooks/connect")},async disconnectQuickBooks(){return r("/integrations/quickbooks/disconnect",{method:"POST"})},async syncQuickBooks(){return r("/integrations/quickbooks/sync",{method:"POST"})},async connectOutlook(){return r("/integrations/outlook/connect")},async disconnectOutlook(){return r("/integrations/outlook/disconnect",{method:"POST"})},async getOutlookEmails(){return r("/integrations/outlook/emails")},async getOutlookDrafts(){return r("/integrations/outlook/drafts")},async getOutlookSent(){return r("/integrations/outlook/sent")},async getOutlookEmailBody(e){return r(`/integrations/outlook/email/${e}/body`)},async sendOutlookEmail(e){return r("/integrations/outlook/send",{method:"POST",body:JSON.stringify(e)})},async saveOutlookDraft(e){return r("/integrations/outlook/drafts",{method:"POST",body:JSON.stringify(e)})},async deleteOutlookEmail(e){return r(`/integrations/outlook/email/${e}`,{method:"DELETE"})},async archiveOutlookEmail(e){return r(`/integrations/outlook/email/${e}/archive`,{method:"POST"})},async syncOutlookCalendar(){return r("/integrations/outlook/sync-calendar",{method:"POST"})},async connectOneDrive(){return r("/integrations/onedrive/connect")},async disconnectOneDrive(){return r("/integrations/onedrive/disconnect",{method:"POST"})},async syncOneDrive(){return r("/integrations/onedrive/sync",{method:"POST"})},async connectGoogleDrive(){return r("/integrations/googledrive/connect")},async disconnectGoogleDrive(){return r("/integrations/googledrive/disconnect",{method:"POST"})},async syncGoogleDrive(){return r("/integrations/googledrive/sync",{method:"POST"})},async connectDropbox(){return r("/integrations/dropbox/connect")},async disconnectDropbox(){return r("/integrations/dropbox/disconnect",{method:"POST"})},async syncDropbox(){return r("/integrations/dropbox/sync",{method:"POST"})},async connectDocuSign(){return r("/integrations/docusign/connect")},async disconnectDocuSign(){return r("/integrations/docusign/disconnect",{method:"POST"})},async syncDocuSign(){return r("/integrations/docusign/sync",{method:"POST"})},async connectSlack(){return r("/integrations/slack/connect")},async disconnectSlack(){return r("/integrations/slack/disconnect",{method:"POST"})},async syncSlack(){return r("/integrations/slack/sync",{method:"POST"})},async connectZoom(){return r("/integrations/zoom/connect")},async disconnectZoom(){return r("/integrations/zoom/disconnect",{method:"POST"})},async syncZoom(){return r("/integrations/zoom/sync",{method:"POST"})},async connectQuicken(){return r("/integrations/quicken/connect")},async disconnectQuicken(){return r("/integrations/quicken/disconnect",{method:"POST"})},async syncQuicken(){return r("/integrations/quicken/sync",{method:"POST"})},async updateSyncSettings(e,n){return r(`/integrations/${e}/settings`,{method:"PUT",body:JSON.stringify({settings:n})})},async linkEmailToMatter(e,n){return r("/integrations/outlook/link-email",{method:"POST",body:JSON.stringify({emailId:e,...n})})},async getQuickBooksInvoices(){return r("/integrations/quickbooks/invoices")},async getQuickBooksCustomers(){return r("/integrations/quickbooks/customers")},async getOneDriveFiles(){return r("/integrations/onedrive/files")},async getGoogleDriveFiles(){return r("/integrations/googledrive/files")},async getDropboxFiles(){return r("/integrations/dropbox/files")},async getDocuSignEnvelopes(){return r("/integrations/docusign/envelopes")},async getSlackChannels(){return r("/integrations/slack/channels")},async sendSlackMessage(e,n){return r("/integrations/slack/send",{method:"POST",body:JSON.stringify({channel:e,message:n})})},async getZoomMeetings(){return r("/integrations/zoom/meetings")},async getClientCommunications(e){return r(`/integrations/client/${e}/communications`)}},rs={async getConfigurations(){return r("/drive/configurations")},async getConfiguration(e){return r(`/drive/configurations/${e}`)},async createConfiguration(e){return r("/drive/configurations",{method:"POST",body:JSON.stringify(e)})},async updateConfiguration(e,n){return r(`/drive/configurations/${e}`,{method:"PUT",body:JSON.stringify(n)})},async deleteConfiguration(e){return r(`/drive/configurations/${e}`,{method:"DELETE"})},async getVersions(e){return r(`/drive/documents/${e}/versions`)},async getVersionContent(e,n){return r(`/drive/documents/${e}/versions/${n}/content`)},async createVersion(e,n){return r(`/drive/documents/${e}/versions`,{method:"POST",body:JSON.stringify(n)})},async restoreVersion(e,n){return r(`/drive/documents/${e}/versions/${n}/restore`,{method:"POST"})},async rehydrateVersion(e,n){return r(`/drive/documents/${e}/versions/${n}/rehydrate`,{method:"POST"})},async compareVersions(e,n,s){return r(`/drive/documents/${e}/compare?version1=${n}&version2=${s}`)},async acquireLock(e,n,s){return r(`/drive/documents/${e}/lock`,{method:"POST",body:JSON.stringify({lockType:n,sessionId:s})})},async sendHeartbeat(e){return r(`/drive/documents/${e}/lock/heartbeat`,{method:"POST"})},async releaseLock(e,n){return r(`/drive/documents/${e}/lock`,{method:"DELETE",body:JSON.stringify({reason:n})})},async getLockStatus(e){return r(`/drive/documents/${e}/lock`)},async getActivities(e,n,s){const a=new URLSearchParams;return n&&a.set("limit",String(n)),s&&a.set("offset",String(s)),r(`/drive/documents/${e}/activities?${a}`)},async getFolders(e,n){const s=new URLSearchParams;return e&&s.set("driveId",e),n&&s.set("path",n),r(`/drive/folders?${s}`)},async createFolder(e){return r("/drive/folders",{method:"POST",body:JSON.stringify(e)})},async renameFolder(e,n){return r(`/drive/folders/${e}`,{method:"PUT",body:JSON.stringify({name:n})})},async deleteFolder(e){return r(`/drive/folders/${e}`,{method:"DELETE"})},async browseDrive(e){const n=e?`?path=${encodeURIComponent(e)}`:"";return r(`/drive/browse${n}`)},async browseAllFiles(e){const n=new URLSearchParams;return e&&n.set("search",e),r(`/drive/browse-all?${n}`)},async syncFromAzure(){return r("/drive/sync-azure",{method:"POST"})},async downloadAzureFile(e){const n={};J&&(n.Authorization=`Bearer ${J}`);const s=await fetch(`${le}/drive/download-azure?path=${encodeURIComponent(e)}`,{headers:n,credentials:"include"});if(!s.ok){const a=await s.json().catch(()=>({error:"Download failed"}));throw new me(s.status,a.error||"Failed to download file")}return s.blob()},async getConnectionInfo(){return r("/drive/connection-info")},async getDrivePreference(){return r("/drive/user-drive-preference")},async updateDrivePreference(e){return r("/drive/user-drive-preference",{method:"PUT",body:JSON.stringify(e)})},async downloadWindowsSetupScript(e="Z"){const n={};J&&(n.Authorization=`Bearer ${J}`);const s=await fetch(`${le}/drive/setup-script/windows?driveLetter=${e}`,{headers:n,credentials:"include"});if(!s.ok)throw new me(s.status,"Failed to download script");return s.blob()},async downloadMacSetupScript(){const e={};J&&(e.Authorization=`Bearer ${J}`);const n=await fetch(`${le}/drive/setup-script/mac`,{headers:e,credentials:"include"});if(!n.ok)throw new me(n.status,"Failed to download script");return n.blob()},async downloadWindowsShortcut(){const e={};J&&(e.Authorization=`Bearer ${J}`);const n=await fetch(`${le}/drive/download-shortcut/windows`,{headers:e,credentials:"include"});if(!n.ok)throw new me(n.status,"Failed to download shortcut");return n.blob()},async downloadMacShortcut(){const e={};J&&(e.Authorization=`Bearer ${J}`);const n=await fetch(`${le}/drive/download-shortcut/mac`,{headers:e,credentials:"include"});if(!n.ok)throw new me(n.status,"Failed to download shortcut");return n.blob()}},os={async syncDrive(e){return r(`/drive-sync/sync/${e}`,{method:"POST"})},async getStatus(){return r("/drive-sync/status")},async watchFolder(e,n){return r(`/drive-sync/watch/${e}`,{method:"POST",body:JSON.stringify({folderPath:n})})}},cs={async getFolderPermissions(e,n){const s=new URLSearchParams;return e&&s.set("folderPath",e),n&&s.set("driveId",n),r(`/document-permissions/folders?${s}`)},async setFolderPermission(e){return r("/document-permissions/folders",{method:"POST",body:JSON.stringify(e)})},async deleteFolderPermission(e){return r(`/document-permissions/folders/${e}`,{method:"DELETE"})},async getDocumentPermissions(e){return r(`/document-permissions/documents/${e}`)},async setDocumentPermission(e,n){return r(`/document-permissions/documents/${e}`,{method:"POST",body:JSON.stringify(n)})},async updateDocumentPrivacy(e,n){return r(`/document-permissions/documents/${e}/privacy`,{method:"PUT",body:JSON.stringify(n)})},async deleteDocumentPermission(e,n){return r(`/document-permissions/documents/${e}/permissions/${n}`,{method:"DELETE"})},async getPreferences(){return r("/document-permissions/preferences")},async updatePreferences(e){return r("/document-permissions/preferences",{method:"PUT",body:JSON.stringify(e)})}},ls={async openDocument(e){return r(`/word-online/documents/${e}/open`,{method:"POST"})},async getActiveEditors(e){return r(`/word-online/documents/${e}/editors`)},async sendHeartbeat(e){return r(`/word-online/documents/${e}/heartbeat`,{method:"POST"})},async closeSession(e,n){return r(`/word-online/documents/${e}/close`,{method:"POST",body:JSON.stringify({changesCount:n})})},async shareDocument(e,n){return r(`/word-online/documents/${e}/share`,{method:"POST",body:JSON.stringify(n)})},async getShares(e){return r(`/word-online/documents/${e}/shared`)},async removeShare(e,n){return r(`/word-online/documents/${e}/share/${n}`,{method:"DELETE"})},async getVersionHistory(e){return r(`/word-online/documents/${e}/versions-online`)},async getRedline(e,n,s){return r(`/word-online/documents/${e}/redline?version1=${n}&version2=${s}`)},async getVersionInfo(e,n){return r(`/word-online/documents/${e}/versions/${n}`)},async downloadVersion(e,n){const s={},a=localStorage.getItem("auth_token");a&&(s.Authorization=`Bearer ${a}`);const i=await fetch(`${le}/word-online/documents/${e}/versions/${n}/download`,{headers:s,credentials:"include"});if(!i.ok){const v=await i.json().catch(()=>({error:"Download failed"}));throw new me(i.status,v.error||"Failed to download version")}const c=i.headers.get("Content-Disposition")||"";let l=`document-version-${n}`;const d=c.match(/filename="?(.+)"?/);return d&&(l=decodeURIComponent(d[1].replace(/"/g,""))),{blob:await i.blob(),filename:l}},getVersionDownloadUrl(e,n){return`${le}/word-online/documents/${e}/versions/${n}/download`},async openDesktop(e){return r(`/word-online/documents/${e}/open-desktop`,{method:"POST"})},async saveFromWord(e){return r(`/word-online/documents/${e}/save`,{method:"POST"})},async checkChanges(e){return r(`/word-online/documents/${e}/check-changes`)},async pollSync(e){return r(`/word-online/documents/${e}/poll-sync`,{method:"POST"})},async refreshToken(){return r("/word-online/token/refresh",{method:"POST"})},async getTokenStatus(){return r("/word-online/token/status")}},ds={async getStats(){return r("/admin/stats")},async getFirms(){return r("/admin/firms")},async createFirm(e){return r("/admin/firms",{method:"POST",body:JSON.stringify(e)})},async updateFirm(e,n){return r(`/admin/firms/${e}`,{method:"PUT",body:JSON.stringify(n)})},async deleteFirm(e){return r(`/admin/firms/${e}`,{method:"DELETE"})},async getUsers(e){const n=e?`?firmId=${e}`:"";return r(`/admin/users${n}`)},async createUser(e){return r("/admin/users",{method:"POST",body:JSON.stringify(e)})},async updateUser(e,n){return r(`/admin/users/${e}`,{method:"PUT",body:JSON.stringify(n)})},async deleteUser(e){return r(`/admin/users/${e}`,{method:"DELETE"})}},us={async getFirmDashboard(e="current_month"){return r(`/analytics/firm-dashboard?time_period=${e}`)},async getFirmSummary(e="current_month"){return r(`/analytics/firm-summary?time_period=${e}`)},async getKpis(){return r("/analytics/kpis")},async getAttorneyProduction(){return r("/analytics/attorney-production")}},ms={async getConnectionStatus(){return r("/stripe/connect/status")},async getOAuthUrl(){return r("/stripe/connect/oauth-url")},async handleCallback(e,n){return r("/stripe/connect/callback",{method:"POST",body:JSON.stringify({code:e,state:n})})},async acceptCompliance(){return r("/stripe/connect/accept-compliance",{method:"POST"})},async updateSettings(e){return r("/stripe/connect/settings",{method:"PUT",body:JSON.stringify(e)})},async disconnect(){return r("/stripe/connect/disconnect",{method:"POST"})},async getTransactions(e){const n=new URLSearchParams;return e!=null&&e.status&&n.set("status",e.status),e!=null&&e.limit&&n.set("limit",e.limit.toString()),e!=null&&e.offset&&n.set("offset",e.offset.toString()),r(`/stripe/connect/transactions?${n.toString()}`)},async getStats(){return r("/stripe/connect/stats")}},gs={async getPreferences(){return r("/notifications/preferences")},async updatePreferences(e){return r("/notifications/preferences",{method:"PUT",body:JSON.stringify(e)})},async getNotifications(e){const n=new URLSearchParams;return e!=null&&e.limit&&n.append("limit",e.limit.toString()),e!=null&&e.unread_only&&n.append("unread_only","true"),r(`/notifications?${n.toString()}`)},async create(e){return r("/notifications",{method:"POST",body:JSON.stringify(e)})},async markAsRead(e){return r(`/notifications/${e}/read`,{method:"PUT"})},async markAllAsRead(){return r("/notifications/read-all",{method:"PUT"})},async delete(e){return r(`/notifications/${e}`,{method:"DELETE"})},async testSms(e){return r("/notifications/test-sms",{method:"POST",body:JSON.stringify({phone:e})})},async getTemplates(){return r("/notifications/templates")}},jn={auth:De,clients:Me,matters:Ue,matterTypes:Ce,timeEntries:Ve,invoices:qe,calendar:Je,documents:Be,team:ve,firm:as,ai:ue,userSettings:is,integrations:Re,admin:ds,billingData:Z,documentTemplates:ce,timer:Ie,drive:rs,driveSync:os,documentPermissions:cs,wordOnline:ls,analytics:us,stripe:ms,notifications:gs},Zd=Object.freeze(Object.defineProperty({__proto__:null,ApiError:me,adminApi:ds,aiApi:ue,analyticsApi:us,apiKeysApi:at,authApi:De,billingDataApi:Z,calendarApi:Je,clientsApi:Me,default:jn,documentPermissionsApi:cs,documentTemplatesApi:ce,documentsApi:Be,driveApi:rs,driveSyncApi:os,firmApi:as,getAccessToken:Pn,integrationsApi:Re,invoicesApi:qe,matterTypesApi:Ce,mattersApi:Ue,notificationsApi:gs,setAccessToken:Oe,stripeApi:ms,teamApi:ve,timeEntriesApi:Ve,timerApi:Ie,userSettingsApi:is,wordOnlineApi:ls},Symbol.toStringTag,{value:"Module"})),st={owner:["firm:manage","firm:billing","firm:delete","users:invite","users:manage","users:delete","groups:manage","matters:create","matters:view","matters:edit","matters:delete","matters:assign","clients:create","clients:view","clients:edit","clients:delete","billing:create","billing:view","billing:edit","billing:delete","billing:approve","documents:upload","documents:view","documents:edit","documents:delete","calendar:create","calendar:view","calendar:edit","calendar:delete","reports:view","reports:create","reports:export","integrations:manage","audit:view"],admin:["users:invite","users:manage","groups:manage","matters:create","matters:view","matters:edit","matters:delete","matters:assign","clients:create","clients:view","clients:edit","clients:delete","billing:create","billing:view","billing:edit","billing:approve","documents:upload","documents:view","documents:edit","documents:delete","calendar:create","calendar:view","calendar:edit","calendar:delete","reports:view","reports:create","reports:export","integrations:manage","audit:view"],attorney:["matters:create","matters:view","matters:edit","clients:create","clients:view","clients:edit","billing:create","billing:view","documents:upload","documents:view","documents:edit","calendar:create","calendar:view","calendar:edit","reports:view"],paralegal:["matters:view","matters:edit","clients:view","billing:view","documents:upload","documents:view","documents:edit","calendar:create","calendar:view","calendar:edit"],staff:["matters:view","clients:view","documents:view","calendar:create","calendar:view","calendar:edit"],billing:["matters:view","clients:view","billing:create","billing:view","billing:edit","billing:approve","reports:view","reports:create","reports:export"],readonly:["matters:view","clients:view","documents:view","calendar:view","reports:view"]},ct=rt()(zs((e,n)=>({user:null,firm:null,isAuthenticated:!1,isLoading:!1,twoFactorRequired:!1,twoFactorVerified:!1,twoFactorSetup:null,sessions:[],auditLog:[],teamMembers:[],invitations:[],userPermissions:[],login:async(s,a)=>{e({isLoading:!0});try{const i=await De.login(s,a);if(i.requires2FA)return e({isLoading:!1,twoFactorRequired:!0}),{requires2FA:!0};const c={id:i.user.id,email:i.user.email,firstName:i.user.firstName,lastName:i.user.lastName,role:i.user.role,groupIds:i.user.groupIds||[],permissions:i.user.permissions||[],isActive:!0,createdAt:i.user.createdAt,updatedAt:i.user.createdAt},l=i.firm?{id:i.firm.id,name:i.firm.name,address:i.firm.address,city:i.firm.city,state:i.firm.state,zipCode:i.firm.zipCode,phone:i.firm.phone,email:i.firm.email,website:i.firm.website,billingDefaults:i.firm.billingDefaults,createdAt:i.firm.createdAt,updatedAt:i.firm.updatedAt}:null;return e({user:c,firm:l,isAuthenticated:!0,isLoading:!1,twoFactorRequired:!1,twoFactorVerified:!0,userPermissions:st[c.role]}),Oe(i.accessToken),{requires2FA:!1}}catch(i){if(s==="demo@apex.law"||s==="admin@apex.law"){const c={id:"demo-user-1",email:s,firstName:"Demo",lastName:"User",role:"owner",groupIds:[],permissions:[],isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},l={id:"demo-firm-1",name:"Demo Law Firm",address:"123 Legal Way",city:"San Francisco",state:"CA",billingDefaults:{hourlyRate:350,incrementMinutes:6,paymentTerms:30,currency:"USD"},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return e({user:c,firm:l,isAuthenticated:!0,isLoading:!1,twoFactorRequired:!1,twoFactorVerified:!0,userPermissions:st.owner}),{requires2FA:!1}}throw e({isLoading:!1}),i}},verify2FA:async s=>s.length===6?(e({isAuthenticated:!0,twoFactorRequired:!1,twoFactorVerified:!0}),!0):!1,logout:async()=>{try{await De.logout()}catch(s){console.error("Logout error:",s)}finally{Oe(null),e({user:null,firm:null,isAuthenticated:!1,twoFactorRequired:!1,twoFactorVerified:!1,teamMembers:[],userPermissions:[],sessions:[]})}},register:async s=>{e({isLoading:!0});try{const a=await De.register(s),i={id:a.user.id,email:a.user.email,firstName:a.user.firstName,lastName:a.user.lastName,role:a.user.role,groupIds:[],permissions:[],isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},c=a.firm?{id:a.firm.id,name:a.firm.name,billingDefaults:{hourlyRate:350,incrementMinutes:6,paymentTerms:30,currency:"USD"},createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}:null;Oe(a.accessToken),e({user:i,firm:c,isAuthenticated:!0,isLoading:!1,userPermissions:st.owner})}catch(a){throw e({isLoading:!1}),a}},checkAuth:async()=>{try{const s=await De.getMe();if(s.user){const a={id:s.user.id,email:s.user.email,firstName:s.user.firstName,lastName:s.user.lastName,role:s.user.role,groupIds:s.user.groupIds||[],permissions:s.user.permissions||[],isActive:!0,createdAt:s.user.createdAt,updatedAt:s.user.createdAt},i=s.firm?{id:s.firm.id,name:s.firm.name,address:s.firm.address,city:s.firm.city,state:s.firm.state,zipCode:s.firm.zipCode,phone:s.firm.phone,email:s.firm.email,website:s.firm.website,billingDefaults:s.firm.billingDefaults,createdAt:s.firm.createdAt,updatedAt:s.firm.updatedAt}:null;return e({user:a,firm:i,isAuthenticated:!0,twoFactorVerified:!0,userPermissions:st[a.role]}),!0}}catch(s){console.error("Auth check failed:",s)}return e({user:null,firm:null,isAuthenticated:!1}),!1},setupFirm:s=>{const{firm:a}=n();a&&e({firm:{...a,...s}})},updateFirm:s=>{const{firm:a}=n();a&&e({firm:{...a,...s}})},updateUser:s=>{const{user:a}=n();a&&e({user:{...a,...s}})},updatePassword:async(s,a)=>{try{return await De.updatePassword(s,a),!0}catch(i){return console.error("Password update failed:",i),!1}},enable2FA:async s=>{const a={enabled:!0,method:s,verifiedAt:new Date().toISOString(),backupCodes:n().generateBackupCodes()};return e({twoFactorSetup:a}),s==="authenticator"?{secret:"JBSWY3DPEHPK3PXP",qrCode:"otpauth://totp/Apex:user@apex.law?secret=JBSWY3DPEHPK3PXP&issuer=Apex"}:{}},disable2FA:()=>{e({twoFactorSetup:null})},generateBackupCodes:()=>Array.from({length:10},()=>Math.random().toString(36).substring(2,6).toUpperCase()+"-"+Math.random().toString(36).substring(2,6).toUpperCase()),getSessions:()=>n().sessions,revokeSession:async s=>{try{await De.revokeSession(s),e(a=>({sessions:a.sessions.filter(i=>i.id!==s)}))}catch(a){console.error("Revoke session failed:",a)}},revokeAllOtherSessions:async()=>{try{await De.revokeAllSessions(),e(s=>({sessions:s.sessions.filter(a=>a.isCurrent)}))}catch(s){console.error("Revoke sessions failed:",s)}},loadTeamMembers:async()=>{try{const s=await ve.getMembers();e({teamMembers:s.teamMembers})}catch(s){console.error("Load team members failed:",s)}},inviteUser:async s=>{const i=(await ve.invite(s)).invitation;return e(c=>({invitations:[...c.invitations,i]})),i},resendInvitation:s=>{e(a=>({invitations:a.invitations.map(i=>i.id===s?{...i,expiresAt:new Date(Date.now()+7*24*60*60*1e3).toISOString()}:i)}))},revokeInvitation:async s=>{try{await ve.revokeInvitation(s),e(a=>({invitations:a.invitations.map(i=>i.id===s?{...i,status:"revoked"}:i)}))}catch(a){console.error("Revoke invitation failed:",a)}},updateTeamMember:async(s,a)=>{try{await ve.updateMember(s,a),e(i=>({teamMembers:i.teamMembers.map(c=>c.id===s?{...c,...a}:c)}))}catch(i){console.error("Update team member failed:",i)}},removeTeamMember:async s=>{try{await ve.removeMember(s),e(a=>({teamMembers:a.teamMembers.filter(i=>i.id!==s)}))}catch(a){console.error("Remove team member failed:",a)}},hasPermission:s=>{const{userPermissions:a,user:i}=n();return(i==null?void 0:i.role)==="owner"?!0:a.includes(s)},canAccessMatter:s=>{const{user:a,hasPermission:i}=n();return a?!!i("matters:view"):!1},canAccessClient:s=>{const{user:a,hasPermission:i}=n();return a?!!i("clients:view"):!1},logAction:(s,a,i,c)=>{},getAuditLog:s=>[]}),{name:"apex-auth",partialize:e=>({isAuthenticated:e.isAuthenticated})})),ps=o.createContext(null);function kn({children:e}){const[n,s]=o.useState(!1),[a,i]=o.useState(0),[c,l]=o.useState(null),d=v=>{i(P=>P+1),l(v||null),s(!0)},u=()=>{s(!1),l(null)};return t.jsx(ps.Provider,{value:{isOpen:n,openChat:d,closeChat:u,refreshSuggestions:a,chatContext:c},children:e})}function lt(){const e=o.useContext(ps);if(!e)throw new Error("useAIChat must be used within AIChatProvider");return e}const pt=[{id:"1",value:"litigation",label:"Litigation",active:!0,createdAt:new Date().toISOString()},{id:"2",value:"corporate",label:"Corporate",active:!0,createdAt:new Date().toISOString()},{id:"3",value:"real_estate",label:"Real Estate",active:!0,createdAt:new Date().toISOString()},{id:"4",value:"intellectual_property",label:"Intellectual Property",active:!0,createdAt:new Date().toISOString()},{id:"5",value:"employment",label:"Employment",active:!0,createdAt:new Date().toISOString()},{id:"6",value:"personal_injury",label:"Personal Injury",active:!0,createdAt:new Date().toISOString()},{id:"7",value:"estate_planning",label:"Estate Planning",active:!0,createdAt:new Date().toISOString()},{id:"8",value:"family",label:"Family Law",active:!0,createdAt:new Date().toISOString()},{id:"9",value:"criminal",label:"Criminal",active:!0,createdAt:new Date().toISOString()},{id:"10",value:"immigration",label:"Immigration",active:!0,createdAt:new Date().toISOString()},{id:"11",value:"bankruptcy",label:"Bankruptcy",active:!0,createdAt:new Date().toISOString()},{id:"12",value:"tax",label:"Tax",active:!0,createdAt:new Date().toISOString()},{id:"13",value:"other",label:"Other",active:!0,createdAt:new Date().toISOString()}],ht=5*60*1e3,hs=rt()((e,n)=>({clients:[],matters:[],timeEntries:[],expenses:[],invoices:[],events:[],documents:[],apiKeys:[],groups:[],notifications:[],matterTypes:pt,documentsLastFetched:null,mattersLastFetched:null,clientsLastFetched:null,isLoading:!1,documentsLoading:!1,mattersLoading:!1,clientsLoading:!1,error:null,isDocumentsCacheValid:()=>{const{documentsLastFetched:s,documents:a}=n();return!s||a.length===0?!1:Date.now()-s<ht},isMattersCacheValid:()=>{const{mattersLastFetched:s,matters:a}=n();return!s||a.length===0?!1:Date.now()-s<ht},isClientsCacheValid:()=>{const{clientsLastFetched:s,clients:a}=n();return!s||a.length===0?!1:Date.now()-s<ht},invalidateDocumentsCache:()=>{e({documentsLastFetched:null})},fetchClients:async s=>{const{isClientsCacheValid:a}=n();if(!(!(s!=null&&s.forceRefresh)&&a())){e({clientsLoading:!0,error:null});try{const i=await Me.getAll({view:(s==null?void 0:s.view)||"my"});e({clients:i.clients,clientsLoading:!1,clientsLastFetched:Date.now()})}catch(i){console.error("Failed to fetch clients:",i),e({error:"Failed to fetch clients",clientsLoading:!1})}}},fetchMatters:async s=>{const{isMattersCacheValid:a}=n();if(!(!(s!=null&&s.forceRefresh)&&a())){e({mattersLoading:!0,error:null});try{const i=await Ue.getAll({view:(s==null?void 0:s.view)||"my"});e({matters:i.matters,mattersLoading:!1,mattersLastFetched:Date.now()})}catch(i){console.error("Failed to fetch matters:",i),e({error:"Failed to fetch matters",mattersLoading:!1})}}},fetchTimeEntries:async s=>{e({isLoading:!0,error:null});try{const a=await Ve.getAll(s);e({timeEntries:a.timeEntries,isLoading:!1})}catch(a){console.error("Failed to fetch time entries:",a),e({error:"Failed to fetch time entries",isLoading:!1})}},fetchInvoices:async s=>{e({isLoading:!0,error:null});try{const a=await qe.getAll({view:(s==null?void 0:s.view)||"my"});e({invoices:a.invoices,isLoading:!1})}catch(a){console.error("Failed to fetch invoices:",a),e({error:"Failed to fetch invoices",isLoading:!1})}},fetchEvents:async s=>{e({isLoading:!0,error:null});try{const a=await Je.getEvents(s);e({events:a.events,isLoading:!1})}catch(a){console.error("Failed to fetch events:",a),e({error:"Failed to fetch events",isLoading:!1})}},fetchDocuments:async s=>{const{isDocumentsCacheValid:a,documents:i}=n();if(!(s!=null&&s.forceRefresh)&&!(s!=null&&s.matterId)&&a())return;const c=i.length===0;e({documentsLoading:!0,isLoading:c,error:null});try{const l=await Be.getAll(s);e({documents:l.documents,documentsLoading:!1,isLoading:!1,documentsLastFetched:s!=null&&s.matterId?n().documentsLastFetched:Date.now()})}catch(l){console.error("Failed to fetch documents:",l),e({error:"Failed to fetch documents",documentsLoading:!1,isLoading:!1})}},addClient:async s=>{const a=await Me.create(s);return e(i=>({clients:[...i.clients,a]})),a},updateClient:async(s,a)=>{await Me.update(s,a),e(i=>({clients:i.clients.map(c=>c.id===s?{...c,...a}:c)}))},deleteClient:async s=>{await Me.delete(s),e(a=>({clients:a.clients.filter(i=>i.id!==s)}))},addMatter:async s=>{const a=await Ue.create(s);return e(i=>({matters:[...i.matters,a]})),a},updateMatter:async(s,a)=>{await Ue.update(s,a),e(i=>({matters:i.matters.map(c=>c.id===s?{...c,...a}:c)}))},deleteMatter:async s=>{await Ue.delete(s),e(a=>({matters:a.matters.filter(i=>i.id!==s)}))},addTimeEntry:async s=>{const a=await Ve.create(s);return e(i=>({timeEntries:[...i.timeEntries,a]})),a},updateTimeEntry:async(s,a)=>{await Ve.update(s,a),e(i=>({timeEntries:i.timeEntries.map(c=>c.id===s?{...c,...a}:c)}))},deleteTimeEntry:async s=>{await Ve.delete(s),e(a=>({timeEntries:a.timeEntries.filter(i=>i.id!==s)}))},addInvoice:async s=>{const a=await qe.create(s);return e(i=>({invoices:[...i.invoices,a]})),a},updateInvoice:async(s,a)=>{await qe.update(s,a),e(i=>({invoices:i.invoices.map(c=>c.id===s?{...c,...a}:c)}))},deleteInvoice:async s=>{await qe.delete(s),e(a=>({invoices:a.invoices.filter(i=>i.id!==s)}))},addEvent:async s=>{const a=await Je.create(s);return e(i=>({events:[...i.events,a]})),a},updateEvent:async(s,a)=>{await Je.update(s,a),e(i=>({events:i.events.map(c=>c.id===s?{...c,...a}:c)}))},deleteEvent:async s=>{await Je.delete(s),e(a=>({events:a.events.filter(i=>i.id!==s)}))},addDocument:async(s,a)=>{const i=await Be.upload(s,a);return e(c=>({documents:[...c.documents,i],documentsLastFetched:null})),i},deleteDocument:async s=>{await Be.delete(s),e(a=>({documents:a.documents.filter(i=>i.id!==s),documentsLastFetched:null}))},markNotificationRead:s=>{e(a=>({notifications:a.notifications.map(i=>i.id===s?{...i,read:!0}:i)}))},clearNotifications:()=>{e({notifications:[]})},fetchAPIKeys:async()=>{try{const s=await at.getAll(),a=s.apiKeys||s.data||[];e({apiKeys:a})}catch(s){console.error("Failed to fetch API keys:",s)}},addAPIKey:async s=>{try{const a=await at.create(s),i=a.apiKey||a;return e(c=>({apiKeys:[...c.apiKeys,i]})),i}catch(a){throw console.error("Failed to create API key:",a),a}},deleteAPIKey:async s=>{try{await at.revoke(s),e(a=>({apiKeys:a.apiKeys.filter(i=>i.id!==s)}))}catch(a){throw console.error("Failed to revoke API key:",a),a}},fetchGroups:async()=>{try{const s=await ve.getGroups(),a=s.groups||s.data||(Array.isArray(s)?s:[]);e({groups:a})}catch(s){console.error("Failed to fetch groups:",s)}},addGroup:async s=>{try{const a=await ve.createGroup(s),i=a.group||a.data||a;return e(c=>({groups:[...c.groups,i]})),i}catch{const i={id:crypto.randomUUID(),...s,createdAt:new Date().toISOString()};return e(c=>({groups:[...c.groups,i]})),i}},updateGroup:async(s,a)=>{try{await ve.updateGroup(s,a),e(i=>({groups:i.groups.map(c=>c.id===s?{...c,...a}:c)}))}catch(i){console.error("Failed to update group:",i),e(c=>({groups:c.groups.map(l=>l.id===s?{...l,...a}:l)}))}},deleteGroup:async s=>{try{await ve.deleteGroup(s),e(a=>({groups:a.groups.filter(i=>i.id!==s)}))}catch(a){console.error("Failed to delete group:",a),e(i=>({groups:i.groups.filter(c=>c.id!==s)}))}},fetchMatterTypes:async()=>{try{const s=await Ce.getAll();if(s.matterTypes&&s.matterTypes.length>0)e({matterTypes:s.matterTypes});else{await Ce.seedDefaults();const a=await Ce.getAll();e({matterTypes:a.matterTypes||pt})}}catch(s){console.error("Failed to fetch matter types:",s)}},addMatterType:async s=>{try{const a=await Ce.create(s);e(i=>({matterTypes:[...i.matterTypes,a]}))}catch(a){throw console.error("Failed to add matter type:",a),a}},updateMatterType:async(s,a)=>{try{const i=await Ce.update(s,a);e(c=>({matterTypes:c.matterTypes.map(l=>l.id===s?{...l,...i}:l)}))}catch(i){throw console.error("Failed to update matter type:",i),i}},deleteMatterType:async s=>{try{await Ce.delete(s),e(a=>({matterTypes:a.matterTypes.filter(i=>i.id!==s)}))}catch(a){throw console.error("Failed to delete matter type:",a),a}},toggleMatterTypeActive:async s=>{const{matterTypes:a}=n(),i=a.find(c=>c.id===s);if(i)try{await Ce.update(s,{active:!i.active}),e(c=>({matterTypes:c.matterTypes.map(l=>l.id===s?{...l,active:!l.active}:l)}))}catch(c){throw console.error("Failed to toggle matter type:",c),c}},getMatterTypeOptions:()=>{const{matterTypes:s}=n();return s.filter(a=>a.active).map(a=>({value:a.value,label:a.label}))},clearAll:()=>{e({clients:[],matters:[],timeEntries:[],expenses:[],invoices:[],events:[],documents:[],apiKeys:[],groups:[],notifications:[],matterTypes:pt,documentsLastFetched:null,mattersLastFetched:null,clientsLastFetched:null})}})),fs=o.createContext(null),Ct={isRunning:!1,isPaused:!1,matterId:null,matterName:null,clientId:null,clientName:null,startTime:null,pausedAt:null,accumulatedTime:0,elapsed:0};function An({children:e}){const{matters:n,clients:s}=hs(),[a,i]=o.useState(Ct),[c,l]=o.useState(!1),d=o.useRef(null);o.useEffect(()=>{(async()=>{try{const y=await Ie.get();if(y&&y.startTime){const I=new Date(y.startTime),L=y.accumulatedSeconds||0;y.isRunning&&!y.isPaused?i({isRunning:!0,isPaused:!1,matterId:y.matterId,matterName:y.matterName,clientId:y.clientId,clientName:y.clientName,startTime:I,pausedAt:null,accumulatedTime:L,elapsed:L+Math.floor((Date.now()-I.getTime())/1e3)}):y.isPaused&&i({isRunning:!0,isPaused:!0,matterId:y.matterId,matterName:y.matterName,clientId:y.clientId,clientName:y.clientName,startTime:I,pausedAt:y.pausedAt?new Date(y.pausedAt):null,accumulatedTime:L,elapsed:L})}}catch(y){console.error("Failed to load timer state:",y)}l(!0)})()},[]);const u=o.useCallback(async g=>{c&&(d.current&&clearTimeout(d.current),d.current=setTimeout(async()=>{var y,I;try{g.startTime?await Ie.update({isRunning:g.isRunning,isPaused:g.isPaused,matterId:g.matterId,matterName:g.matterName,clientId:g.clientId,clientName:g.clientName,startTime:(y=g.startTime)==null?void 0:y.toISOString(),pausedAt:((I=g.pausedAt)==null?void 0:I.toISOString())||null,accumulatedSeconds:g.accumulatedTime}):await Ie.clear()}catch(L){console.error("Failed to save timer state:",L)}},1e3))},[c]);o.useEffect(()=>{c&&(a.isRunning||a.isPaused||a.startTime)&&u(a)},[a.isRunning,a.isPaused,a.matterId,a.startTime,a.accumulatedTime,c,u]),o.useEffect(()=>{let g;return a.isRunning&&!a.isPaused&&a.startTime&&(g=setInterval(()=>{i(y=>{var I;return{...y,elapsed:y.accumulatedTime+Math.floor((Date.now()-(((I=y.startTime)==null?void 0:I.getTime())||Date.now()))/1e3)}})},1e3)),()=>clearInterval(g)},[a.isRunning,a.isPaused,a.startTime]);const v=o.useCallback(async g=>{let y=g.matterName,I=g.clientName;if(g.matterId&&!y){const _=n.find(T=>T.id===g.matterId);y=(_==null?void 0:_.name)||"Unknown Matter"}if(g.clientId&&!I){const _=s.find(T=>T.id===g.clientId);I=(_==null?void 0:_.name)||(_==null?void 0:_.displayName)||"Unknown Client"}const L=new Date,k={isRunning:!0,isPaused:!1,matterId:g.matterId||null,matterName:y||null,clientId:g.clientId||null,clientName:I||null,startTime:L,pausedAt:null,accumulatedTime:0,elapsed:0};i(k);try{await Ie.update({isRunning:!0,isPaused:!1,matterId:g.matterId||null,matterName:y||null,clientId:g.clientId||null,clientName:I||null,startTime:L.toISOString(),pausedAt:null,accumulatedSeconds:0})}catch(_){console.error("Failed to save timer start:",_)}},[n,s]),P=o.useCallback(async()=>{i(g=>{var L,k;if(!g.isRunning||g.isPaused)return g;const y=g.accumulatedTime+Math.floor((Date.now()-(((L=g.startTime)==null?void 0:L.getTime())||Date.now()))/1e3),I={...g,isRunning:!0,isPaused:!0,pausedAt:new Date,accumulatedTime:y,elapsed:y};return Ie.update({isRunning:!0,isPaused:!0,matterId:g.matterId,matterName:g.matterName,clientId:g.clientId,clientName:g.clientName,startTime:((k=g.startTime)==null?void 0:k.toISOString())||null,pausedAt:I.pausedAt.toISOString(),accumulatedSeconds:y}).catch(_=>console.error("Failed to save pause state:",_)),I})},[]),b=o.useCallback(async()=>{i(g=>{if(!g.isPaused)return g;const y={...g,isRunning:!0,isPaused:!1,startTime:new Date,pausedAt:null};return Ie.update({isRunning:!0,isPaused:!1,matterId:g.matterId,matterName:g.matterName,clientId:g.clientId,clientName:g.clientName,startTime:y.startTime.toISOString(),pausedAt:null,accumulatedSeconds:g.accumulatedTime}).catch(I=>console.error("Failed to save resume state:",I)),y})},[]),D=o.useCallback(async()=>{var g;i(y=>({...y,isRunning:!1,isPaused:!1}));try{await Ie.update({isRunning:!1,isPaused:!1,matterId:a.matterId,matterName:a.matterName,clientId:a.clientId,clientName:a.clientName,startTime:((g=a.startTime)==null?void 0:g.toISOString())||null,pausedAt:null,accumulatedSeconds:a.accumulatedTime})}catch(y){console.error("Failed to save stop state:",y)}},[a]),F=o.useCallback(async()=>{i(Ct);try{await Ie.clear()}catch(g){console.error("Failed to clear timer:",g)}},[]),G=a.isRunning||a.elapsed>0;return t.jsx(fs.Provider,{value:{timer:a,startTimer:v,pauseTimer:P,resumeTimer:b,stopTimer:D,discardTimer:F,isTimerActive:G},children:e})}function In(){const e=o.useContext(fs);if(!e)throw new Error("useTimer must be used within a TimerProvider");return e}function En(e){const n=Math.floor(e/3600),s=Math.floor(e%3600/60),a=e%60;return`${n}:${String(s).padStart(2,"0")}:${String(a).padStart(2,"0")}`}function Yd(e){return Math.round(e/3600*100)/100}const Nn="_errorContainer_zdg55_2",Dn="_errorCard_zdg55_11",Cn="_errorIcon_zdg55_21",On="_errorTitle_zdg55_33",zn="_errorMessage_zdg55_40",Ln="_persistentError_zdg55_47",$n="_errorActions_zdg55_60",Bn="_primaryBtn_zdg55_67",Rn="_secondaryBtn_zdg55_68",Fn="_supportText_zdg55_146",ke={errorContainer:Nn,errorCard:Dn,errorIcon:Cn,errorTitle:On,errorMessage:zn,persistentError:Ln,errorActions:$n,primaryBtn:Bn,secondaryBtn:Rn,supportText:Fn};class Mn extends o.Component{constructor(s){super(s);tt(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});tt(this,"handleGoHome",()=>{window.location.href="/"});tt(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,a){var i,c;console.error("ErrorBoundary caught an error:",s,a),this.setState(l=>({errorInfo:a,errorCount:l.errorCount+1})),(c=(i=this.props).onError)==null||c.call(i,s,a),this.logErrorToService(s,a)}logErrorToService(s,a){try{const i={message:s.message,stack:s.stack,componentStack:a.componentStack,url:window.location.href,timestamp:new Date().toISOString(),userAgent:navigator.userAgent};fetch("/api/errors/report",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).catch(()=>{})}catch{}}render(){if(this.state.hasError){if(this.props.fallback)return this.props.fallback;const{error:s,errorInfo:a,errorCount:i}=this.state;return t.jsx("div",{className:ke.errorContainer,children:t.jsxs("div",{className:ke.errorCard,children:[t.jsx("div",{className:ke.errorIcon,children:t.jsx(qt,{size:48})}),t.jsx("h1",{className:ke.errorTitle,children:"Something went wrong"}),t.jsx("p",{className:ke.errorMessage,children:"We apologize for the inconvenience. An unexpected error has occurred."}),i>2&&t.jsxs("div",{className:ke.persistentError,children:[t.jsx(Ls,{size:16}),t.jsxs("span",{children:["This error has occurred ",i," times. Consider refreshing the page."]})]}),t.jsxs("div",{className:ke.errorActions,children:[t.jsxs("button",{className:ke.primaryBtn,onClick:this.handleRetry,children:[t.jsx(Tt,{size:16}),"Try Again"]}),t.jsxs("button",{className:ke.secondaryBtn,onClick:this.handleGoHome,children:[t.jsx($s,{size:16}),"Go to Dashboard"]})]}),!1,t.jsxs("p",{className:ke.supportText,children:["If this problem persists, please contact support with error reference:",t.jsx("code",{children:Date.now().toString(36).toUpperCase()})]})]})})}return this.props.children}}const Un="_container_rrle0_1",Vn="_toast_rrle0_14",qn="_slideIn_rrle0_1",Jn="_exiting_rrle0_27",Gn="_slideOut_rrle0_1",Hn="_iconWrapper_rrle0_53",Kn="_content_rrle0_63",Wn="_title_rrle0_68",Qn="_message_rrle0_75",Zn="_actionBtn_rrle0_82",Yn="_closeBtn_rrle0_99",Xn="_success_rrle0_121",ea="_error_rrle0_129",ta="_warning_rrle0_137",sa="_info_rrle0_145",na="_slideUp_rrle0_1",aa="_slideDown_rrle0_1",Ae={container:Un,toast:Vn,slideIn:qn,exiting:Jn,slideOut:Gn,iconWrapper:Hn,content:Kn,title:Wn,message:Qn,actionBtn:Zn,closeBtn:Yn,success:Xn,error:ea,warning:ta,info:sa,slideUp:na,slideDown:aa},ys=o.createContext(null);function Xd(){const e=o.useContext(ys);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function ia({children:e}){const[n,s]=o.useState([]),a=o.useCallback(v=>{s(P=>P.filter(b=>b.id!==v))},[]),i=o.useCallback(v=>{const P=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,b={...v,id:P,duration:v.duration??5e3};return s(D=>[...D,b]),P},[]),c=o.useCallback((v,P)=>i({type:"success",title:v,message:P}),[i]),l=o.useCallback((v,P)=>i({type:"error",title:v,message:P,duration:8e3}),[i]),d=o.useCallback((v,P)=>i({type:"warning",title:v,message:P}),[i]),u=o.useCallback((v,P)=>i({type:"info",title:v,message:P}),[i]);return t.jsxs(ys.Provider,{value:{toasts:n,addToast:i,removeToast:a,success:c,error:l,warning:d,info:u},children:[e,t.jsx(ra,{toasts:n,removeToast:a})]})}function ra({toasts:e,removeToast:n}){return t.jsx("div",{className:Ae.container,children:e.map(s=>t.jsx(oa,{toast:s,onClose:()=>n(s.id)},s.id))})}function oa({toast:e,onClose:n}){const[s,a]=o.useState(!1);o.useEffect(()=>{if(e.duration&&e.duration>0){const l=setTimeout(()=>{a(!0),setTimeout(n,300)},e.duration);return()=>clearTimeout(l)}},[e.duration,n]);const i=()=>{a(!0),setTimeout(n,300)},c={success:t.jsx(wt,{size:20}),error:t.jsx(jt,{size:20}),warning:t.jsx(qt,{size:20}),info:t.jsx(Bs,{size:20})};return t.jsxs("div",{className:`${Ae.toast} ${Ae[e.type]} ${s?Ae.exiting:""}`,children:[t.jsx("div",{className:Ae.iconWrapper,children:c[e.type]}),t.jsxs("div",{className:Ae.content,children:[t.jsx("div",{className:Ae.title,children:e.title}),e.message&&t.jsx("div",{className:Ae.message,children:e.message}),e.action&&t.jsx("button",{className:Ae.actionBtn,onClick:e.action.onClick,children:e.action.label})]}),t.jsx("button",{className:Ae.closeBtn,onClick:i,children:t.jsx(Se,{size:16})})]})}const Ot={defaultPaymentTerms:30,lateFeeEnabled:!0,lateFeePercent:1.5,lateFeeGraceDays:5,autoSendReminders:!0,reminderDays:[7,3,1,0],acceptCreditCards:!0,acceptACH:!0,surchargeEnabled:!1,surchargePercent:3},ca=rt()((e,n)=>({isLoading:!1,isInitialized:!1,trustAccounts:[],trustTransactions:[],clientLedgers:{},paymentProcessors:[],paymentLinks:[],recurringPayments:[],invoiceTemplates:[],billingSettings:Ot,fetchAll:async()=>{if(!n().isLoading){e({isLoading:!0});try{const s=await Z.getAll();e({trustAccounts:s.trustAccounts||[],trustTransactions:s.trustTransactions||[],paymentProcessors:s.paymentProcessors||[],paymentLinks:s.paymentLinks||[],recurringPayments:s.recurringPayments||[],invoiceTemplates:s.invoiceTemplates||[],billingSettings:s.billingSettings||Ot,isInitialized:!0,isLoading:!1})}catch(s){console.error("Failed to fetch billing data:",s),e({isLoading:!1,isInitialized:!0})}}},addTrustAccount:async s=>{const a=await Z.createTrustAccount(s);return e(i=>({trustAccounts:[...i.trustAccounts,a]})),a},updateTrustAccount:async(s,a)=>{await Z.updateTrustAccount(s,a),e(i=>({trustAccounts:i.trustAccounts.map(c=>c.id===s?{...c,...a}:c)}))},deleteTrustAccount:async s=>{await Z.deleteTrustAccount(s),e(a=>({trustAccounts:a.trustAccounts.filter(i=>i.id!==s)}))},reconcileTrustAccount:async s=>{const a=new Date().toISOString();await Z.updateTrustAccount(s,{lastReconciled:a}),e(i=>({trustAccounts:i.trustAccounts.map(c=>c.id===s?{...c,lastReconciled:a}:c)}))},addTrustTransaction:async s=>{const a=await Z.createTrustTransaction(s);if(n().trustAccounts.find(c=>c.id===s.trustAccountId)){const c=s.type==="deposit"||s.type==="interest"?s.amount:-s.amount;e(l=>({trustAccounts:l.trustAccounts.map(d=>d.id===s.trustAccountId?{...d,balance:d.balance+c}:d)}))}return e(c=>({trustTransactions:[...c.trustTransactions,a]})),a},clearTransaction:async s=>{await Z.updateTrustTransaction(s,{clearedAt:new Date().toISOString()}),e(a=>({trustTransactions:a.trustTransactions.map(i=>i.id===s?{...i,clearedAt:new Date().toISOString()}:i)}))},getClientLedger:s=>{const a=n().trustTransactions.filter(c=>c.clientId===s),i=a.reduce((c,l)=>l.type==="deposit"||l.type==="interest"?c+l.amount:l.type==="withdrawal"||l.type==="fee"?c-l.amount:c,0);return{clientId:s,trustBalance:i,operatingBalance:0,transactions:a}},addPaymentProcessor:async s=>{const a=await Z.createPaymentProcessor(s);return e(i=>({paymentProcessors:[...i.paymentProcessors,a]})),a},updatePaymentProcessor:async(s,a)=>{await Z.updatePaymentProcessor(s,a),e(i=>({paymentProcessors:i.paymentProcessors.map(c=>c.id===s?{...c,...a}:c)}))},setDefaultProcessor:async s=>{await Z.updatePaymentProcessor(s,{isDefault:!0}),e(a=>({paymentProcessors:a.paymentProcessors.map(i=>({...i,isDefault:i.id===s}))}))},disconnectProcessor:async s=>{await Z.updatePaymentProcessor(s,{isActive:!1,credentials:{isConnected:!1}}),e(a=>({paymentProcessors:a.paymentProcessors.map(i=>i.id===s?{...i,isActive:!1,credentials:{...i.credentials,isConnected:!1}}:i)}))},createPaymentLink:async(s,a,i)=>{const c=await Z.createPaymentLink({invoiceId:s,clientId:a,amount:i});return e(l=>({paymentLinks:[...l.paymentLinks,c]})),c},expirePaymentLink:async s=>{await Z.updatePaymentLink(s,{status:"expired"}),e(a=>({paymentLinks:a.paymentLinks.map(i=>i.id===s?{...i,status:"expired"}:i)}))},markPaymentLinkPaid:async s=>{await Z.updatePaymentLink(s,{status:"paid"}),e(a=>({paymentLinks:a.paymentLinks.map(i=>i.id===s?{...i,status:"paid"}:i)}))},addRecurringPayment:async s=>{const a=await Z.createRecurringPayment(s);return e(i=>({recurringPayments:[...i.recurringPayments,a]})),a},updateRecurringPayment:async(s,a)=>{await Z.updateRecurringPayment(s,a),e(i=>({recurringPayments:i.recurringPayments.map(c=>c.id===s?{...c,...a}:c)}))},cancelRecurringPayment:async s=>{await Z.updateRecurringPayment(s,{status:"cancelled"}),e(a=>({recurringPayments:a.recurringPayments.map(i=>i.id===s?{...i,status:"cancelled"}:i)}))},addInvoiceTemplate:async s=>{const a=await Z.createInvoiceTemplate(s);return e(i=>({invoiceTemplates:[...i.invoiceTemplates,a]})),a},updateInvoiceTemplate:async(s,a)=>{await Z.updateInvoiceTemplate(s,a),e(i=>({invoiceTemplates:i.invoiceTemplates.map(c=>c.id===s?{...c,...a}:c)}))},deleteInvoiceTemplate:async s=>{await Z.deleteInvoiceTemplate(s),e(a=>({invoiceTemplates:a.invoiceTemplates.filter(i=>i.id!==s)}))},setDefaultTemplate:async s=>{await Z.updateInvoiceTemplate(s,{isDefault:!0}),e(a=>({invoiceTemplates:a.invoiceTemplates.map(i=>({...i,isDefault:i.id===s}))}))},updateBillingSettings:async s=>{await Z.updateSettings(s),e(a=>({billingSettings:{...a.billingSettings,...s}}))},getTrustAccountReport:(s,a,i)=>{const c=n().trustTransactions.filter(u=>u.trustAccountId===s&&u.createdAt>=a&&u.createdAt<=i),l=c.filter(u=>u.type==="deposit").reduce((u,v)=>u+v.amount,0),d=c.filter(u=>u.type==="withdrawal").reduce((u,v)=>u+v.amount,0);return{transactions:c,summary:{totalDeposits:l,totalWithdrawals:d,netChange:l-d,transactionCount:c.length}}},getThreeWayReconciliation:s=>{const a=n().trustAccounts.find(d=>d.id===s),i=n().trustTransactions.filter(d=>d.trustAccountId===s),c={};i.forEach(d=>{c[d.clientId]||(c[d.clientId]=0),d.type==="deposit"||d.type==="interest"?c[d.clientId]+=d.amount:c[d.clientId]-=d.amount});const l=Object.values(c).reduce((d,u)=>d+u,0);return{bankBalance:(a==null?void 0:a.balance)||0,bookBalance:l,clientLedgerTotal:l,isReconciled:(a==null?void 0:a.balance)===l,clientBalances:c,discrepancy:((a==null?void 0:a.balance)||0)-l}}})),zt=()=>`id-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,la=rt()((e,n)=>({templates:[],generatedDocuments:[],isLoading:!1,isInitialized:!1,fetchAll:async()=>{if(!n().isLoading){e({isLoading:!0});try{const s=await ce.getAll();e({templates:s.templates||[],generatedDocuments:s.generatedDocuments||[],isInitialized:!0,isLoading:!1})}catch(s){console.error("Failed to fetch template data:",s),e({isLoading:!1,isInitialized:!0})}}},addTemplate:async s=>{const a=await ce.createTemplate(s);return e(i=>({templates:[...i.templates,a]})),a},updateTemplate:async(s,a)=>{await ce.updateTemplate(s,a),e(i=>({templates:i.templates.map(c=>c.id===s?{...c,...a,updatedAt:new Date().toISOString()}:c)}))},deleteTemplate:async s=>{await ce.deleteTemplate(s),e(a=>({templates:a.templates.filter(i=>i.id!==s)}))},duplicateTemplate:async s=>{const a=await ce.duplicateTemplate(s);return e(i=>({templates:[...i.templates,a]})),a},addVariable:async(s,a)=>{const i=n().templates.find(d=>d.id===s);if(!i)return;const c={...a,id:zt()},l=[...i.variables,c];await ce.updateTemplate(s,{variables:l}),e(d=>({templates:d.templates.map(u=>u.id===s?{...u,variables:l,updatedAt:new Date().toISOString()}:u)}))},updateVariable:async(s,a,i)=>{const c=n().templates.find(d=>d.id===s);if(!c)return;const l=c.variables.map(d=>d.id===a?{...d,...i}:d);await ce.updateTemplate(s,{variables:l}),e(d=>({templates:d.templates.map(u=>u.id===s?{...u,variables:l,updatedAt:new Date().toISOString()}:u)}))},removeVariable:async(s,a)=>{const i=n().templates.find(l=>l.id===s);if(!i)return;const c=i.variables.filter(l=>l.id!==a);await ce.updateTemplate(s,{variables:c}),e(l=>({templates:l.templates.map(d=>d.id===s?{...d,variables:c,updatedAt:new Date().toISOString()}:d)}))},addAIPrompt:async(s,a)=>{const i=n().templates.find(d=>d.id===s);if(!i)return;const c={...a,id:zt()},l=[...i.aiPrompts,c];await ce.updateTemplate(s,{aiPrompts:l}),e(d=>({templates:d.templates.map(u=>u.id===s?{...u,aiPrompts:l,updatedAt:new Date().toISOString()}:u)}))},updateAIPrompt:async(s,a,i)=>{const c=n().templates.find(d=>d.id===s);if(!c)return;const l=c.aiPrompts.map(d=>d.id===a?{...d,...i}:d);await ce.updateTemplate(s,{aiPrompts:l}),e(d=>({templates:d.templates.map(u=>u.id===s?{...u,aiPrompts:l,updatedAt:new Date().toISOString()}:u)}))},removeAIPrompt:async(s,a)=>{const i=n().templates.find(l=>l.id===s);if(!i)return;const c=i.aiPrompts.filter(l=>l.id!==a);await ce.updateTemplate(s,{aiPrompts:c}),e(l=>({templates:l.templates.map(d=>d.id===s?{...d,aiPrompts:c,updatedAt:new Date().toISOString()}:d)}))},generateDocument:async(s,a,i,c)=>{const l=n().templates.find(v=>v.id===s);if(!l)throw new Error("Template not found");let d=l.content;Object.entries(a).forEach(([v,P])=>{d=d.replace(new RegExp(`\\[${v}\\]`,"g"),P)});const u=await ce.createGeneratedDocument({templateId:s,matterId:i,clientId:c,name:`${l.name} - ${new Date().toLocaleDateString()}`,content:d,variables:a,status:"draft"});return e(v=>({templates:v.templates.map(P=>P.id===s?{...P,usageCount:P.usageCount+1}:P),generatedDocuments:[...v.generatedDocuments,u]})),u},updateGeneratedDocument:async(s,a)=>{await ce.updateGeneratedDocument(s,a),e(i=>({generatedDocuments:i.generatedDocuments.map(c=>c.id===s?{...c,...a}:c)}))},deleteGeneratedDocument:async s=>{await ce.deleteGeneratedDocument(s),e(a=>({generatedDocuments:a.generatedDocuments.filter(i=>i.id!==s)}))},aiAutoFillVariables:async(s,a)=>(await new Promise(i=>setTimeout(i,1500)),{CLIENT_NAME:"Quantum Technologies Inc.",CLIENT_ADDRESS:"500 Innovation Drive, San Francisco, CA 94105",MATTER_NAME:"Quantum v. TechStart - Patent Infringement",MATTER_DESCRIPTION:"patent infringement litigation regarding quantum computing algorithms",HOURLY_RATE:"$550",RETAINER_CLAUSE:"Client agrees to pay an initial retainer of $25,000, which will be held in our trust account and applied against invoices as they are issued."}),aiReviewDocument:async s=>(await new Promise(a=>setTimeout(a,2e3)),`AI Document Review Complete:

 All required sections present
 Party names consistent throughout
 Dates properly formatted
 Consider adding jurisdiction-specific language in Section 3
 Payment terms should specify accepted methods
 Signature blocks properly formatted

Overall: Document is well-structured and ready for review.`),aiImproveContent:async(s,a)=>(await new Promise(i=>setTimeout(i,1500)),s.replace(/respectfully/gi,"hereby").replace(/states as follows/gi,"represents and states")),searchTemplates:s=>{const a=s.toLowerCase();return n().templates.filter(i=>{var c;return i.name.toLowerCase().includes(a)||((c=i.description)==null?void 0:c.toLowerCase().includes(a))||i.category.toLowerCase().includes(a)})},getTemplatesByCategory:s=>n().templates.filter(a=>a.category===s)})),da="_overlay_14xwi_3",ua="_panel_14xwi_16",ma="_slideIn_14xwi_1",ga="_header_14xwi_54",pa="_headerTitle_14xwi_65",ha="_headerIcon_14xwi_71",fa="_headerIconPulse_14xwi_84",ya="_headerPulse_14xwi_1",_a="_headerText_14xwi_97",xa="_headerMain_14xwi_103",wa="_headerSub_14xwi_111",va="_headerActions_14xwi_118",Sa="_clearBtn_14xwi_124",ba="_closeBtn_14xwi_145",Pa="_modeBar_14xwi_166",Ta="_modeToggleSwitch_14xwi_174",ja="_modeOption_14xwi_187",ka="_active_14xwi_204",Aa="_modeSlider_14xwi_208",Ia="_sliderRight_14xwi_221",Ea="_contextBar_14xwi_228",Na="_contextInfo_14xwi_232",Da="_contextPage_14xwi_238",Ca="_actionTaken_14xwi_245",Oa="_errorIndicator_14xwi_262",za="_retryBtn_14xwi_279",La="_backgroundAgentDeployed_14xwi_306",$a="_agentGlow_14xwi_1",Ba="_navigationBtn_14xwi_329",Ra="_messages_14xwi_356",Fa="_contextBanner_14xwi_368",Ma="_welcome_14xwi_382",Ua="_welcomeIcon_14xwi_392",Va="_welcomeIconInner_14xwi_402",qa="_welcomeIconRing_14xwi_416",Ja="_ringPulse_14xwi_1",Ga="_welcomeIconRing2_14xwi_424",Ha="_welcomeStatus_14xwi_437",Ka="_statusDot_14xwi_452",Wa="_statusPulse_14xwi_1",Qa="_suggestions_14xwi_480",Za="_suggestionsLabel_14xwi_486",Ya="_suggestionBtn_14xwi_498",Xa="_suggestionArrow_14xwi_521",ei="_message_14xwi_356",ti="_messageIn_14xwi_1",si="_user_14xwi_549",ni="_avatar_14xwi_553",ai="_messageContent_14xwi_566",ii="_messageText_14xwi_576",ri="_assistant_14xwi_583",oi="_timestamp_14xwi_605",ci="_typing_14xwi_614",li="_spinner_14xwi_627",di="_spin_14xwi_627",ui="_inputArea_14xwi_638",mi="_input_14xwi_638",gi="_sendBtn_14xwi_676",pi="_attachBtn_14xwi_702",hi="_filePreview_14xwi_728",fi="_slideUp_14xwi_1",yi="_fileInfo_14xwi_751",_i="_fileName_14xwi_759",xi="_fileSize_14xwi_768",wi="_removeFileBtn_14xwi_774",vi="_attachedFile_14xwi_793",Si="_inlineSuggestions_14xwi_826",bi="_suggestionsHeader_14xwi_834",Pi="_hideSuggestionsBtn_14xwi_841",Ti="_suggestionPills_14xwi_856",ji="_suggestionPill_14xwi_856",ki="_exitVoiceBtn_14xwi_1028",Ai="_micBtn_14xwi_1049",Ii="_micActive_14xwi_1075",Ei="_micPulse_14xwi_1",Ni="_voiceModeBar_14xwi_1088",Di="_voiceIndicator_14xwi_1100",Ci="_idle_14xwi_1112",Oi="_indicatorPulse_14xwi_1",zi="_listening_14xwi_1117",Li="_processing_14xwi_1122",$i="_speaking_14xwi_1126",Bi="_speakingPulse_14xwi_1",Ri="_voiceInfo_14xwi_1142",Fi="_voiceStateLabel_14xwi_1149",Mi="_voiceHintSmall_14xwi_1155",Ui="_exitVoiceBtnSmall_14xwi_1160",Vi="_backgroundToggle_14xwi_1205",qi="_backgroundToggleActive_14xwi_1228",Ji="_backgroundGlow_14xwi_1",Gi="_backgroundBanner_14xwi_1240",Hi="_rocketFloat_14xwi_1",f={overlay:da,panel:ua,slideIn:ma,header:ga,headerTitle:pa,headerIcon:ha,headerIconPulse:fa,headerPulse:ya,headerText:_a,headerMain:xa,headerSub:wa,headerActions:va,clearBtn:Sa,closeBtn:ba,modeBar:Pa,modeToggleSwitch:Ta,modeOption:ja,active:ka,modeSlider:Aa,sliderRight:Ia,contextBar:Ea,contextInfo:Na,contextPage:Da,actionTaken:Ca,errorIndicator:Oa,retryBtn:za,backgroundAgentDeployed:La,agentGlow:$a,navigationBtn:Ba,messages:Ra,contextBanner:Fa,welcome:Ma,welcomeIcon:Ua,welcomeIconInner:Va,welcomeIconRing:qa,ringPulse:Ja,welcomeIconRing2:Ga,welcomeStatus:Ha,statusDot:Ka,statusPulse:Wa,suggestions:Qa,suggestionsLabel:Za,suggestionBtn:Ya,suggestionArrow:Xa,message:ei,messageIn:ti,user:si,avatar:ni,messageContent:ai,messageText:ii,assistant:ri,timestamp:oi,typing:ci,spinner:li,spin:di,inputArea:ui,input:mi,sendBtn:gi,attachBtn:pi,filePreview:hi,slideUp:fi,fileInfo:yi,fileName:_i,fileSize:xi,removeFileBtn:wi,attachedFile:vi,inlineSuggestions:Si,suggestionsHeader:bi,hideSuggestionsBtn:Pi,suggestionPills:Ti,suggestionPill:ji,exitVoiceBtn:ki,micBtn:Ai,micActive:Ii,micPulse:Ei,voiceModeBar:Ni,voiceIndicator:Di,idle:Ci,indicatorPulse:Oi,listening:zi,processing:Li,speaking:$i,speakingPulse:Bi,voiceInfo:Ri,voiceStateLabel:Fi,voiceHintSmall:Mi,exitVoiceBtnSmall:Ui,backgroundToggle:Vi,backgroundToggleActive:qi,backgroundGlow:Ji,backgroundBanner:Gi,rocketFloat:Hi};function Ki(e){return e==="/app"||e==="/app/"?"dashboard":e.startsWith("/app/matters/")?"matter-detail":e==="/app/matters"?"matters":e.startsWith("/app/clients/")?"client-detail":e==="/app/clients"?"clients":e==="/app/billing"?"billing":e==="/app/calendar"?"calendar":e==="/app/time"?"time-tracking":e==="/app/documents"?"documents":e==="/app/team"?"team":e==="/app/reports"?"reports":e==="/app/analytics"?"analytics":"general"}function Wi(e){const n=e.match(/\/app\/matters\/([^/]+)/);if(n)return{matterId:n[1]};const s=e.match(/\/app\/clients\/([^/]+)/);return s?{clientId:s[1]}:{}}function Qi({isOpen:e,onClose:n,additionalContext:s={}}){const a=Pt(),i=He(),{refreshSuggestions:c,chatContext:l}=lt(),[d,u]=o.useState([]),[v,P]=o.useState(""),[b,D]=o.useState(!1),[F,G]=o.useState([]),[g,y]=o.useState(!0),[I,L]=o.useState(null),[k,_]=o.useState(null),[T,M]=o.useState(null),Y=o.useRef(null),de=o.useRef(null),O=o.useRef(null),B=o.useRef(null),ee=o.useRef(null),[$,ge]=o.useState(!1),[V,H]=o.useState("idle"),[ye,se]=o.useState(0),[R,_e]=o.useState(!1),[S,q]=o.useState(null),K=o.useRef(null),pe=o.useRef([]),re=o.useRef(null),N=o.useRef(null),E=o.useRef(null),ne=o.useRef(null),w=o.useRef(null),X=o.useRef(null),te=o.useRef(!1);o.useEffect(()=>{te.current=$},[$]),o.useEffect(()=>{e&&S===null&&ue.getBackgroundAgentStatus().then(x=>{q(x.available&&x.configured)}).catch(()=>{q(!1)})},[e,S]);const Ee=Ki(a.pathname),xe={...Wi(a.pathname),...s,...(l==null?void 0:l.additionalContext)||{}};o.useEffect(()=>{O.current&&d.length>0&&O.current.scrollIntoView({behavior:"smooth",block:"start"})},[d,b]),o.useEffect(()=>{e&&setTimeout(()=>{var x;return(x=B.current)==null?void 0:x.focus()},100)},[e]),o.useEffect(()=>{e&&(l!=null&&l.suggestedQuestions&&l.suggestedQuestions.length>0?G(l.suggestedQuestions):ue.getSuggestions(Ee).then(x=>G(x.suggestions||[])).catch(()=>G([])),y(!0))},[Ee,e,c,l]);const We=async x=>{var oe;const z=(oe=x.target.files)==null?void 0:oe[0];if(!z)return;const fe={file:z,name:z.name,type:z.type,size:z.size,extracting:!0};_(fe);try{const A=await Be.extractText(z);if(z.type.startsWith("image/")){const C=new FileReader;C.onload=()=>{const Pe=C.result.split(",")[1];_(we=>we?{...we,content:A.content,base64:Pe,extracting:!1}:null)},C.readAsDataURL(z)}else _(C=>C?{...C,content:A.content,extracting:!1}:null)}catch(A){console.error("Error extracting file content:",A),_(C=>C?{...C,extracting:!1,content:"[Could not extract text from this file]"}:null)}ee.current&&(ee.current.value="")},xs=()=>{_(null)},ws=x=>x.startsWith("image/")?t.jsx(Gs,{size:16}):x.includes("pdf")||x.includes("word")||x.includes("document")?t.jsx(Xe,{size:16}):t.jsx(Kt,{size:16}),Qe=async x=>{var C,Pe,we,ae,he,Ne;const z=x||v.trim();if(!z&&!k||b)return;let fe=z;k&&(fe=z||`Analyze this file: ${k.name}`);const oe={id:crypto.randomUUID(),role:"user",content:fe,timestamp:new Date,attachedFile:k?{name:k.name,type:k.type}:void 0};u(Q=>[...Q,oe]),P(""),M(z);const A=k;_(null),D(!0);try{if(R&&S){const je=z.toLowerCase().trim();if(!/^(hi|hello|hey|thanks|thank you|ok|okay|yes|no|bye)[\s!.,?]*$/i.test(je)||je.length>15){const et=await ue.startBackgroundTask(z||`Analyze and summarize this document: ${A==null?void 0:A.name}`),js={id:crypto.randomUUID(),role:"assistant",content:` **Background task started!**

Your task has been submitted to the background agent (powered by Microsoft Amplifier).

**Goal:** ${((C=et.task)==null?void 0:C.goal)||z}
**Task ID:** ${((Pe=et.task)==null?void 0:Pe.id)||"Unknown"}

You can close this panel and continue working. Check the progress bar at the bottom of the screen to monitor the task.`,timestamp:new Date,toolsUsed:!0};u(ks=>[...ks,js]),window.dispatchEvent(new CustomEvent("backgroundTaskStarted",{detail:{taskId:(we=et.task)==null?void 0:we.id,goal:((ae=et.task)==null?void 0:ae.goal)||z,isAmplifier:!0}})),D(!1);return}}const Q=d.map(je=>({role:je.role,content:je.content})),Le={...A?{uploadedDocument:{name:A.name,type:A.type,size:A.size,content:A.content,base64:A.base64}}:{},...xe.emailDraft?{emailDraft:xe.emailDraft,contextHint:`The user is drafting an email. Current draft:
${xe.draftSummary||""}

Help them with their email.`}:{}},Te=await ue.agentChat(z||`Analyze and summarize this document: ${A==null?void 0:A.name}`,Q,Le),ut={id:crypto.randomUUID(),role:"assistant",content:Te.response,timestamp:new Date,toolsUsed:Te.toolsUsed,navigation:Te.navigation};u(je=>[...je,ut]),Te.navigation&&L(Te.navigation)}catch(Q){console.error("AI chat error:",Q);let Le="I'm sorry, I encountered an error. Please try again.",Te=!0;(Q==null?void 0:Q.name)==="ApiError"||Q!=null&&Q.status?(Le=Q.message||Le,Te=[429,500,502,503,504].includes(Q.status),((he=Q.data)==null?void 0:he.retryable)!==void 0&&(Te=Q.data.retryable),(Ne=Q.data)!=null&&Ne.error&&(Le=Q.data.error)):Q!=null&&Q.message&&(Q.message.includes("fetch")||Q.message.includes("network")||Q.message.includes("Failed to fetch")?(Le="Network error - please check your connection and try again.",Te=!0):Le=Q.message);const ut={id:crypto.randomUUID(),role:"assistant",content:Le,timestamp:new Date,isError:!0,isRetryable:Te};u(je=>[...je,ut])}finally{D(!1)}},vs=x=>{n(),i(x.path),L(null)},Ss=()=>{T&&!b&&(u(x=>{const z=x[x.length-1];return z!=null&&z.isError?x.slice(0,-1):x}),Qe(T))},bs=x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),Qe())},Ps=()=>{u([])},ze=o.useCallback(()=>{K.current&&K.current.state!=="inactive"&&K.current.stop(),E.current&&(E.current.getTracks().forEach(x=>x.stop()),E.current=null),re.current&&(re.current.close(),re.current=null),w.current&&(clearTimeout(w.current),w.current=null),X.current&&(cancelAnimationFrame(X.current),X.current=null),ne.current&&(ne.current.pause(),ne.current=null),K.current=null,pe.current=[],N.current=null,se(0),H("idle")},[]),be=o.useCallback(async()=>{try{const x=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}});E.current=x,re.current=new AudioContext;const z=re.current.createMediaStreamSource(x);N.current=re.current.createAnalyser(),N.current.fftSize=256,z.connect(N.current);const fe=()=>{if(!N.current)return;const A=new Uint8Array(N.current.frequencyBinCount);N.current.getByteFrequencyData(A);const C=A.reduce((Pe,we)=>Pe+we,0)/A.length;se(C/255),C>20&&(w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{K.current&&K.current.state==="recording"&&K.current.stop()},2e3)),X.current=requestAnimationFrame(fe)};fe();const oe=new MediaRecorder(x,{mimeType:"audio/webm"});K.current=oe,pe.current=[],oe.ondataavailable=A=>{console.log("[Voice] Data available:",A.data.size,"bytes"),A.data.size>0&&pe.current.push(A.data)},oe.onstop=async()=>{if(console.log("[Voice] Recording stopped, chunks:",pe.current.length),pe.current.length===0){console.log("[Voice] No audio chunks, restarting..."),H("idle"),te.current&&setTimeout(()=>be(),500);return}const A=new Blob(pe.current,{type:"audio/webm"});console.log("[Voice] Created blob:",A.size,"bytes"),pe.current=[],await Ts(A)},oe.start(1e3),console.log("[Voice] Recording started"),H("listening"),setTimeout(()=>{K.current&&K.current.state==="recording"&&K.current.stop()},3e4)}catch(x){console.error("Error starting voice:",x),ge(!1),ze()}},[$,ze]),Ts=async x=>{var z,fe,oe;console.log("[Voice] Processing audio blob:",x.size,"bytes"),H("processing");try{const A=d.map(ae=>({role:ae.role,content:ae.content}));console.log("[Voice] Calling voiceChat API...");const C=await ue.voiceChat(x,A);if(console.log("[Voice] API response:",C),!C.success||!C.userText||C.userText.trim()===""){if(console.log("[Voice] No speech detected in result"),C.aiText){const ae={id:crypto.randomUUID(),role:"assistant",content:C.aiText,timestamp:new Date};u(he=>[...he,ae])}H("idle"),te.current&&setTimeout(()=>be(),1e3);return}console.log("[Voice] User said:",C.userText),console.log("[Voice] AI response:",(z=C.aiText)==null?void 0:z.substring(0,100));const Pe={id:crypto.randomUUID(),role:"user",content:C.userText,timestamp:new Date};u(ae=>[...ae,Pe]);const we={id:crypto.randomUUID(),role:"assistant",content:C.aiText,timestamp:new Date,toolsUsed:C.toolsUsed};if(u(ae=>[...ae,we]),C.audio){console.log("[Voice] Playing audio response..."),H("speaking");const ae=`data:audio/mp3;base64,${C.audio}`,he=new Audio(ae);ne.current=he,he.onended=()=>{console.log("[Voice] Audio playback ended"),H("idle"),te.current&&setTimeout(()=>be(),500)},he.onerror=Ne=>{console.error("[Voice] Audio playback error:",Ne),H("idle"),te.current&&setTimeout(()=>be(),500)},await he.play()}else{console.log("[Voice] No audio in response, using TTS..."),H("speaking");try{const ae=await ue.synthesizeSpeech(C.aiText),he=URL.createObjectURL(ae),Ne=new Audio(he);ne.current=Ne,Ne.onended=()=>{URL.revokeObjectURL(he),H("idle"),te.current&&setTimeout(()=>be(),500)},Ne.onerror=()=>{URL.revokeObjectURL(he),H("idle"),te.current&&setTimeout(()=>be(),500)},await Ne.play()}catch(ae){console.error("[Voice] TTS error:",ae),H("idle"),te.current&&setTimeout(()=>be(),500)}}}catch(A){console.error("[Voice] Processing error:",A);let C="I couldn't process your voice input. Please try again.";(fe=A.data)!=null&&fe.error?C=A.data.error:(oe=A.data)!=null&&oe.details?C=`Error: ${A.data.details}`:A.message&&(C=A.message);const Pe={id:crypto.randomUUID(),role:"assistant",content:C,timestamp:new Date,isError:!0,isRetryable:!0};u(we=>[...we,Pe]),H("idle"),te.current&&setTimeout(()=>be(),2e3)}},dt=o.useCallback(()=>{$?(ge(!1),ze()):ge(!0)},[$,ze]);return o.useEffect(()=>{$&&V==="idle"&&be()},[$,V,be]),o.useEffect(()=>()=>{ze()},[ze]),o.useEffect(()=>{!e&&$&&(ge(!1),ze())},[e,$,ze]),e?t.jsx("div",{className:f.overlay,onClick:n,children:t.jsxs("div",{className:f.panel,onClick:x=>x.stopPropagation(),children:[t.jsxs("div",{className:f.header,children:[t.jsxs("div",{className:f.headerTitle,children:[t.jsxs("div",{className:f.headerIcon,children:[R?t.jsx(vt,{size:16}):t.jsx(mt,{size:16}),t.jsx("div",{className:f.headerIconPulse})]}),t.jsxs("div",{className:f.headerText,children:[t.jsx("span",{className:f.headerMain,children:"APEX AI"}),t.jsx("span",{className:f.headerSub,children:R?"Background Agent (Amplifier)":"v2.0  Your Legal Assistant"})]})]}),t.jsxs("div",{className:f.headerActions,children:[S&&t.jsxs("button",{onClick:()=>_e(!R),className:`${f.backgroundToggle} ${R?f.backgroundToggleActive:""}`,title:R?"Switch to Normal Mode":"Switch to Background Mode",children:[R?t.jsx(Rs,{size:16}):t.jsx(Fs,{size:16}),t.jsx("span",{children:R?"Background":"Normal"})]}),d.length>0&&!$&&t.jsxs("button",{onClick:Ps,className:f.clearBtn,children:[t.jsx(mt,{size:12}),"Clear"]}),$&&t.jsxs("button",{onClick:dt,className:f.exitVoiceBtn,children:[t.jsx(Se,{size:14}),"Exit Voice"]}),t.jsx("button",{onClick:n,className:f.closeBtn,children:t.jsx(Se,{size:18})})]})]}),R&&t.jsxs("div",{className:f.backgroundBanner,children:[t.jsx(vt,{size:14}),t.jsx("span",{children:"Background Mode: Tasks run autonomously using Microsoft Amplifier"})]}),t.jsxs("div",{className:f.messages,ref:de,children:[xe.emailDraft&&t.jsxs("div",{className:f.contextBanner,children:[t.jsx(ot,{size:14}),t.jsx("span",{children:"I can see your email draft. Ask me to help improve it, check grammar, or suggest changes!"})]}),d.length===0?t.jsxs("div",{className:f.welcome,children:[t.jsxs("div",{className:f.welcomeIcon,children:[t.jsx("div",{className:f.welcomeIconInner,children:t.jsx(Ms,{size:28})}),t.jsx("div",{className:f.welcomeIconRing}),t.jsx("div",{className:f.welcomeIconRing2})]}),t.jsxs("div",{className:f.welcomeStatus,children:[t.jsx("span",{className:f.statusDot}),t.jsx("span",{children:"System Online"})]}),t.jsx("h3",{children:xe.emailDraft?"Email Assistant Ready":"Ready to Assist"}),t.jsx("p",{children:xe.emailDraft?"I can see your draft. Ask me to improve it, make it more professional, check for errors, or suggest a better subject line.":"I can answer questions, analyze documents, and help with your legal work instantly."}),F.length>0&&t.jsxs("div",{className:f.suggestions,children:[t.jsxs("div",{className:f.suggestionsLabel,children:[t.jsx(mt,{size:12}),t.jsx("span",{children:"Suggested Commands"})]}),F.map((x,z)=>t.jsxs("button",{className:f.suggestionBtn,onClick:()=>Qe(x),children:[t.jsx(Jt,{size:14,className:f.suggestionArrow}),t.jsx("span",{children:x})]},z))]})]}):t.jsxs(t.Fragment,{children:[d.map((x,z)=>{const fe=x.role==="user"&&d.slice(z+1).every(oe=>oe.role!=="user");return t.jsxs("div",{ref:fe?O:null,className:`${f.message} ${f[x.role]}`,children:[x.role==="assistant"&&t.jsx("div",{className:f.avatar,children:t.jsx(Ge,{size:16})}),t.jsxs("div",{className:f.messageContent,children:[t.jsxs("div",{className:f.messageText,children:[x.attachedFile&&t.jsxs("div",{className:f.attachedFile,children:[t.jsx(Xe,{size:14}),t.jsx("span",{children:x.attachedFile.name})]}),x.toolsUsed&&!x.isError&&t.jsxs("div",{className:f.actionTaken,children:[t.jsx(Us,{size:12})," Action taken"]}),x.isError&&t.jsxs("div",{className:f.errorIndicator,children:[t.jsx(jt,{size:12})," Error"]}),x.content.split(`
`).map((oe,A)=>t.jsx("p",{children:oe||t.jsx("br",{})},A)),x.isError&&x.isRetryable&&t.jsxs("button",{className:f.retryBtn,onClick:Ss,disabled:b,children:[t.jsx(Tt,{size:14}),"Try again"]}),x.navigation&&t.jsxs("button",{className:f.navigationBtn,onClick:()=>vs(x.navigation),children:[t.jsx(Vs,{size:14}),"Open ",x.navigation.label]})]}),t.jsx("span",{className:f.timestamp,children:x.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},x.id)}),b&&t.jsxs("div",{className:`${f.message} ${f.assistant}`,children:[t.jsx("div",{className:f.avatar,children:t.jsx(Ge,{size:16})}),t.jsx("div",{className:f.messageContent,children:t.jsxs("div",{className:f.typing,children:[t.jsx($e,{size:16,className:f.spinner}),t.jsx("span",{children:"Thinking..."})]})})]}),g&&F.length>0&&!b&&t.jsxs("div",{className:f.inlineSuggestions,children:[t.jsxs("div",{className:f.suggestionsHeader,children:[t.jsx("span",{className:f.suggestionsLabel,children:"Quick questions:"}),t.jsx("button",{className:f.hideSuggestionsBtn,onClick:()=>y(!1),children:"Hide"})]}),t.jsx("div",{className:f.suggestionPills,children:F.slice(0,3).map((x,z)=>t.jsx("button",{className:f.suggestionPill,onClick:()=>Qe(x),children:x},z))})]}),t.jsx("div",{ref:Y})]})]}),k&&t.jsxs("div",{className:f.filePreview,children:[t.jsxs("div",{className:f.fileInfo,children:[ws(k.type),t.jsx("span",{className:f.fileName,children:k.name}),t.jsxs("span",{className:f.fileSize,children:["(",(k.size/1024).toFixed(1)," KB)"]}),k.extracting&&t.jsx($e,{size:14,className:f.spinner})]}),t.jsx("button",{onClick:xs,className:f.removeFileBtn,children:t.jsx(Se,{size:14})})]}),$&&t.jsxs("div",{className:f.voiceModeBar,children:[t.jsxs("div",{className:`${f.voiceIndicator} ${f[V]}`,style:{transform:V==="listening"?`scale(${1+ye*.3})`:void 0},children:[V==="listening"&&t.jsx(gt,{size:18}),V==="processing"&&t.jsx($e,{size:18,className:f.spinner}),V==="speaking"&&t.jsx(qs,{size:18}),V==="idle"&&t.jsx(gt,{size:18})]}),t.jsxs("div",{className:f.voiceInfo,children:[t.jsxs("span",{className:f.voiceStateLabel,children:[V==="listening"&&"Listening...",V==="processing"&&"Thinking...",V==="speaking"&&"Speaking...",V==="idle"&&"Starting..."]}),t.jsxs("span",{className:f.voiceHintSmall,children:[V==="listening"&&"Speak now",V==="processing"&&"Processing",V==="speaking"&&"Wait for response",V==="idle"&&"Initializing..."]})]}),t.jsx("button",{onClick:dt,className:f.exitVoiceBtnSmall,children:t.jsx(Se,{size:16})})]}),t.jsxs("div",{className:f.inputArea,children:[t.jsx("input",{type:"file",ref:ee,onChange:We,style:{display:"none"}}),t.jsx("button",{onClick:()=>{var x;return(x=ee.current)==null?void 0:x.click()},className:f.attachBtn,disabled:b||$,title:"Attach file",children:t.jsx(Gt,{size:18})}),t.jsx("input",{ref:B,type:"text",value:v,onChange:x=>P(x.target.value),onKeyDown:bs,placeholder:k?"Add a message or press send...":"Ask anything...",disabled:b||$,className:f.input}),t.jsx("button",{onClick:dt,className:`${f.micBtn} ${$?f.micActive:""}`,disabled:b,title:$?"Exit voice mode":"Start voice mode",children:$?t.jsx(Js,{size:18}):t.jsx(gt,{size:18})}),t.jsx("button",{onClick:()=>Qe(),disabled:!v.trim()&&!k||b||$,className:f.sendBtn,children:b?t.jsx($e,{size:18,className:f.spinner}):t.jsx(Ht,{size:18})})]})]})}):null}const Zi="_taskBar_jqxu6_1",Yi="_icon_jqxu6_36",Xi="_title_jqxu6_41",er="_progressFill_jqxu6_45",tr="_progressText_jqxu6_49",sr="_content_jqxu6_64",nr="_topRow_jqxu6_71",ar="_clickableArea_jqxu6_77",ir="_spinning_jqxu6_117",rr="_pulsing_jqxu6_131",or="_activityDot_jqxu6_151",cr="_info_jqxu6_170",lr="_header_jqxu6_176",dr="_iterations_jqxu6_200",ur="_goal_jqxu6_208",mr="_step_jqxu6_218",gr="_bottomRow_jqxu6_228",pr="_progress_jqxu6_45",hr="_progressBar_jqxu6_242",fr="_actions_jqxu6_282",yr="_viewProgressBtn_jqxu6_309",_r="_cancelBtn_jqxu6_329",xr="_dismissBtn_jqxu6_353",W={taskBar:Zi,icon:Yi,title:Xi,progressFill:er,progressText:tr,content:sr,topRow:nr,clickableArea:ar,spinning:ir,pulsing:rr,activityDot:or,info:cr,header:lr,iterations:dr,goal:ur,step:mr,bottomRow:gr,progress:pr,progressBar:hr,actions:fr,viewProgressBtn:yr,cancelBtn:_r,dismissBtn:xr},ft=(e,n=0)=>{const s=typeof e=="number"&&Number.isFinite(e)?e:n;return Math.min(100,Math.max(0,s))};function wr(){const e=He(),[n,s]=o.useState(null),[a,i]=o.useState(null),[c,l]=o.useState(!1),[d,u]=o.useState(!1),[v,P]=o.useState(!1),[b,D]=o.useState(!1),[F,G]=o.useState(!1),g=o.useRef(!1),y=o.useRef({step:"",percent:0,timestamp:Date.now()}),[I,L]=o.useState(!1),k=o.useCallback(async()=>{var O,B,ee,$,ge,V,H,ye,se,R,_e,S,q,K,pe;if(!(F||d))try{if(g.current){const N=await ue.getActiveBackgroundTask();if(N.active&&N.task){const E=N.task,ne=ft((O=E.progress)==null?void 0:O.progressPercent,5);if(E.status==="cancelled"){u(!0),D(!1),s(te=>te?{...te,status:"cancelled",currentStep:"Cancelled"}:null),setTimeout(()=>s(null),2e3);return}const w=((B=E.progress)==null?void 0:B.currentStep)||"Working...",X=Date.now();y.current.step===w&&y.current.percent===ne?X-y.current.timestamp>5e3&&L(!0):(y.current={step:w,percent:ne,timestamp:X},L(!1)),s({id:E.id,goal:E.goal,status:E.status,progressPercent:ne,iterations:((ee=E.progress)==null?void 0:ee.iterations)||0,totalSteps:($=E.progress)==null?void 0:$.totalSteps,completedSteps:(ge=E.progress)==null?void 0:ge.completedSteps,currentStep:w,summary:(V=E.result)==null?void 0:V.summary,result:E.result,isAmplifier:!0,lastActivityAt:X}),l(!1),P(E.status==="error"||E.status==="failed")}else if(n&&!N.active){try{const E=await ue.getBackgroundTask(n.id);if(E!=null&&E.task){const ne=E.task.status||n.status,w=ft((H=E.task.progress)==null?void 0:H.progressPercent,n.progressPercent),X=((ye=E.task.progress)==null?void 0:ye.currentStep)||n.currentStep||"Completed";i({...n,status:ne,progressPercent:w,currentStep:X,totalSteps:(se=E.task.progress)==null?void 0:se.totalSteps,completedSteps:(R=E.task.progress)==null?void 0:R.completedSteps,summary:(_e=E.task.result)==null?void 0:_e.summary,result:E.task.result}),s(te=>{var Ee,Ke;return te&&{...te,status:ne,progressPercent:w,currentStep:X,totalSteps:(Ee=E.task.progress)==null?void 0:Ee.totalSteps,completedSteps:(Ke=E.task.progress)==null?void 0:Ke.completedSteps}}),P(ne==="error"||ne==="failed")}}catch{i(n),P(n.status==="error"||n.status==="failed")}l(!0),D(!1)}else D(!1);return}const re=await ue.getActiveTask();if(re.active&&re.task){const N=re.task;if(N.status==="cancelled"){u(!0),D(!1),s(E=>E?{...E,status:"cancelled",currentStep:"Cancelled"}:null),setTimeout(()=>s(null),2e3);return}s({id:N.id,goal:N.goal,status:N.status,progressPercent:((S=N.progress)==null?void 0:S.progressPercent)||N.progressPercent||5,iterations:N.iterations||0,totalSteps:(q=N.progress)==null?void 0:q.totalSteps,completedSteps:(K=N.progress)==null?void 0:K.completedSteps,currentStep:N.current_step||((pe=N.progress)==null?void 0:pe.currentStep)||"Working...",summary:N.summary,result:N.result,isAmplifier:!1}),l(!1),P(N.status==="error"||N.status==="failed")}else if(n&&!re.active){try{const N=await ue.getTask(n.id);N&&i({...n,summary:N.summary,result:N.result,status:N.status})}catch{i(n)}l(!0),D(!1)}else D(!1)}catch(re){console.error("Error checking active task:",re)}},[n,F,d]);o.useEffect(()=>{let O=!0;return(async()=>{var ee,$,ge,V,H,ye;try{const se=await ue.getActiveBackgroundTask();if(!O)return;if(se.active&&se.task){const R=se.task,_e=ft((ee=R.progress)==null?void 0:ee.progressPercent,5);g.current=!0,s({id:R.id,goal:R.goal,status:R.status,progressPercent:_e,iterations:(($=R.progress)==null?void 0:$.iterations)||0,totalSteps:(ge=R.progress)==null?void 0:ge.totalSteps,completedSteps:(V=R.progress)==null?void 0:V.completedSteps,currentStep:((H=R.progress)==null?void 0:H.currentStep)||"Working...",summary:(ye=R.result)==null?void 0:ye.summary,result:R.result,isAmplifier:!0}),l(!1),P(R.status==="error"||R.status==="failed"),u(!1),G(!1),D(!0)}}catch(se){console.error("Error checking existing background task:",se)}})(),()=>{O=!1}},[]),o.useEffect(()=>{const O=B=>{const ee=B.detail.isAmplifier!==!1;g.current=ee,s({id:B.detail.taskId,goal:B.detail.goal,status:"running",progressPercent:5,iterations:0,currentStep:ee?"Starting Amplifier agent...":"Starting...",isAmplifier:ee}),l(!1),P(!1),u(!1),G(!1),D(!0)};return window.addEventListener("backgroundTaskStarted",O),()=>{window.removeEventListener("backgroundTaskStarted",O)}},[]),o.useEffect(()=>{if(!b||c)return;k();const O=setInterval(k,2e3);return()=>clearInterval(O)},[b,c,k]);const _=async()=>{if(!(!n||F)){G(!0),D(!1),s(O=>O?{...O,status:"cancelling",currentStep:"Stopping agent..."}:null);try{n.isAmplifier?await ue.cancelBackgroundTask(n.id):await ue.cancelTask(n.id),u(!0),s(O=>O?{...O,status:"cancelled",currentStep:"Cancelled"}:null),setTimeout(()=>{s(null),G(!1),u(!1)},2e3)}catch(O){console.error("Failed to cancel task:",O),u(!0),s(B=>B?{...B,status:"cancelled",currentStep:"Stopped"}:null),setTimeout(()=>{s(null),G(!1),u(!1)},2e3)}}},T=()=>{s(null),i(null),D(!1),l(!1),u(!1),G(!1),g.current=!1},M=()=>{e("/app/background-agent",{state:{highlightTaskId:n==null?void 0:n.id,fromTaskBar:!0}})};if(!(n&&n.status!=="completed"&&n.status!=="error"&&n.status!=="failed"&&n.status!=="cancelled"&&!c&&!d))return null;v||n.status==="error"||n.status,d||n.status==="cancelled"||n.status;const de=n.totalSteps?`Step ${Math.min(n.completedSteps??n.iterations??1,n.totalSteps)} of ${n.totalSteps}`:`Step ${n.iterations||1}`;return t.jsx("div",{className:W.taskBar,children:t.jsxs("div",{className:W.content,children:[t.jsxs("div",{className:W.topRow,children:[t.jsxs("div",{className:W.clickableArea,onClick:M,title:"Click to view progress",children:[t.jsx("div",{className:W.icon,children:n!=null&&n.isAmplifier?t.jsx(vt,{size:20,className:I?W.pulsing:W.spinning}):t.jsx(Hs,{size:20,className:I?W.pulsing:W.spinning})}),t.jsxs("div",{className:W.info,children:[t.jsxs("div",{className:W.header,children:[t.jsx("div",{className:W.title,children:I?n!=null&&n.isAmplifier?"Background Agent Thinking...":"AI Agent Thinking...":n!=null&&n.isAmplifier?"Background Agent Working":"AI Agent Working"}),t.jsx("div",{className:W.iterations,children:de}),t.jsx("span",{className:W.activityDot,title:"Agent is active"})]}),t.jsx("div",{className:W.goal,children:n.goal}),t.jsx("div",{className:W.step,children:I?` ${n.currentStep}`:n.currentStep})]})]}),t.jsxs("div",{className:W.actions,children:[t.jsxs("button",{onClick:M,className:W.viewProgressBtn,title:"View progress",children:[t.jsx(Wt,{size:14}),t.jsx("span",{children:"View"})]}),t.jsx("button",{onClick:_,className:W.cancelBtn,disabled:F,title:"Cancel task",children:t.jsx(Ks,{size:14})}),t.jsx("button",{onClick:T,className:W.dismissBtn,title:"Hide",children:t.jsx(Se,{size:14})})]})]}),t.jsx("div",{className:W.bottomRow,children:t.jsxs("div",{className:W.progress,children:[t.jsx("div",{className:W.progressBar,children:t.jsx("div",{className:W.progressFill,style:{width:`${n.progressPercent}%`}})}),t.jsx("div",{className:W.progressText,children:`${n.progressPercent}%`})]})})]})})}const vr="_widget_1shxi_3",Sr="_complete_1shxi_28",br="_failed_1shxi_32",Pr="_header_1shxi_37",Tr="_statusIcon_1shxi_44",jr="_thinkingIcon_1shxi_55",kr="_completeIcon_1shxi_65",Ar="_failedIcon_1shxi_69",Ir="_titleSection_1shxi_73",Er="_title_1shxi_73",Nr="_status_1shxi_44",Dr="_minimizeBtn_1shxi_95",Cr="_progressBar_1shxi_116",Or="_progressFill_1shxi_122",zr="_footer_1shxi_137",Lr="_percent_1shxi_144",$r="_viewMore_1shxi_158",Br="_badge_1shxi_172",Rr="_widgetMinimized_1shxi_191",Fr="_miniIcon_1shxi_219",Mr="_spinning_1shxi_224",Ur="_miniProgress_1shxi_233",Vr="_expandBtn_1shxi_250",U={widget:vr,complete:Sr,failed:br,header:Pr,statusIcon:Tr,thinkingIcon:jr,completeIcon:kr,failedIcon:Ar,titleSection:Ir,title:Er,status:Nr,minimizeBtn:Dr,progressBar:Cr,progressFill:Or,footer:zr,percent:Lr,viewMore:$r,badge:Br,widgetMinimized:Rr,miniIcon:Fr,spinning:Mr,miniProgress:Ur,expandBtn:Vr};function qr(){const e=He(),[n,s]=o.useState([]),[a,i]=o.useState(!1),[c,l]=o.useState(!0),d=o.useRef(new Map),u=o.useCallback(async()=>{try{const g="https://apexai-api.azurewebsites.net/api",y=localStorage.getItem("token"),I=await fetch(`${g}/v1/background-agent/tasks`,{headers:{Authorization:`Bearer ${y}`}});if(!I.ok)return;const _=((await I.json()).tasks||[]).filter(T=>T.status==="pending"||T.status==="running");if(_.length>0){l(!1);for(const T of _)d.current.has(T.id)||v(T.id)}else(n.length===0||n.every(T=>T.isComplete))&&setTimeout(()=>l(!0),5e3)}catch(g){console.error("[AgentWidget] Error checking tasks:",g)}},[n]),v=g=>{const y="https://apexai-api.azurewebsites.net/api",I=localStorage.getItem("token"),L=`${y}/v1/agent-stream/${g}?token=${I}`,k=new EventSource(L);d.current.set(g,k),s(_=>_.some(T=>T.taskId===g)?_:[..._,{taskId:g,progress:null,lastUpdate:new Date().toISOString(),isComplete:!1}]),k.addEventListener("progress",_=>{const T=JSON.parse(_.data);s(M=>M.map(Y=>Y.taskId===g?{...Y,progress:T,lastUpdate:new Date().toISOString(),isComplete:T.status==="completed"||T.status==="failed"}:Y))}),k.addEventListener("event",_=>{const T=JSON.parse(_.data);(T.type==="task_complete"||T.type==="task_failed")&&(s(M=>M.map(Y=>Y.taskId===g?{...Y,isComplete:!0}:Y)),k.close(),d.current.delete(g))}),k.onerror=()=>{k.close(),d.current.delete(g)}};if(o.useEffect(()=>{u();const g=setInterval(u,1e4);return()=>{clearInterval(g),d.current.forEach(y=>y.close()),d.current.clear()}},[u]),c&&n.length===0)return null;const P=n.find(g=>!g.isComplete)||n[0];if(!P)return null;const b=P.progress,D=P.isComplete,F=(b==null?void 0:b.status)==="failed",G=()=>{e(`/app/agent-console/${P.taskId}`)};return a?t.jsxs("div",{className:U.widgetMinimized,onClick:G,children:[t.jsx("div",{className:U.miniIcon,children:D?F?t.jsx(At,{size:16}):t.jsx(wt,{size:16}):t.jsx($e,{size:16,className:U.spinning})}),t.jsx("div",{className:`${U.miniProgress} ${F?U.failed:D?U.complete:""}`,style:{width:`${(b==null?void 0:b.progress_percent)||0}%`}}),t.jsx("button",{className:U.expandBtn,onClick:g=>{g.stopPropagation(),i(!1)},children:t.jsx(Qt,{size:12})})]}):t.jsxs("div",{className:`${U.widget} ${D?F?U.failed:U.complete:""}`,onClick:G,children:[t.jsxs("div",{className:U.header,children:[t.jsx("div",{className:U.statusIcon,children:D?F?t.jsx(At,{size:18,className:U.failedIcon}):t.jsx(wt,{size:18,className:U.completeIcon}):t.jsx(Ws,{size:18,className:U.thinkingIcon})}),t.jsxs("div",{className:U.titleSection,children:[t.jsx("span",{className:U.title,children:D?F?"Task Failed":"Task Complete":"Agent Working"}),t.jsx("span",{className:U.status,children:(b==null?void 0:b.current_step)||"Initializing..."})]}),t.jsx("button",{className:U.minimizeBtn,onClick:g=>{g.stopPropagation(),i(!0)},children:t.jsx(Qs,{size:14})})]}),t.jsx("div",{className:U.progressBar,children:t.jsx("div",{className:`${U.progressFill} ${F?U.failed:D?U.complete:""}`,style:{width:`${(b==null?void 0:b.progress_percent)||0}%`}})}),t.jsxs("div",{className:U.footer,children:[t.jsxs("span",{className:U.percent,children:[(b==null?void 0:b.progress_percent)||0,"%"]}),t.jsxs("span",{className:U.viewMore,children:["View Details ",t.jsx(Jt,{size:14})]})]}),n.length>1&&t.jsxs("div",{className:U.badge,children:["+",n.length-1]})]})}const yt={to:"",cc:"",subject:"",body:"",attachments:[]},_s=o.createContext(null);function Jr({children:e}){const[n,s]=o.useState(!1),[a,i]=o.useState(!1),[c,l]=o.useState(yt),[d,u]=o.useState({isConnected:!1,provider:null,checkingStatus:!0,showSetupPrompt:!1});o.useEffect(()=>{v()},[]);const v=async()=>{var _,T;u(M=>({...M,checkingStatus:!0}));try{const Y=(await Re.getAll()).integrations||{};(_=Y.outlook)!=null&&_.isConnected?u({isConnected:!0,provider:"outlook",checkingStatus:!1,showSetupPrompt:!1}):(T=Y.google)!=null&&T.isConnected?u({isConnected:!0,provider:"gmail",checkingStatus:!1,showSetupPrompt:!1}):u({isConnected:!1,provider:null,checkingStatus:!1,showSetupPrompt:!1})}catch(M){console.error("Failed to check email integration:",M),u({isConnected:!1,provider:null,checkingStatus:!1,showSetupPrompt:!1})}},P=o.useCallback(()=>{u(_=>({..._,showSetupPrompt:!1}))},[]),b=o.useCallback(_=>{if(!d.isConnected&&!d.checkingStatus){u(T=>({...T,showSetupPrompt:!0}));return}l({...yt,..._}),s(!0),i(!1)},[d.isConnected,d.checkingStatus]),D=o.useCallback(async(_=!0)=>{if(_&&(c.to||c.subject||c.body))try{const T="https://apexai-api.azurewebsites.net/api",M=localStorage.getItem("apex-access-token")||localStorage.getItem("token")||"";await fetch(`${T}/integrations/outlook/drafts`,{method:"POST",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"},body:JSON.stringify({to:c.to,cc:c.cc,subject:c.subject,body:c.body})})}catch(T){console.error("Failed to save draft:",T)}s(!1),i(!1),l(yt)},[c]),F=o.useCallback(()=>{i(!0)},[]),G=o.useCallback(()=>{i(!1)},[]),g=o.useCallback(_=>{l(T=>({...T,..._}))},[]),y=o.useCallback(_=>{l(T=>({...T,attachments:[...T.attachments.filter(M=>M.id!==_.id),_]}))},[]),I=o.useCallback(_=>{l(T=>({...T,attachments:T.attachments.filter(M=>M.id!==_)}))},[]),L=o.useCallback(_=>{b({subject:`Document: ${_.name}`,body:`Please find the attached document.

Best regards`,attachments:[{id:_.id,name:_.name,size:_.size,type:"document"}]})},[b]),k=o.useCallback(_=>{const T=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(_.total);b({subject:`Invoice ${_.invoiceNumber} - ${T}`,body:`Dear ${_.clientName},

Please find attached Invoice ${_.invoiceNumber} for ${T}.

Payment is due upon receipt. Please let us know if you have any questions.

Best regards`,attachments:[{id:_.id,name:`Invoice_${_.invoiceNumber}.pdf`,size:0,type:"invoice"}]})},[b]);return t.jsx(_s.Provider,{value:{isOpen:n,draft:c,isMinimized:a,emailIntegration:d,openCompose:b,closeCompose:D,minimizeCompose:F,maximizeCompose:G,updateDraft:g,addAttachment:y,removeAttachment:I,dismissSetupPrompt:P,emailDocument:L,emailInvoice:k},children:e})}function Gr(){const e=o.useContext(_s);if(!e)throw new Error("useEmailCompose must be used within EmailComposeProvider");return e}const Hr="_composeContainer_mespz_2",Kr="_slideUp_mespz_1",Wr="_shiftedLeft_mespz_21",Qr="_composeHeader_mespz_37",Zr="_headerTitle_mespz_48",Yr="_headerActions_mespz_54",Xr="_notification_mespz_79",eo="_fadeIn_mespz_1",to="_success_mespz_95",so="_error_mespz_100",no="_composeForm_mespz_111",ao="_formField_mespz_118",io="_composeBody_mespz_146",ro="_attachmentsList_mespz_165",oo="_attachmentChip_mespz_174",co="_attachmentSize_mespz_193",lo="_composeFooter_mespz_217",uo="_sendBtn_mespz_226",mo="_toolbarActions_mespz_252",go="_toolbarBtn_mespz_258",po="_aiActive_mespz_277",ho="_attachDropdown_mespz_287",fo="_attachMenu_mespz_291",yo="_fadeUp_mespz_1",_o="_attachOption_mespz_311",xo="_attachDivider_mespz_330",wo="_attachSection_mespz_335",vo="_attachSectionLabel_mespz_339",So="_attachLoading_mespz_349",bo="_noAttachDocs_mespz_358",Po="_attachDocsList_mespz_366",To="_attachDocItem_mespz_371",jo="_attachedIcon_mespz_403",ko="_composeMinimized_mespz_408",Ao="_minimizedContent_mespz_435",Io="_minimizedSubject_mespz_440",Eo="_minimizedActions_mespz_449",No="_spinning_mespz_474",Do="_spin_mespz_474",Co="_setupPrompt_mespz_484",Oo="_setupPromptContent_mespz_498",zo="_setupPromptIcon_mespz_503",Lo="_setupAlertIcon_mespz_516",$o="_setupPromptActions_mespz_543",Bo="_setupDismissBtn_mespz_549",Ro="_setupConnectBtn_mespz_566",Fo="_attachments_mespz_165",Mo="_footerActions_mespz_646",j={composeContainer:Hr,slideUp:Kr,shiftedLeft:Wr,composeHeader:Qr,headerTitle:Zr,headerActions:Yr,notification:Xr,fadeIn:eo,success:to,error:so,composeForm:no,formField:ao,composeBody:io,attachmentsList:ro,attachmentChip:oo,attachmentSize:co,composeFooter:lo,sendBtn:uo,toolbarActions:mo,toolbarBtn:go,aiActive:po,attachDropdown:ho,attachMenu:fo,fadeUp:yo,attachOption:_o,attachDivider:xo,attachSection:wo,attachSectionLabel:vo,attachLoading:So,noAttachDocs:bo,attachDocsList:Po,attachDocItem:To,attachedIcon:jo,composeMinimized:ko,minimizedContent:Ao,minimizedSubject:Io,minimizedActions:Eo,spinning:No,spin:Do,setupPrompt:Co,setupPromptContent:Oo,setupPromptIcon:zo,setupAlertIcon:Lo,setupPromptActions:$o,setupDismissBtn:Bo,setupConnectBtn:Ro,attachments:Fo,footerActions:Mo};function Uo(){const e=He(),{isOpen:n,draft:s,isMinimized:a,emailIntegration:i,closeCompose:c,minimizeCompose:l,maximizeCompose:d,updateDraft:u,addAttachment:v,removeAttachment:P,dismissSetupPrompt:b}=Gr(),{isOpen:D,openChat:F,closeChat:G}=lt(),[g,y]=o.useState(!1),[I,L]=o.useState(!1),[k,_]=o.useState([]),[T,M]=o.useState(!1),[Y,de]=o.useState(null),[O,B]=o.useState(!1),ee=o.useRef(null),$=o.useRef(null),ge=()=>{B(!0);const S={to:s.to,cc:s.cc,subject:s.subject,body:s.body,attachments:s.attachments.map(q=>q.name)};F({label:"Email Assistant",contextType:"email_draft",suggestedQuestions:["Help me improve this email","Make it more professional","Make it shorter and more concise","Check for grammar and spelling","Suggest a better subject line"],additionalContext:{emailDraft:S,draftSummary:`Drafting email${s.to?` to: ${s.to}`:""}${s.subject?`
Subject: ${s.subject}`:""}${s.body?`

Body:
${s.body}`:""}`}})};o.useEffect(()=>{!D&&O&&B(!1)},[D,O]),o.useEffect(()=>{I&&k.length===0&&V()},[I]),o.useEffect(()=>{n&&!a&&$.current&&$.current.focus()},[n,a]);const V=async()=>{M(!0);try{const S=await Be.getAll();_((S.documents||[]).slice(0,20).map(q=>({id:q.id,name:q.name||q.originalName,size:q.size||0})))}catch(S){console.error("Failed to load documents:",S)}finally{M(!1)}},H=S=>{const q=S.target.files;q&&(Array.from(q).forEach(K=>{v({id:`file-${Date.now()}-${Math.random()}`,name:K.name,size:K.size,type:"file",data:K})}),ee.current&&(ee.current.value=""),L(!1))},ye=S=>{v({id:S.id,name:S.name,size:S.size,type:"document"}),L(!1)},se=S=>S?S<1024?`${S} B`:S<1024*1024?`${(S/1024).toFixed(1)} KB`:`${(S/1024/1024).toFixed(1)} MB`:"",R=async()=>{var S;if(!s.to.trim()){de({type:"error",message:"Please enter a recipient"}),setTimeout(()=>de(null),3e3);return}y(!0);try{const q=s.attachments.filter(K=>K.type==="document"||K.type==="invoice").map(K=>K.id);await((S=Re.sendOutlookEmail)==null?void 0:S.call(Re,{to:s.to,cc:s.cc||void 0,subject:s.subject,body:s.body,documentIds:q.length>0?q:void 0})),de({type:"success",message:"Email sent!"}),setTimeout(()=>{de(null),c(!1)},1500)}catch(q){de({type:"error",message:q.message||"Failed to send email"}),setTimeout(()=>de(null),3e3)}finally{y(!1)}},_e=()=>{(s.to||s.subject||s.body)&&!confirm("Discard this draft?")||c(!1)};return i.showSetupPrompt?t.jsx("div",{className:j.setupPrompt,children:t.jsxs("div",{className:j.setupPromptContent,children:[t.jsxs("div",{className:j.setupPromptIcon,children:[t.jsx(ot,{size:32}),t.jsx(jt,{size:16,className:j.setupAlertIcon})]}),t.jsx("h3",{children:"Connect Your Email"}),t.jsxs("p",{children:["To send emails from Apex, you need to connect your email account. We support ",t.jsx("strong",{children:"Microsoft Outlook"})," and ",t.jsx("strong",{children:"Gmail"}),"."]}),t.jsxs("div",{className:j.setupPromptActions,children:[t.jsx("button",{className:j.setupDismissBtn,onClick:b,children:"Cancel"}),t.jsxs("button",{className:j.setupConnectBtn,onClick:()=>{b(),e("/app/settings/integrations")},children:[t.jsx(Zt,{size:16}),"Go to Integrations"]})]})]})}):n?a?t.jsxs("div",{className:`${j.composeMinimized} ${O?j.shiftedLeft:""}`,onClick:d,children:[t.jsx("div",{className:j.minimizedContent,children:t.jsx("span",{className:j.minimizedSubject,children:s.subject||"New Message"})}),t.jsxs("div",{className:j.minimizedActions,children:[t.jsx("button",{onClick:S=>{S.stopPropagation(),d()},children:t.jsx(Qt,{size:14})}),t.jsx("button",{onClick:S=>{S.stopPropagation(),c(!0)},children:t.jsx(Se,{size:14})})]})]}):t.jsxs("div",{className:`${j.composeContainer} ${O?j.shiftedLeft:""}`,children:[Y&&t.jsxs("div",{className:`${j.notification} ${j[Y.type]}`,children:[Y.type==="success"?t.jsx(It,{size:14}):t.jsx(Se,{size:14}),Y.message]}),t.jsxs("div",{className:j.composeHeader,children:[t.jsx("span",{className:j.headerTitle,children:"New Message"}),t.jsxs("div",{className:j.headerActions,children:[t.jsx("button",{onClick:l,title:"Minimize",children:t.jsx(Zs,{size:14})}),t.jsx("button",{onClick:()=>c(!0),title:"Save & Close",children:t.jsx(Se,{size:14})})]})]}),t.jsxs("div",{className:j.composeForm,children:[t.jsxs("div",{className:j.formField,children:[t.jsx("label",{children:"To"}),t.jsx("input",{type:"text",value:s.to,onChange:S=>u({to:S.target.value}),placeholder:"Recipients"})]}),t.jsxs("div",{className:j.formField,children:[t.jsx("label",{children:"Cc"}),t.jsx("input",{type:"text",value:s.cc,onChange:S=>u({cc:S.target.value}),placeholder:"Cc"})]}),t.jsxs("div",{className:j.formField,children:[t.jsx("label",{children:"Subject"}),t.jsx("input",{type:"text",value:s.subject,onChange:S=>u({subject:S.target.value}),placeholder:"Subject"})]}),t.jsx("textarea",{ref:$,className:j.composeBody,value:s.body,onChange:S=>u({body:S.target.value}),placeholder:"Compose email..."}),s.attachments.length>0&&t.jsx("div",{className:j.attachmentsList,children:s.attachments.map(S=>t.jsxs("div",{className:j.attachmentChip,children:[S.type==="invoice"?t.jsx(Xe,{size:12}):t.jsx(Kt,{size:12}),t.jsx("span",{children:S.name}),S.size>0&&t.jsx("span",{className:j.attachmentSize,children:se(S.size)}),t.jsx("button",{onClick:()=>P(S.id),children:t.jsx(Se,{size:12})})]},S.id))})]}),t.jsxs("div",{className:j.composeFooter,children:[t.jsxs("button",{className:j.sendBtn,onClick:R,disabled:g||!s.to.trim(),children:[g?t.jsx($e,{size:16,className:j.spinning}):t.jsx(Ht,{size:16}),g?"Sending...":"Send"]}),t.jsxs("div",{className:j.toolbarActions,children:[t.jsxs("div",{className:j.attachDropdown,children:[t.jsx("button",{className:j.toolbarBtn,onClick:()=>L(!I),title:"Attach files",children:t.jsx(Gt,{size:18})}),I&&t.jsxs("div",{className:j.attachMenu,children:[t.jsxs("button",{className:j.attachOption,onClick:()=>{var S;(S=ee.current)==null||S.click()},children:[t.jsx(Ys,{size:16}),"Upload from computer"]}),t.jsx("div",{className:j.attachDivider}),t.jsxs("div",{className:j.attachSection,children:[t.jsx("span",{className:j.attachSectionLabel,children:"From Documents"}),T?t.jsxs("div",{className:j.attachLoading,children:[t.jsx($e,{size:14,className:j.spinning}),"Loading..."]}):k.length===0?t.jsx("span",{className:j.noAttachDocs,children:"No documents"}):t.jsx("div",{className:j.attachDocsList,children:k.map(S=>t.jsxs("button",{className:j.attachDocItem,onClick:()=>ye(S),disabled:s.attachments.some(q=>q.id===S.id),children:[t.jsx(Xe,{size:14}),t.jsx("span",{children:S.name}),s.attachments.some(q=>q.id===S.id)&&t.jsx(It,{size:14,className:j.attachedIcon})]},S.id))})]})]})]}),t.jsx("input",{ref:ee,type:"file",multiple:!0,style:{display:"none"},onChange:H}),t.jsx("button",{className:`${j.toolbarBtn} ${O?j.aiActive:""}`,onClick:ge,title:"AI Assistant",children:t.jsx(Ge,{size:18})}),t.jsx("button",{className:j.toolbarBtn,onClick:_e,title:"Discard",children:t.jsx(Xs,{size:18})})]})]})]}):null}const Vo="_status_1vhqw_2",qo="_fixed_1vhqw_14",Jo="_indicator_1vhqw_22",Go="_label_1vhqw_27",Ho="_retryIcon_1vhqw_31",Ko="_connected_1vhqw_41",Wo="_connecting_1vhqw_51",Qo="_spin_1vhqw_56",Zo="_disconnected_1vhqw_66",Yo="_error_1vhqw_77",Xo="_banner_1vhqw_88",ec="_slideDown_1vhqw_1",tc="_bannerContent_1vhqw_115",sc="_retryBtn_1vhqw_124",Ye={status:Vo,fixed:qo,indicator:Jo,label:Go,retryIcon:Ho,connected:Ko,connecting:Wo,spin:Qo,disconnected:Zo,error:Yo,banner:Xo,slideDown:ec,bannerContent:tc,retryBtn:sc};function nc(){const[e,n]=o.useState("connecting"),[s,a]=o.useState(null),[i,c]=o.useState(0),l=o.useCallback(async()=>{try{(await fetch("/api/health",{method:"GET",cache:"no-store",signal:AbortSignal.timeout(5e3)})).ok?(n("connected"),c(0)):n("error")}catch{i<3?n("connecting"):n("disconnected"),c(v=>v+1)}a(new Date)},[i]);o.useEffect(()=>{l();const u=setInterval(l,3e4),v=()=>{n("connecting"),l()},P=()=>n("disconnected");return window.addEventListener("online",v),window.addEventListener("offline",P),()=>{clearInterval(u),window.removeEventListener("online",v),window.removeEventListener("offline",P)}},[l]);const d=o.useCallback(()=>{n("connecting"),c(0),l()},[l]);return{status:e,lastChecked:s,retry:d}}function ac(){const{status:e,retry:n}=nc();return e==="connected"?null:t.jsx("div",{className:ie(Ye.banner,Ye[e]),children:t.jsx("div",{className:Ye.bannerContent,children:e==="connecting"?t.jsxs(t.Fragment,{children:[t.jsx($e,{size:16,className:Ye.spin}),t.jsx("span",{children:"Reconnecting to server..."})]}):t.jsxs(t.Fragment,{children:[t.jsx(en,{size:16}),t.jsx("span",{children:"Connection lost. Some features may be unavailable."}),t.jsxs("button",{onClick:n,className:Ye.retryBtn,children:[t.jsx(Tt,{size:14}),"Retry"]})]})})})}const Fe=typeof navigator<"u"&&/Mac|iPod|iPhone|iPad/.test(navigator.platform);function ic(){const e=He(),{openChat:n,closeChat:s,isOpen:a}=lt(),i=[{key:"k",meta:Fe,ctrl:!Fe,action:()=>{a?s():n({label:"Quick Chat"})},description:"Toggle AI Chat"},{key:"/",meta:Fe,ctrl:!Fe,action:()=>{const l=document.querySelector("[data-global-search]");l&&l.focus()},description:"Focus search"},{key:"d",alt:!0,action:()=>e("/app/dashboard"),description:"Go to Dashboard"},{key:"m",alt:!0,action:()=>e("/app/matters"),description:"Go to Matters"},{key:"b",alt:!0,action:()=>e("/app/background-agent"),description:"Go to Background Agent"},{key:"c",alt:!0,action:()=>e("/app/calendar"),description:"Go to Calendar"},{key:"o",alt:!0,action:()=>e("/app/documents"),description:"Go to Documents"},{key:"i",alt:!0,action:()=>e("/app/billing"),description:"Go to Billing"},{key:"n",shift:!0,meta:Fe,ctrl:!Fe,action:()=>e("/app/matters?new=true"),description:"New Matter"},{key:"Escape",action:()=>{a&&s()},description:"Close chat/modal"}],c=o.useCallback(l=>{const d=l.target;if(!((d.tagName==="INPUT"||d.tagName==="TEXTAREA"||d.isContentEditable)&&l.key!=="Escape"))for(const u of i){const v=u.meta?l.metaKey:!l.metaKey||!u.meta,P=u.ctrl?l.ctrlKey:!l.ctrlKey||!u.ctrl,b=u.shift?l.shiftKey:!l.shiftKey||!u.shift,D=u.alt?l.altKey:!l.altKey||!u.alt;if(l.key.toLowerCase()===u.key.toLowerCase()&&v&&P&&b&&D){l.preventDefault(),u.action();return}}},[i,a]);return o.useEffect(()=>(window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)),[c]),{shortcuts:i}}const rc="_layout_1kwwe_1",oc="_mobileOverlay_1kwwe_17",cc="_visible_1kwwe_28",lc="_sidebar_1kwwe_34",dc="_collapsed_1kwwe_48",uc="_mobileOpen_1kwwe_70",mc="_sidebarHeader_1kwwe_86",gc="_logo_1kwwe_100",pc="_logoIcon_1kwwe_106",hc="_logoText_1kwwe_112",fc="_toggleBtn_1kwwe_119",yc="_nav_1kwwe_135",_c="_navItem_1kwwe_144",xc="_active_1kwwe_167",wc="_aiNav_1kwwe_176",vc="_navDivider_1kwwe_193",Sc="_settingsSection_1kwwe_199",bc="_chevron_1kwwe_204",Pc="_rotated_1kwwe_209",Tc="_settingsSubmenu_1kwwe_213",jc="_subNavItem_1kwwe_221",kc="_integrationsSection_1kwwe_244",Ac="_sectionLabel_1kwwe_252",Ic="_integrationNav_1kwwe_262",Ec="_sidebarFooter_1kwwe_275",Nc="_firmInfo_1kwwe_280",Dc="_main_1kwwe_289",Cc="_header_1kwwe_307",Oc="_headerLeft_1kwwe_321",zc="_mobileMenuBtn_1kwwe_327",Lc="_pageTitle_1kwwe_346",$c="_headerRight_1kwwe_353",Bc="_headerTimer_1kwwe_360",Rc="_headerTimerPaused_1kwwe_371",Fc="_headerTimerDisplay_1kwwe_376",Mc="_headerTimerPulse_1kwwe_392",Uc="_paused_1kwwe_400",Vc="_headerTimerInfo_1kwwe_410",qc="_headerTimerMatter_1kwwe_417",Jc="_headerTimerElapsed_1kwwe_426",Gc="_headerTimerActions_1kwwe_437",Hc="_headerTimerBtn_1kwwe_443",Kc="_playBtn_1kwwe_455",Wc="_pauseBtn_1kwwe_465",Qc="_stopBtn_1kwwe_475",Zc="_headerDropdown_1kwwe_552",Yc="_iconBtn_1kwwe_556",Xc="_badge_1kwwe_575",el="_userBtn_1kwwe_591",tl="_avatar_1kwwe_609",sl="_userName_1kwwe_623",nl="_dropdown_1kwwe_650",al="_dropdownContent_1kwwe_676",il="_dropdownHeader_1kwwe_692",rl="_unreadBadge_1kwwe_715",ol="_logoutBtn_1kwwe_746",cl="_notifItem_1kwwe_752",ll="_unread_1kwwe_715",dl="_notifIcon_1kwwe_768",ul="_notifContent_1kwwe_780",ml="_content_1kwwe_801",gl="_aiFloatingBtn_1kwwe_829",h={layout:rc,mobileOverlay:oc,visible:cc,sidebar:lc,collapsed:dc,mobileOpen:uc,sidebarHeader:mc,logo:gc,logoIcon:pc,logoText:hc,toggleBtn:fc,nav:yc,navItem:_c,active:xc,aiNav:wc,navDivider:vc,settingsSection:Sc,chevron:bc,rotated:Pc,settingsSubmenu:Tc,subNavItem:jc,integrationsSection:kc,sectionLabel:Ac,integrationNav:Ic,sidebarFooter:Ec,firmInfo:Nc,main:Dc,header:Cc,headerLeft:Oc,mobileMenuBtn:zc,pageTitle:Lc,headerRight:$c,headerTimer:Bc,headerTimerPaused:Rc,headerTimerDisplay:Fc,headerTimerPulse:Mc,paused:Uc,headerTimerInfo:Vc,headerTimerMatter:qc,headerTimerElapsed:Jc,headerTimerActions:Gc,headerTimerBtn:Hc,playBtn:Kc,pauseBtn:Wc,stopBtn:Qc,headerDropdown:Zc,iconBtn:Yc,badge:Xc,userBtn:el,avatar:tl,userName:sl,dropdown:nl,dropdownContent:al,dropdownHeader:il,unreadBadge:rl,logoutBtn:ol,notifItem:cl,unread:ll,notifIcon:dl,notifContent:ul,content:ml,aiFloatingBtn:gl},pl={outlook:{label:"Outlook",icon:ot,path:"/app/integrations/outlook"},google:{label:"Google Calendar",icon:Xt,path:"/app/integrations/google-calendar"},quickbooks:{label:"QuickBooks",icon:hn,path:"/app/integrations/quickbooks"},onedrive:{label:"OneDrive",icon:pn,path:"/app/integrations/onedrive"},googledrive:{label:"Google Drive",icon:gn,path:"/app/integrations/google-drive"},dropbox:{label:"Dropbox",icon:es,path:"/app/integrations/dropbox"},docusign:{label:"DocuSign",icon:Xe,path:"/app/integrations/docusign"},slack:{label:"Slack",icon:Wt,path:"/app/integrations/slack"},zoom:{label:"Zoom",icon:mn,path:"/app/integrations/zoom"},quicken:{label:"Quicken",icon:kt,path:"/app/integrations/quicken"}},Lt=[{path:"/app/dashboard",label:"Dashboard",icon:tn},{path:"/app/matters",label:"Matters",icon:Yt},{path:"/app/clients",label:"Clients",icon:sn},{path:"/app/calendar",label:"Calendar",icon:Xt},{path:"/app/billing",label:"Billing",icon:kt},{path:"/app/apex-pay",label:"Apex Pay",icon:nn},{path:"/app/time",label:"Time Tracking",icon:St},{path:"/app/documents",label:"Documents",icon:es},{path:"/app/document-automation",label:"Document Automation",icon:an},{path:"/app/reports",label:"Reports",icon:rn},{path:"/app/analytics",label:"Analytics",icon:on}],$t=[{path:"/app/settings",label:"My Settings",icon:ts},{path:"/app/settings/security",label:"Security",icon:ss},{path:"/app/settings/firm",label:"Firm Settings",icon:cn},{path:"/app/settings/team",label:"Team & Groups",icon:ln},{path:"/app/settings/integrations",label:"Integrations",icon:dn},{path:"/app/settings/api-keys",label:"API Keys",icon:un},{path:"/app/admin",label:"Firm Admin",icon:ns}];function hl(){var re,N,E,ne;const{user:e,firm:n,logout:s}=ct(),{notifications:a,fetchMatterTypes:i}=hs(),{fetchAll:c,isInitialized:l}=ca(),{fetchAll:d,isInitialized:u}=la(),{timer:v,isTimerActive:P,pauseTimer:b,resumeTimer:D,stopTimer:F}=In(),G=He(),g=Pt();ic();const[y,I]=o.useState(!0),[L,k]=o.useState(!1),[_,T]=o.useState(!1),[M,Y]=o.useState(!1),[de,O]=o.useState(!1),[B,ee]=o.useState(!1),[$,ge]=o.useState([]),{isOpen:V,openChat:H,closeChat:ye}=lt(),se=a.filter(w=>!w.read).length,[R,_e]=o.useState(!1);o.useEffect(()=>{(async()=>{try{const X=await Re.getAll(),te=Object.entries(X.integrations||{}).filter(([xe,We])=>We==null?void 0:We.isConnected).map(([xe])=>xe);_e(te.includes("outlook"));const Ee=te.filter(xe=>xe!=="outlook"),Ke=[...new Set(Ee)];ge(Ke)}catch{_e(!1)}})()},[g.pathname]),o.useEffect(()=>{i(),l||c(),u||d()},[i,c,d,l,u]),o.useEffect(()=>{const w=()=>{ee(window.innerWidth<=768),window.innerWidth>768&&k(!1)};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),o.useEffect(()=>{B&&k(!1)},[g.pathname,B]),o.useEffect(()=>{const w=()=>{H()};return window.addEventListener("openAIChat",w),()=>window.removeEventListener("openAIChat",w)},[H]),o.useEffect(()=>{const w=()=>{Y(!1),O(!1)};if(M||de)return document.addEventListener("click",w),()=>document.removeEventListener("click",w)},[M,de]);const S=()=>{s(),G("/login")},q=()=>{F(),G("/app/time",{state:{showSaveModal:!0}})},K=()=>{k(!L)},pe=()=>{k(!1)};return t.jsx(Jr,{children:t.jsxs("div",{className:h.layout,children:[t.jsx(ac,{}),t.jsx("div",{className:ie(h.mobileOverlay,L&&h.visible),onClick:pe}),t.jsxs("aside",{className:ie(h.sidebar,!y&&h.collapsed,L&&h.mobileOpen),children:[t.jsxs("div",{className:h.sidebarHeader,children:[t.jsxs("div",{className:h.logo,children:[t.jsx("div",{className:h.logoIcon,children:t.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 32 32",fill:"none",children:[t.jsx("path",{d:"M16 4L28 28H4L16 4Z",fill:"url(#grad)",stroke:"#F59E0B",strokeWidth:"1.5"}),t.jsx("circle",{cx:"16",cy:"19",r:"3",fill:"#0B0F1A"}),t.jsx("defs",{children:t.jsxs("linearGradient",{id:"grad",x1:"16",y1:"4",x2:"16",y2:"28",children:[t.jsx("stop",{stopColor:"#FBBF24"}),t.jsx("stop",{offset:"1",stopColor:"#F59E0B"})]})})]})}),(y||B)&&t.jsx("span",{className:h.logoText,children:"Apex"})]}),B&&t.jsx("button",{className:h.toggleBtn,onClick:pe,children:t.jsx(Se,{size:18})})]}),t.jsxs("nav",{className:h.nav,children:[Lt.map(w=>t.jsxs(Ze,{to:w.path,className:({isActive:X})=>ie(h.navItem,X&&h.active),children:[t.jsx(w.icon,{size:20}),(y||B)&&t.jsx("span",{children:w.label})]},w.path)),R&&t.jsxs(Ze,{to:"/app/integrations/outlook",className:({isActive:w})=>ie(h.navItem,w&&h.active),children:[t.jsx(ot,{size:20}),(y||B)&&t.jsx("span",{children:"Outlook"})]}),t.jsxs(Ze,{to:"/app/ai",className:({isActive:w})=>ie(h.navItem,h.aiNav,w&&h.active),children:[t.jsx(Ge,{size:20}),(y||B)&&t.jsx("span",{children:"AI Assistant"})]}),t.jsx("div",{className:h.navDivider}),t.jsxs("div",{className:h.settingsSection,children:[t.jsxs("button",{className:ie(h.navItem,_&&h.expanded),onClick:()=>T(!_),children:[t.jsx(Zt,{size:20}),(y||B)&&t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"Settings"}),t.jsx(Et,{size:16,className:ie(h.chevron,_&&h.rotated)})]})]}),_&&(y||B)&&t.jsx("div",{className:h.settingsSubmenu,children:$t.map(w=>t.jsxs(Ze,{to:w.path,className:({isActive:X})=>ie(h.subNavItem,X&&h.active),children:[t.jsx(w.icon,{size:16}),t.jsx("span",{children:w.label})]},w.path))})]}),$.length>0&&t.jsxs("div",{className:h.integrationsSection,children:[(y||B)&&t.jsx("span",{className:h.sectionLabel,children:"Connected"}),$.map(w=>{const X=pl[w];if(!X)return null;const te=X.icon;return t.jsxs(Ze,{to:X.path,className:({isActive:Ee})=>ie(h.navItem,h.integrationNav,Ee&&h.active),children:[t.jsx(te,{size:20}),(y||B)&&t.jsx("span",{children:X.label})]},w)})]})]}),(y||B)&&t.jsx("div",{className:h.sidebarFooter,children:t.jsxs("div",{className:h.firmInfo,children:[t.jsx(ns,{size:14}),t.jsx("span",{children:(n==null?void 0:n.name)||"Setup Required"})]})})]}),t.jsxs("div",{className:h.main,children:[t.jsxs("header",{className:h.header,children:[t.jsxs("div",{className:h.headerLeft,children:[t.jsx("button",{className:h.mobileMenuBtn,onClick:K,"aria-label":"Open menu",children:t.jsx(fn,{size:20})}),t.jsx("h1",{className:h.pageTitle,children:((re=Lt.find(w=>g.pathname.startsWith(w.path)))==null?void 0:re.label)||((N=$t.find(w=>g.pathname===w.path))==null?void 0:N.label)||(g.pathname==="/app/ai"?"AI Assistant":"Dashboard")})]}),t.jsxs("div",{className:h.headerRight,children:[P&&t.jsxs("div",{className:ie(h.headerTimer,v.isPaused&&h.headerTimerPaused),children:[t.jsxs("button",{className:h.headerTimerDisplay,onClick:()=>G("/app/time"),title:"Go to Time Tracking",children:[t.jsx("div",{className:ie(h.headerTimerPulse,v.isPaused&&h.paused),children:t.jsx(St,{size:16})}),t.jsxs("div",{className:h.headerTimerInfo,children:[t.jsx("span",{className:h.headerTimerMatter,children:v.matterName||"Timer"}),t.jsx("span",{className:ie(h.headerTimerElapsed,v.isPaused&&h.paused),children:En(v.elapsed)})]})]}),t.jsxs("div",{className:h.headerTimerActions,children:[v.isPaused?t.jsx("button",{className:ie(h.headerTimerBtn,h.playBtn),onClick:D,title:"Resume Timer",children:t.jsx(yn,{size:14})}):t.jsx("button",{className:ie(h.headerTimerBtn,h.pauseBtn),onClick:b,title:"Pause Timer",children:t.jsx(_n,{size:14})}),t.jsx("button",{className:ie(h.headerTimerBtn,h.stopBtn),onClick:q,title:"Stop Timer",children:t.jsx(xn,{size:14})})]})]}),t.jsxs("div",{className:h.headerDropdown,children:[t.jsxs("button",{className:h.iconBtn,onClick:w=>{w.stopPropagation(),Y(!M),O(!1)},children:[t.jsx(Nt,{size:20}),se>0&&t.jsx("span",{className:h.badge,children:se})]}),M&&t.jsxs("div",{className:h.dropdown,children:[t.jsxs("div",{className:h.dropdownHeader,children:[t.jsx("span",{children:"Notifications"}),se>0&&t.jsxs("span",{className:h.unreadBadge,children:[se," new"]})]}),t.jsx("div",{className:h.dropdownContent,children:a.slice(0,5).map(w=>t.jsxs("div",{className:ie(h.notifItem,!w.read&&h.unread),onClick:()=>{w.actionUrl&&G(w.actionUrl),Y(!1)},children:[t.jsxs("div",{className:h.notifIcon,children:[w.type==="ai_insight"&&t.jsx(Ge,{size:14}),w.type==="deadline_reminder"&&t.jsx(St,{size:14}),w.type==="invoice_overdue"&&t.jsx(kt,{size:14}),w.type==="document_shared"&&t.jsx(wn,{size:14}),w.type==="task_assigned"&&t.jsx(Yt,{size:14}),w.type==="mention"&&t.jsx(Nt,{size:14})]}),t.jsxs("div",{className:h.notifContent,children:[t.jsx("strong",{children:w.title}),t.jsx("p",{children:w.message})]})]},w.id))})]})]}),t.jsxs("div",{className:h.headerDropdown,children:[t.jsxs("button",{className:h.userBtn,onClick:w=>{w.stopPropagation(),O(!de),Y(!1)},children:[t.jsxs("div",{className:h.avatar,children:[(E=e==null?void 0:e.firstName)==null?void 0:E[0],(ne=e==null?void 0:e.lastName)==null?void 0:ne[0]]}),t.jsxs("span",{className:h.userName,children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),t.jsx(Et,{size:16})]}),de&&t.jsxs("div",{className:h.dropdown,children:[t.jsx("div",{className:h.dropdownHeader,children:t.jsxs("div",{children:[t.jsxs("strong",{children:[e==null?void 0:e.firstName," ",e==null?void 0:e.lastName]}),t.jsx("p",{children:e==null?void 0:e.email})]})}),t.jsxs("div",{className:h.dropdownContent,children:[t.jsxs("button",{onClick:()=>{G("/app/settings"),O(!1)},children:[t.jsx(ts,{size:16}),t.jsx("span",{children:"My Settings"})]}),t.jsxs("button",{onClick:()=>{G("/app/settings/security"),O(!1)},children:[t.jsx(ss,{size:16}),t.jsx("span",{children:"Security"})]}),t.jsxs("button",{onClick:S,className:h.logoutBtn,children:[t.jsx(vn,{size:16}),t.jsx("span",{children:"Sign Out"})]})]})]})]})]})]}),t.jsx("main",{className:h.content,children:t.jsx(Ds,{})})]}),g.pathname!=="/app/ai"&&t.jsx("button",{className:h.aiFloatingBtn,onClick:()=>H(),title:"Open AI Assistant",children:t.jsx(Ge,{size:24})}),t.jsx(Qi,{isOpen:V,onClose:ye}),t.jsx(wr,{}),t.jsx(qr,{}),t.jsx(Uo,{})]})})}const fl=o.lazy(()=>p(()=>import("./LandingPage-DQPvzCzu.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(e=>({default:e.LandingPage}))),yl=o.lazy(()=>p(()=>import("./LoginPage-ymiLg17a.js"),__vite__mapDeps([8,1,2,3,4,5,9,10,6,11])).then(e=>({default:e.LoginPage}))),_l=o.lazy(()=>p(()=>import("./RegisterPage-C9F3621Z.js"),__vite__mapDeps([12,1,2,3,4,5,9,10,6,11])).then(e=>({default:e.RegisterPage}))),xl=o.lazy(()=>p(()=>import("./ForgotPasswordPage-C_Ypl4PW.js"),__vite__mapDeps([13,1,2,3,4,5,9,10,6])).then(e=>({default:e.ForgotPasswordPage}))),wl=o.lazy(()=>p(()=>import("./ResetPasswordPage-BQMlCDoe.js"),__vite__mapDeps([14,1,2,3,4,5,9,10,6])).then(e=>({default:e.ResetPasswordPage}))),vl=o.lazy(()=>p(()=>import("./FirmSetupPage-D7lNmqH7.js"),__vite__mapDeps([15,1,2,3,4,9,10,5,6,11])).then(e=>({default:e.FirmSetupPage}))),Sl=o.lazy(()=>p(()=>import("./DashboardPage-DoWhxNkN.js"),__vite__mapDeps([16,1,2,3,4,5,6,17,18,19,11,20])).then(e=>({default:e.DashboardPage}))),bl=o.lazy(()=>p(()=>import("./MattersPage-DurNq9Yr.js"),__vite__mapDeps([21,1,2,3,4,5,22,6,23,24,25,26,27,18,11,28])).then(e=>({default:e.MattersPage}))),Pl=o.lazy(()=>p(()=>import("./MatterDetailPage-CUrmrnTC.js"),__vite__mapDeps([29,1,2,3,4,5,17,30,31,26,6,27,22,23,32,18,33,11,34])).then(e=>({default:e.MatterDetailPage}))),Tl=o.lazy(()=>p(()=>import("./ClientsPage-i_vjMgff.js"),__vite__mapDeps([35,1,2,3,4,5,24,25,26,6,27,11])).then(e=>({default:e.ClientsPage}))),jl=o.lazy(()=>p(()=>import("./ClientDetailPage-DD-eNvwD.js"),__vite__mapDeps([36,1,2,3,4,5,17,30,31,26,6,27,18,11])).then(e=>({default:e.ClientDetailPage}))),_t=o.lazy(()=>p(()=>import("./CalendarPage-D7zGad2g.js"),__vite__mapDeps([37,1,2,3,4,18,6,5,11,38])).then(e=>({default:e.CalendarPage}))),kl=o.lazy(()=>p(()=>import("./BillingPage-DXasF3mH.js"),__vite__mapDeps([39,1,2,3,4,5,26,6,27,18,11,40])).then(e=>({default:e.BillingPage}))),Al=o.lazy(()=>p(()=>import("./TimeTrackingPage-C4H72W6d.js"),__vite__mapDeps([41,1,2,3,4,5,17,18,6,11,42])).then(e=>({default:e.TimeTrackingPage}))),Il=o.lazy(()=>p(()=>import("./ReportsPage-9QvCVadm.js"),__vite__mapDeps([43,1,2,3,4,6,19,18,5,11,44])).then(e=>({default:e.ReportsPage}))),Bt=o.lazy(()=>p(()=>import("./DocumentsPage-2w6Odrs7.js"),__vite__mapDeps([45,1,2,3,4,46,11,6,26,27,32,5,18,33,47])).then(e=>({default:e.DocumentsPage}))),El=o.lazy(()=>p(()=>import("./AIAssistantPage-CyoSX3rw.js"),__vite__mapDeps([48,1,2,3,4,5,46,11,49,6,18,50])).then(e=>({default:e.AIAssistantPage}))),Nl=o.lazy(()=>p(()=>import("./BackgroundAgentPage-BESLY2rh.js"),__vite__mapDeps([51,1,2,3,4,6,5,11,52])).then(e=>({default:e.BackgroundAgentPage}))),Dl=o.lazy(()=>p(()=>import("./AgentConsolePage-BtN0Fr1w.js"),__vite__mapDeps([53,1,2,3,4,5,6,54])).then(e=>({default:e.AgentConsolePage}))),Cl=o.lazy(()=>p(()=>import("./SettingsPage-CU0kD_NX.js"),__vite__mapDeps([55,1,2,3,4,56,57,5,6,11])).then(e=>({default:e.SettingsPage}))),Ol=o.lazy(()=>p(()=>import("./SettingsHubPage-C7w2-3HA.js"),__vite__mapDeps([58,1,2,3,4,5,6,11,59])).then(e=>({default:e.SettingsHubPage}))),zl=o.lazy(()=>p(()=>import("./FirmSettingsPage-Ba2YeNtn.js"),__vite__mapDeps([60,1,2,3,4,5,6,11,61])).then(e=>({default:e.FirmSettingsPage}))),Ll=o.lazy(()=>p(()=>import("./FirmAdminPage-B7yb_8hJ.js"),__vite__mapDeps([62,1,2,3,4,5,6,18,11,63])).then(e=>({default:e.FirmAdminPage}))),$l=o.lazy(()=>p(()=>import("./PermissionsSettingsPage-Bz3Wf1ik.js"),__vite__mapDeps([64,1,2,3,4,5,6,11,65])).then(e=>({default:e.PermissionsSettingsPage}))),Bl=o.lazy(()=>p(()=>import("./PermissionsAdminPage-CpOY8GDT.js"),__vite__mapDeps([66,1,2,3,4,11,5,6,67]))),Rl=o.lazy(()=>p(()=>import("./TeamPage-CQaYXtKv.js"),__vite__mapDeps([68,1,2,3,4,5,6,11,69])).then(e=>({default:e.TeamPage}))),Fl=o.lazy(()=>p(()=>import("./APIKeysPage-OZAeX2jy.js"),__vite__mapDeps([70,1,2,3,4,5,6,18,11,71])).then(e=>({default:e.APIKeysPage}))),Ml=o.lazy(()=>p(()=>import("./IntegrationsPage-DtIJlv_A.js"),__vite__mapDeps([72,1,2,3,4,5,6,11,73])).then(e=>({default:e.IntegrationsPage}))),Ul=o.lazy(()=>p(()=>import("./OutlookIntegrationPage-Dn8mtruY.js"),__vite__mapDeps([74,1,2,3,4,5,6,11,75])).then(e=>({default:e.OutlookIntegrationPage}))),Vl=o.lazy(()=>p(()=>import("./FileStorageIntegrationPage-CxWIiZYs.js"),__vite__mapDeps([76,1,2,3,4,5,6,11,77])).then(e=>({default:e.FileStorageIntegrationPage}))),Rt=o.lazy(()=>p(()=>import("./QuickBooksIntegrationPage-FT5KYOpe.js"),__vite__mapDeps([78,1,2,3,4,79,80,5,6,11])).then(e=>({default:e.QuickBooksIntegrationPage}))),xt=o.lazy(()=>p(()=>import("./CloudStorageIntegrationPage-D5U19y9E.js"),__vite__mapDeps([81,1,2,3,4,79,80,5,6,11])).then(e=>({default:e.CloudStorageIntegrationPage}))),ql=o.lazy(()=>p(()=>import("./SlackIntegrationPage-BKWbiAAO.js"),__vite__mapDeps([82,1,2,3,4,79,80,5,6,11])).then(e=>({default:e.SlackIntegrationPage}))),Jl=o.lazy(()=>p(()=>import("./SecuritySettingsPage-CncUkFto.js"),__vite__mapDeps([83,1,2,3,4,5,6,18,11,84])).then(e=>({default:e.SecuritySettingsPage}))),Gl=o.lazy(()=>p(()=>import("./FirmAnalyticsPage-D-QnF2CT.js"),__vite__mapDeps([85,1,2,3,4,17,6,18,19,5,11,86])).then(e=>({default:e.FirmAnalyticsPage}))),Hl=o.lazy(()=>p(()=>import("./TrustAccountingPage-oijz4_Gs.js"),__vite__mapDeps([87,1,2,3,4,6,18,5,11,88])).then(e=>({default:e.TrustAccountingPage}))),Kl=o.lazy(()=>p(()=>import("./RecoveryBinPage-B9E6qfsV.js"),__vite__mapDeps([89,1,2,3,4,5,6,18,90])).then(e=>({default:e.RecoveryBinPage}))),Wl=o.lazy(()=>p(()=>import("./CustomFieldsPage-8388i_Xc.js"),__vite__mapDeps([91,1,2,3,4,5,6,11,92])).then(e=>({default:e.CustomFieldsPage}))),Ql=o.lazy(()=>p(()=>import("./CourtRulesPage-DdBKVTGC.js"),__vite__mapDeps([93,1,2,3,4,5,6,18,94])).then(e=>({default:e.CourtRulesPage}))),Zl=o.lazy(()=>p(()=>import("./TextSnippetsPage-X_kmlhjp.js"),__vite__mapDeps([95,1,2,3,4,5,6,96])).then(e=>({default:e.TextSnippetsPage}))),Ft=o.lazy(()=>p(()=>import("./DocumentAutomationPage-D1dqRQv8.js"),__vite__mapDeps([97,1,2,3,4,5,6,11,98])).then(e=>({default:e.DocumentAutomationPage}))),Yl=o.lazy(()=>p(()=>import("./DocumentTemplatesPage-BWMpRRd5.js"),__vite__mapDeps([99,1,2,3,4,6,18,5,11,100])).then(e=>({default:e.DocumentTemplatesPage}))),Xl=o.lazy(()=>p(()=>import("./WorkflowsPage-DzjZYx6f.js"),__vite__mapDeps([101,1,2,3,4,5,6,11,102])).then(e=>({default:e.WorkflowsPage}))),ed=o.lazy(()=>p(()=>import("./BulkPermissionsPage-CjvEIhV3.js"),__vite__mapDeps([103,1,2,3,4,5,6,11,104])).then(e=>({default:e.BulkPermissionsPage}))),td=o.lazy(()=>p(()=>import("./AdminPortalPage-B7v-jtEP.js"),__vite__mapDeps([105,1,2,3,4,5,6,18,11,106])).then(e=>({default:e.AdminPortalPage}))),sd=o.lazy(()=>p(()=>import("./SecureAdminLogin-2mLWu_xM.js"),__vite__mapDeps([107,1,2,3,4,5,6,108]))),nd=o.lazy(()=>p(()=>import("./SecureAdminDashboard-DPHkhiVj.js"),__vite__mapDeps([109,1,2,3,4,5,6,11,110]))),ad=o.lazy(()=>p(()=>import("./AccountSettingsPage-DuP2THFy.js"),__vite__mapDeps([111,1,2,3,4,56,57,5,6,11])).then(e=>({default:e.AccountSettingsPage}))),id=o.lazy(()=>p(()=>import("./AppearanceSettingsPage-DghYZjQo.js"),__vite__mapDeps([112,1,2,3,4,56,57,5,6])).then(e=>({default:e.AppearanceSettingsPage}))),rd=o.lazy(()=>p(()=>import("./MobileSettingsPage-Cf5fC1CQ.js"),__vite__mapDeps([113,1,2,3,4,56,57,5,6,11])).then(e=>({default:e.MobileSettingsPage}))),od=o.lazy(()=>p(()=>import("./AppsSettingsPage-1mhJsQsh.js"),__vite__mapDeps([114,1,2,3,4,56,57,5,6])).then(e=>({default:e.AppsSettingsPage}))),cd=o.lazy(()=>p(()=>import("./NotificationsSettingsPage-BQKrUAA6.js"),__vite__mapDeps([115,1,2,3,4,56,57,5,6])).then(e=>({default:e.NotificationsSettingsPage}))),ld=o.lazy(()=>p(()=>import("./ReferralsPage-DhHtzA-7.js"),__vite__mapDeps([116,1,2,3,4,56,57,5,6])).then(e=>({default:e.ReferralsPage}))),dd=o.lazy(()=>p(()=>import("./BillingSettingsPage-DThecf_Y.js"),__vite__mapDeps([117,1,2,3,4,56,57,5,6,11])).then(e=>({default:e.BillingSettingsPage}))),ud=o.lazy(()=>p(()=>import("./PaymentsSettingsPage-w9ne389B.js"),__vite__mapDeps([118,1,2,3,4,56,57,5,6,11])).then(e=>({default:e.PaymentsSettingsPage}))),md=o.lazy(()=>p(()=>import("./DataEscrowPage-BYjFd2SI.js"),__vite__mapDeps([119,1,2,3,4,56,57,5,6,11])).then(e=>({default:e.DataEscrowPage}))),gd=o.lazy(()=>p(()=>import("./SharingSettingsPage-2gqo7TFu.js"),__vite__mapDeps([120,1,2,3,4,56,57,5,6,11])).then(e=>({default:e.SharingSettingsPage}))),pd=o.lazy(()=>p(()=>import("./TextMessagingPage-CIVwlAnT.js"),__vite__mapDeps([121,1,2,3,4,56,57,5,6])).then(e=>({default:e.TextMessagingPage}))),hd=o.lazy(()=>p(()=>import("./AIConfigPage-B7M8AJZU.js"),__vite__mapDeps([122,1,2,3,4,56,57,5,6,11])).then(e=>({default:e.AIConfigPage}))),fd=o.lazy(()=>p(()=>import("./ReportingSettingsPage-DP-2_l_S.js"),__vite__mapDeps([123,1,2,3,4,56,57,5,6])).then(e=>({default:e.ReportingSettingsPage}))),yd=o.lazy(()=>p(()=>import("./RedlineAIPage-DkNahM0h.js"),__vite__mapDeps([124,1,2,3,4,49,5,6,11,125])).then(e=>({default:e.RedlineAIPage}))),_d=o.lazy(()=>p(()=>import("./ApexPayPage-CIwp_VFB.js"),__vite__mapDeps([126,1,2,3,4,5,6,11,127])).then(e=>({default:e.ApexPayPage}))),Mt=o.lazy(()=>p(()=>import("./ApexPaySettingsPage-36ch22vf.js"),__vite__mapDeps([128,1,2,3,4,5,56,57,6,11])).then(e=>({default:e.ApexPaySettingsPage}))),xd=o.lazy(()=>p(()=>import("./ApexDrivePage-BRJ8tk0q.js"),__vite__mapDeps([129,1,2,3,4,5,6,11,130])).then(e=>({default:e.ApexDrivePage}))),wd=o.lazy(()=>p(()=>import("./DriveBrowsePage-BG1_X0dP.js"),__vite__mapDeps([131,1,2,3,4,5,6,11,132])).then(e=>({default:e.DriveBrowsePage}))),Ut=o.lazy(()=>p(()=>import("./DriveSetupPage-DO3nMWHA.js"),__vite__mapDeps([133,1,2,3,4,5,6,11,134])).then(e=>({default:e.DriveSetupPage}))),vd=o.lazy(()=>p(()=>import("./DocumentVersionsPage-Ci9C96k6.js"),__vite__mapDeps([135,1,2,3,4,26,6,27,5,18,11,136])).then(e=>({default:e.DocumentVersionsPage}))),Sd=o.lazy(()=>p(()=>import("./DocumentComparePage-BvLUeCoH.js"),__vite__mapDeps([137,1,2,3,4,5,6,18,11,138])).then(e=>({default:e.DocumentComparePage}))),bd=o.lazy(()=>p(()=>import("./FolderPermissionsPage-D7Fqe5UH.js"),__vite__mapDeps([139,1,2,3,4,5,6,11,140])).then(e=>({default:e.FolderPermissionsPage}))),Pd=o.lazy(()=>p(()=>import("./AboutPage-Ch2smnjg.js"),__vite__mapDeps([141,1,2,3,4,5,142,143,6])).then(e=>({default:e.AboutPage}))),Td=o.lazy(()=>p(()=>import("./SecurityPage-CEX0_gph.js"),__vite__mapDeps([144,1,2,3,4,5,142,143,6])).then(e=>({default:e.SecurityPage}))),jd=o.lazy(()=>p(()=>import("./IntegrationsPublicPage-YcuW6d-n.js"),__vite__mapDeps([145,1,2,3,4,5,142,143,6])).then(e=>({default:e.IntegrationsPublicPage}))),kd=o.lazy(()=>p(()=>import("./BlogPage-URvHW31v.js"),__vite__mapDeps([146,1,2,3,4,5,142,143,6])).then(e=>({default:e.BlogPage}))),Ad=o.lazy(()=>p(()=>import("./ContactPage-CEyynEAv.js"),__vite__mapDeps([147,1,2,3,4,5,142,143,6])).then(e=>({default:e.ContactPage}))),Id=o.lazy(()=>p(()=>import("./DocsPage-DSs24uwP.js"),__vite__mapDeps([148,1,2,3,4,5,142,143,6])).then(e=>({default:e.DocsPage}))),Ed=o.lazy(()=>p(()=>import("./APIReferencePage-B9BUxyz-.js"),__vite__mapDeps([149,1,2,3,4,5,142,143,6])).then(e=>({default:e.APIReferencePage}))),Nd=o.lazy(()=>p(()=>import("./SupportPage-C2UjRRAq.js"),__vite__mapDeps([150,1,2,3,4,5,142,143,6])).then(e=>({default:e.SupportPage}))),Dd=o.lazy(()=>p(()=>import("./StatusPage-ClfYhl7r.js"),__vite__mapDeps([151,1,2,3,4,5,142,143,6])).then(e=>({default:e.StatusPage}))),Cd=o.lazy(()=>p(()=>import("./PrivacyPage-BkDPImHE.js"),__vite__mapDeps([152,1,2,3,4,5,142,143,6])).then(e=>({default:e.PrivacyPage}))),Od=o.lazy(()=>p(()=>import("./TermsPage-DAXXhVaF.js"),__vite__mapDeps([153,1,2,3,4,5,142,143,6])).then(e=>({default:e.TermsPage}))),zd=o.lazy(()=>p(()=>import("./EULAPage-D2lCK-m9.js"),__vite__mapDeps([154,1,2,3,4,5,142,143,6])).then(e=>({default:e.EULAPage}))),Ld=o.lazy(()=>p(()=>import("./CompliancePage-CtPyZiPm.js"),__vite__mapDeps([155,1,2,3,4,5,142,143,6])).then(e=>({default:e.CompliancePage})));function $d(){const{pathname:e}=Pt();return o.useEffect(()=>{window.scrollTo(0,0)},[e]),null}function Bd(){return t.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 100%)",color:"#fff"},children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 32 32",fill:"none",style:{marginBottom:"1rem"},children:[t.jsx("path",{d:"M16 4L28 28H4L16 4Z",fill:"url(#loadGrad)",stroke:"#F59E0B",strokeWidth:"1.5"}),t.jsx("circle",{cx:"16",cy:"19",r:"3",fill:"#0B0F1A"}),t.jsx("defs",{children:t.jsxs("linearGradient",{id:"loadGrad",x1:"16",y1:"4",x2:"16",y2:"28",children:[t.jsx("stop",{stopColor:"#FBBF24"}),t.jsx("stop",{offset:"1",stopColor:"#F59E0B"})]})})]}),t.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid rgba(245, 158, 11, 0.2)",borderTopColor:"#F59E0B",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),t.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]})})}function Rd(){return t.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 100%)",color:"#fff"},children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 32 32",fill:"none",style:{marginBottom:"1rem"},children:[t.jsx("path",{d:"M16 4L28 28H4L16 4Z",fill:"url(#loadGrad2)",stroke:"#F59E0B",strokeWidth:"1.5"}),t.jsx("circle",{cx:"16",cy:"19",r:"3",fill:"#0B0F1A"}),t.jsx("defs",{children:t.jsxs("linearGradient",{id:"loadGrad2",x1:"16",y1:"4",x2:"16",y2:"28",children:[t.jsx("stop",{stopColor:"#FBBF24"}),t.jsx("stop",{offset:"1",stopColor:"#F59E0B"})]})})]}),t.jsx("div",{style:{width:"40px",height:"40px",border:"3px solid rgba(245, 158, 11, 0.2)",borderTopColor:"#F59E0B",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),t.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]})})}function Vt({children:e}){const{isAuthenticated:n}=ct();return n?t.jsx(t.Fragment,{children:e}):t.jsx(it,{to:"/login"})}function nt({children:e}){const{isAuthenticated:n,user:s}=ct();return n?t.jsx(it,{to:s!=null&&s.firmId?"/app/dashboard":"/setup"}):t.jsx(t.Fragment,{children:e})}function Fd(){const{checkAuth:e}=ct(),[n,s]=o.useState(!0);return o.useEffect(()=>{(async()=>{try{await e()}catch{console.log("No active session found")}finally{s(!1)}})()},[e]),n?t.jsx(Rd,{}):t.jsx(o.Suspense,{fallback:t.jsx(Bd,{}),children:t.jsxs(Os,{children:[t.jsx(m,{path:"/",element:t.jsx(fl,{})}),t.jsx(m,{path:"/login",element:t.jsx(nt,{children:t.jsx(yl,{})})}),t.jsx(m,{path:"/register",element:t.jsx(nt,{children:t.jsx(_l,{})})}),t.jsx(m,{path:"/forgot-password",element:t.jsx(nt,{children:t.jsx(xl,{})})}),t.jsx(m,{path:"/reset-password",element:t.jsx(nt,{children:t.jsx(wl,{})})}),t.jsx(m,{path:"/about",element:t.jsx(Pd,{})}),t.jsx(m,{path:"/security",element:t.jsx(Td,{})}),t.jsx(m,{path:"/integrations",element:t.jsx(jd,{})}),t.jsx(m,{path:"/blog",element:t.jsx(kd,{})}),t.jsx(m,{path:"/contact",element:t.jsx(Ad,{})}),t.jsx(m,{path:"/docs",element:t.jsx(Id,{})}),t.jsx(m,{path:"/api",element:t.jsx(Ed,{})}),t.jsx(m,{path:"/support",element:t.jsx(Nd,{})}),t.jsx(m,{path:"/status",element:t.jsx(Dd,{})}),t.jsx(m,{path:"/privacy",element:t.jsx(Cd,{})}),t.jsx(m,{path:"/terms",element:t.jsx(Od,{})}),t.jsx(m,{path:"/eula",element:t.jsx(zd,{})}),t.jsx(m,{path:"/compliance",element:t.jsx(Ld,{})}),t.jsx(m,{path:"/setup",element:t.jsx(Vt,{children:t.jsx(vl,{})})}),t.jsxs(m,{path:"/app",element:t.jsx(Vt,{children:t.jsx(hl,{})}),children:[t.jsx(m,{index:!0,element:t.jsx(it,{to:"/app/dashboard"})}),t.jsx(m,{path:"dashboard",element:t.jsx(Sl,{})}),t.jsx(m,{path:"matters",element:t.jsx(bl,{})}),t.jsx(m,{path:"matters/:id",element:t.jsx(Pl,{})}),t.jsx(m,{path:"clients",element:t.jsx(Tl,{})}),t.jsx(m,{path:"clients/:id",element:t.jsx(jl,{})}),t.jsx(m,{path:"calendar",element:t.jsx(_t,{})}),t.jsx(m,{path:"billing",element:t.jsx(kl,{})}),t.jsx(m,{path:"apex-pay",element:t.jsx(_d,{})}),t.jsx(m,{path:"time",element:t.jsx(Al,{})}),t.jsx(m,{path:"reports",element:t.jsx(Il,{})}),t.jsx(m,{path:"documents",element:t.jsx(Bt,{})}),t.jsx(m,{path:"documents/:documentId/versions",element:t.jsx(vd,{})}),t.jsx(m,{path:"documents/:documentId/compare",element:t.jsx(Sd,{})}),t.jsx(m,{path:"documents/permissions",element:t.jsx(bd,{})}),t.jsx(m,{path:"documents/templates",element:t.jsx(Yl,{})}),t.jsx(m,{path:"document-automation",element:t.jsx(Ft,{})}),t.jsx(m,{path:"ai",element:t.jsx(El,{})}),t.jsx(m,{path:"background-agent",element:t.jsx(Nl,{})}),t.jsx(m,{path:"agent-console/:taskId",element:t.jsx(Dl,{})}),t.jsx(m,{path:"ai/redline",element:t.jsx(yd,{})}),t.jsx(m,{path:"analytics",element:t.jsx(Gl,{})}),t.jsx(m,{path:"settings",element:t.jsx(Ol,{})}),t.jsx(m,{path:"settings/profile",element:t.jsx(Cl,{})}),t.jsx(m,{path:"settings/security",element:t.jsx(Jl,{})}),t.jsx(m,{path:"settings/firm",element:t.jsx(zl,{})}),t.jsx(m,{path:"settings/team",element:t.jsx(Rl,{})}),t.jsx(m,{path:"settings/integrations",element:t.jsx(Ml,{})}),t.jsx(m,{path:"settings/permissions",element:t.jsx($l,{})}),t.jsx(m,{path:"integrations/outlook",element:t.jsx(Ul,{})}),t.jsx(m,{path:"integrations/file-storage",element:t.jsx(Vl,{})}),t.jsx(m,{path:"integrations/quickbooks",element:t.jsx(Rt,{})}),t.jsx(m,{path:"integrations/onedrive",element:t.jsx(xt,{})}),t.jsx(m,{path:"integrations/google-drive",element:t.jsx(xt,{})}),t.jsx(m,{path:"integrations/dropbox",element:t.jsx(xt,{})}),t.jsx(m,{path:"integrations/google-calendar",element:t.jsx(_t,{})}),t.jsx(m,{path:"integrations/docusign",element:t.jsx(Bt,{})}),t.jsx(m,{path:"integrations/slack",element:t.jsx(ql,{})}),t.jsx(m,{path:"integrations/zoom",element:t.jsx(_t,{})}),t.jsx(m,{path:"integrations/quicken",element:t.jsx(Rt,{})}),t.jsx(m,{path:"settings/api-keys",element:t.jsx(Fl,{})}),t.jsx(m,{path:"settings/custom-fields",element:t.jsx(Wl,{})}),t.jsx(m,{path:"settings/recovery-bin",element:t.jsx(Kl,{})}),t.jsx(m,{path:"settings/court-rules",element:t.jsx(Ql,{})}),t.jsx(m,{path:"settings/snippets",element:t.jsx(Zl,{})}),t.jsx(m,{path:"settings/documents",element:t.jsx(Ft,{})}),t.jsx(m,{path:"settings/workflows",element:t.jsx(Xl,{})}),t.jsx(m,{path:"settings/bulk-permissions",element:t.jsx(ed,{})}),t.jsx(m,{path:"settings/account",element:t.jsx(ad,{})}),t.jsx(m,{path:"settings/appearance",element:t.jsx(id,{})}),t.jsx(m,{path:"settings/mobile",element:t.jsx(rd,{})}),t.jsx(m,{path:"settings/apps",element:t.jsx(od,{})}),t.jsx(m,{path:"settings/notifications",element:t.jsx(cd,{})}),t.jsx(m,{path:"settings/referrals",element:t.jsx(ld,{})}),t.jsx(m,{path:"settings/billing",element:t.jsx(dd,{})}),t.jsx(m,{path:"settings/payments",element:t.jsx(ud,{})}),t.jsx(m,{path:"settings/apex-pay",element:t.jsx(Mt,{})}),t.jsx(m,{path:"settings/apex-pay/callback",element:t.jsx(Mt,{})}),t.jsx(m,{path:"settings/data-escrow",element:t.jsx(md,{})}),t.jsx(m,{path:"settings/sharing",element:t.jsx(gd,{})}),t.jsx(m,{path:"settings/text-messaging",element:t.jsx(pd,{})}),t.jsx(m,{path:"settings/ai",element:t.jsx(hd,{})}),t.jsx(m,{path:"settings/reporting",element:t.jsx(fd,{})}),t.jsx(m,{path:"settings/drives",element:t.jsx(xd,{})}),t.jsx(m,{path:"settings/drive-setup",element:t.jsx(Ut,{})}),t.jsx(m,{path:"documents/connect",element:t.jsx(Ut,{})}),t.jsx(m,{path:"drive/browse",element:t.jsx(wd,{})}),t.jsx(m,{path:"trust",element:t.jsx(Hl,{})}),t.jsx(m,{path:"admin",element:t.jsx(Ll,{})}),t.jsx(m,{path:"admin/permissions",element:t.jsx(Bl,{})}),t.jsx(m,{path:"platform-admin",element:t.jsx(td,{})})]}),t.jsx(m,{path:"/rx760819",element:t.jsx(sd,{})}),t.jsx(m,{path:"/rx760819/dashboard",element:t.jsx(nd,{})}),t.jsx(m,{path:"*",element:t.jsx(it,{to:"/"})})]})})}function Md(){return t.jsx(Mn,{children:t.jsx(ia,{children:t.jsx(An,{children:t.jsx(kn,{children:t.jsxs(Cs,{children:[t.jsx($d,{}),t.jsx(Fd,{})]})})})})})}Ns.createRoot(document.getElementById("root")).render(t.jsx(Es.StrictMode,{children:t.jsx(Md,{})}));export{Mn as E,p as _,hs as a,lt as b,In as c,Xd as d,us as e,En as f,Gr as g,Be as h,Re as i,qe as j,rs as k,cs as l,Ue as m,ue as n,Je as o,is as p,Me as q,st as r,Yd as s,ve as t,ct as u,ce as v,ls as w,ds as x,ms as y,Zd as z};
