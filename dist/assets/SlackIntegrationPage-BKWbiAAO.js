import{r as n,a6 as e}from"./vendor-DrKzkH4x.js";import{i as N}from"./index-CCWWoMiH.js";import{s}from"./IntegrationDataPage.module-DQ8gf-9T.js";import{a as w}from"./router-CNLU_KyZ.js";import{al as z,m as f,R as S,ao as M,bt as B,i as L}from"./icons-BtUkkwGS.js";import"./doc-parsers-U1nJMjtM.js";import"./react-dom-DfB-QKj2.js";import"./pdf-worker-CVmCB3lP.js";import"./state-72d44OIA.js";function _(){const y=w(),[o,C]=n.useState([]),[c,m]=n.useState(!0),[h,b]=n.useState(""),[i,t]=n.useState(null),[l,x]=n.useState(""),[j,g]=n.useState(!1),[d,r]=n.useState(null);n.useEffect(()=>{p()},[]);const p=async()=>{try{m(!0);const a=await N.getSlackChannels();C(a.channels||[])}catch(a){r({type:"error",message:a.message||"Failed to load channels"})}finally{m(!1)}},k=async()=>{if(!(!i||!l.trim())){g(!0);try{await N.sendSlackMessage(i.id,l),r({type:"success",message:`Message sent to #${i.name}`}),x(""),t(null)}catch(a){r({type:"error",message:a.message||"Failed to send message"})}finally{g(!1)}}},u=o.filter(a=>{var v;return(v=a.name)==null?void 0:v.toLowerCase().includes(h.toLowerCase())});return e.jsxs("div",{className:s.container,children:[d&&e.jsxs("div",{className:`${s.notification} ${s[d.type]}`,children:[d.message,e.jsx("button",{onClick:()=>r(null),children:"Ã—"})]}),e.jsxs("div",{className:s.header,children:[e.jsxs("div",{className:s.headerLeft,children:[e.jsx("button",{className:s.backBtn,onClick:()=>y(-1),children:e.jsx(z,{size:20})}),e.jsx("div",{className:s.headerIcon,children:e.jsx(f,{size:28})}),e.jsxs("div",{children:[e.jsx("h1",{children:"Slack"}),e.jsx("p",{children:"Send messages to your Slack channels"})]})]}),e.jsx("div",{className:s.headerActions,children:e.jsxs("button",{className:s.syncBtn,onClick:p,disabled:c,children:[e.jsx(S,{size:18,className:c?s.spinning:""}),"Refresh"]})})]}),e.jsxs("div",{className:s.toolbar,children:[e.jsxs("div",{className:s.searchBox,children:[e.jsx(M,{size:18}),e.jsx("input",{type:"text",placeholder:"Search channels...",value:h,onChange:a=>b(a.target.value)})]}),e.jsx("div",{className:s.stats,children:e.jsxs("span",{children:[o.length," channels"]})})]}),c?e.jsxs("div",{className:s.loading,children:[e.jsx(S,{size:24,className:s.spinning}),e.jsx("span",{children:"Loading channels..."})]}):e.jsx("div",{className:s.dataList,children:u.length===0?e.jsxs("div",{className:s.empty,children:[e.jsx(f,{size:48}),e.jsx("h3",{children:"No channels found"}),e.jsx("p",{children:"Your Slack channels will appear here"})]}):u.map(a=>e.jsxs("div",{className:s.dataItem,children:[e.jsx("div",{className:s.itemIcon,children:e.jsx(B,{size:20})}),e.jsxs("div",{className:s.itemContent,children:[e.jsxs("div",{className:s.itemHeader,children:[e.jsxs("span",{className:s.itemTitle,children:["#",a.name]}),a.is_private&&e.jsx("span",{className:s.itemDate,children:"Private"})]}),e.jsx("div",{className:s.itemMeta,children:e.jsxs("span",{children:[a.num_members," members"]})})]}),e.jsx("div",{className:s.itemActions,children:e.jsxs("button",{className:s.linkBtn,onClick:()=>t(a),children:[e.jsx(L,{size:14}),"Message"]})})]},a.id))}),i&&e.jsx("div",{className:s.modalOverlay,onClick:()=>t(null),children:e.jsxs("div",{className:s.modal,onClick:a=>a.stopPropagation(),children:[e.jsxs("h2",{children:["Send to #",i.name]}),e.jsx("textarea",{value:l,onChange:a=>x(a.target.value),placeholder:"Type your message...",rows:4,style:{width:"100%",padding:"var(--spacing-sm)",background:"var(--bg-tertiary)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-md)",color:"var(--text-primary)",resize:"vertical",marginBottom:"var(--spacing-md)"}}),e.jsxs("div",{className:s.modalActions,children:[e.jsx("button",{className:s.cancelBtn,onClick:()=>t(null),children:"Cancel"}),e.jsx("button",{className:s.confirmBtn,onClick:k,disabled:!l.trim()||j,children:j?"Sending...":"Send Message"})]})]})})]})}export{_ as SlackIntegrationPage};
