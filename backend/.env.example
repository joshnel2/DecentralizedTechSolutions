# ===========================================
# APEX AI - Backend Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values

# Database (Azure PostgreSQL)
DATABASE_URL=postgresql://username:password@your-server.postgres.database.azure.com:5432/apex_legal?sslmode=require

# JWT Authentication
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters
JWT_REFRESH_SECRET=your-refresh-secret-key-minimum-32-characters

# Azure OpenAI (Legacy - for standard chat completions)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
AZURE_OPENAI_API_KEY=your-azure-openai-api-key
AZURE_OPENAI_DEPLOYMENT=gpt-4

# ===========================================
# AZURE AI FOUNDRY (Recommended for Agents)
# ===========================================
# Azure AI Foundry provides native agent capabilities
# with tool use, conversations, and 15-minute sessions.
# Create a project at: https://ai.azure.com
#
# Set to 'true' to enable Foundry agent (auto-enabled if endpoint configured)
USE_FOUNDRY_AGENT=true
#
# The endpoint is your AI Foundry project endpoint
# Format: https://<project-name>.<region>.inference.ml.azure.com
# Or: https://<resource-name>.cognitiveservices.azure.com
AZURE_AI_FOUNDRY_ENDPOINT=https://your-project.cognitiveservices.azure.com
AZURE_AI_FOUNDRY_DEPLOYMENT=gpt-4o

# Authentication Options (choose one):
#
# Option 1: Azure CLI (recommended for development)
# - Just run 'az login' and ensure you have Contributor role on the AI project
#
# Option 2: Service Principal (recommended for production)
# Register an app at: https://portal.azure.com -> App registrations
# Grant it "Cognitive Services User" role on your AI Foundry project
AZURE_TENANT_ID=your-tenant-id
AZURE_CLIENT_ID=your-app-registration-client-id
AZURE_CLIENT_SECRET=your-client-secret

# Frontend URL (for CORS)
FRONTEND_URL=https://your-frontend-url.azurestaticapps.net

# Server
PORT=8080
NODE_ENV=production

# ===========================================
# INTEGRATIONS
# ===========================================
# Register apps at each provider and add credentials here.
# Users will just click "Connect" - they don't need API keys.

# Google OAuth (Calendar + Gmail)
# Register at: https://console.cloud.google.com
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=https://strappedai.azurewebsites.net/api/integrations/google/callback

# Microsoft OAuth (Outlook Email + Calendar)
# Register at: https://portal.azure.com -> App registrations
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_REDIRECT_URI=https://strappedai.azurewebsites.net/api/integrations/outlook/callback
MICROSOFT_TENANT=common

# QuickBooks OAuth (Accounting)
# Register at: https://developer.intuit.com
QUICKBOOKS_CLIENT_ID=your-quickbooks-client-id
QUICKBOOKS_CLIENT_SECRET=your-quickbooks-client-secret
QUICKBOOKS_REDIRECT_URI=https://strappedai.azurewebsites.net/api/integrations/quickbooks/callback
QUICKBOOKS_ENVIRONMENT=sandbox

# ===========================================
# EMAIL CONFIGURATION
# ===========================================
# Choose ONE option: Gmail (SMTP) or SendGrid

# Option 1: Gmail SMTP (use App Password, not regular password)
# Create App Password at: https://myaccount.google.com/apppasswords
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Option 2: SendGrid
# Get API key at: https://app.sendgrid.com/settings/api_keys
# SENDGRID_API_KEY=your-sendgrid-api-key

# From address for emails
EMAIL_FROM=Apex Legal <noreply@apex.law>

# ===========================================
# APEX DRIVE (Document Storage)
# ===========================================
# This is YOUR Azure storage. All client firms use it.
# Each firm gets their own folder automatically.
# Create at: https://portal.azure.com -> Storage accounts

AZURE_STORAGE_ACCOUNT_NAME=yourstorageaccount
AZURE_STORAGE_ACCOUNT_KEY=your-storage-account-key
AZURE_FILE_SHARE_NAME=apexdrive
