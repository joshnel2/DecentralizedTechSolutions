# ===========================================
# APEX AI - Backend Environment Configuration
# ===========================================
# Copy this file to .env and fill in your values

# Database (Azure PostgreSQL)
DATABASE_URL=postgresql://username:password@your-server.postgres.database.azure.com:5432/apex_legal?sslmode=require

# JWT Authentication
JWT_SECRET=your-super-secret-jwt-key-minimum-32-characters
JWT_REFRESH_SECRET=your-refresh-secret-key-minimum-32-characters

# Azure OpenAI (for Azure AI Foundry deployed models)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
AZURE_OPENAI_API_KEY=your-azure-openai-api-key
AZURE_OPENAI_DEPLOYMENT=gpt-4

# Azure OpenAI Embeddings (for semantic search - configured in Azure Web App)
# AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-3-small
# AZURE_OPENAI_EMBEDDING_ENDPOINT=https://your-embeddings-resource.openai.azure.com
# AZURE_OPENAI_EMBEDDING_API_KEY=your-embeddings-api-key

# Frontend URL (for CORS)
FRONTEND_URL=https://your-frontend-url.azurestaticapps.net

# Server
PORT=8080
NODE_ENV=production

# Secure Admin Portal Credentials
# Used for the platform administration portal (/rx760819)
SECURE_ADMIN_USERNAME=your-secure-admin-username
SECURE_ADMIN_PASSWORD=your-secure-admin-password

# ===========================================
# INTEGRATIONS
# ===========================================
# Register apps at each provider and add credentials here.
# Users will just click "Connect" - they don't need API keys.

# Google OAuth (Calendar + Gmail)
# Register at: https://console.cloud.google.com
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=https://strappedai.azurewebsites.net/api/integrations/google/callback

# Microsoft OAuth (Outlook Email + Calendar)
# Register at: https://portal.azure.com -> App registrations
MICROSOFT_CLIENT_ID=your-microsoft-client-id
MICROSOFT_CLIENT_SECRET=your-microsoft-client-secret
MICROSOFT_REDIRECT_URI=https://strappedai.azurewebsites.net/api/integrations/outlook/callback
MICROSOFT_TENANT=common

# QuickBooks OAuth (Accounting)
# Register at: https://developer.intuit.com
QUICKBOOKS_CLIENT_ID=your-quickbooks-client-id
QUICKBOOKS_CLIENT_SECRET=your-quickbooks-client-secret
QUICKBOOKS_REDIRECT_URI=https://strappedai.azurewebsites.net/api/integrations/quickbooks/callback
QUICKBOOKS_ENVIRONMENT=sandbox

# ===========================================
# EMAIL CONFIGURATION
# ===========================================
# Choose ONE option: Gmail (SMTP) or SendGrid

# Option 1: Gmail SMTP (use App Password, not regular password)
# Create App Password at: https://myaccount.google.com/apppasswords
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Option 2: SendGrid
# Get API key at: https://app.sendgrid.com/settings/api_keys
# SENDGRID_API_KEY=your-sendgrid-api-key

# From address for emails
EMAIL_FROM=Apex Legal <noreply@apex.law>

# ===========================================
# AZURE SPEECH (Voice AI)
# ===========================================
# Create at: Azure Portal -> Create resource -> Speech
# Get keys from: Your Speech resource -> Keys and Endpoint

AZURE_SPEECH_KEY=your-azure-speech-key
AZURE_SPEECH_REGION=eastus

# ===========================================
# VECTOR SEARCH & ENCRYPTION
# ===========================================
# Azure Key Vault for per-tenant encryption keys (configured in Azure Web App)
# AZURE_KEY_VAULT_NAME=your-key-vault-name
# AZURE_KEY_VAULT_TENANT_ID=your-tenant-id
# AZURE_KEY_VAULT_CLIENT_ID=your-client-id
# AZURE_KEY_VAULT_CLIENT_SECRET=your-client-secret

# Fallback encryption secret (configured in Azure Web App)
# ENCRYPTION_SECRET=your-development-encryption-secret-minimum-32-characters

# ===========================================
# APEX DRIVE (Document Storage)
# ===========================================
# This is YOUR Azure storage. All client firms use it.
# Each firm gets their own folder automatically.
# Create at: https://portal.azure.com -> Storage accounts

AZURE_STORAGE_ACCOUNT_NAME=yourstorageaccount
AZURE_STORAGE_ACCOUNT_KEY=your-storage-account-key
AZURE_FILE_SHARE_NAME=apexdrive

# ===========================================
# LEGAL RESEARCH (Isolated â€” NOT Azure OpenAI)
# ===========================================
# This section uses OpenRouter to access Claude Opus 4.6 with
# Adaptive Thinking for legal research. It is COMPLETELY SEPARATE
# from the Azure OpenAI configuration above. No confidential data is sent.
#
# Get API key at: https://openrouter.ai/keys
#
# The following are HARDCODED in the service (not read from env):
#   Base URL:     https://openrouter.ai/api/v1
#   Model:        anthropic/claude-opus-4.6
#   Reasoning:    { enabled: true } (Adaptive Thinking)
#   HTTP-Referer: http://localhost:3000
#   X-Title:      Legal Research Agent
#
# Only the API key is read from environment:
OPENROUTER_API_KEY=sk-or-v1-your-openrouter-api-key
